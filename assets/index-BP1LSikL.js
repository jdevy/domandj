(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function or(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const yt={},ke=[],ee=()=>{},Ma=()=>!1,un=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ar=t=>t.startsWith("onUpdate:"),Dt=Object.assign,lr=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},Oa=Object.prototype.hasOwnProperty,mt=(t,e)=>Oa.call(t,e),ht=Array.isArray,Ne=t=>qi(t)==="[object Map]",fn=t=>qi(t)==="[object Set]",Or=t=>qi(t)==="[object Date]",ct=t=>typeof t=="function",Rt=t=>typeof t=="string",ie=t=>typeof t=="symbol",bt=t=>t!==null&&typeof t=="object",po=t=>(bt(t)||ct(t))&&ct(t.then)&&ct(t.catch),_o=Object.prototype.toString,qi=t=>_o.call(t),ka=t=>qi(t).slice(8,-1),mo=t=>qi(t)==="[object Object]",hr=t=>Rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fi=or(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gn=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},Na=/-(\w)/g,$t=gn(t=>t.replace(Na,(e,i)=>i?i.toUpperCase():"")),Ga=/\B([A-Z])/g,Pe=gn(t=>t.replace(Ga,"-$1").toLowerCase()),pn=gn(t=>t.charAt(0).toUpperCase()+t.slice(1)),Tn=gn(t=>t?`on${pn(t)}`:""),me=(t,e)=>!Object.is(t,e),$i=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},Yn=(t,e,i,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:i})},yo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let kr;const _n=()=>kr||(kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function cr(t){if(ht(t)){const e={};for(let i=0;i<t.length;i++){const r=t[i],n=Rt(r)?Ua(r):cr(r);if(n)for(const s in n)e[s]=n[s]}return e}else if(Rt(t)||bt(t))return t}const La=/;(?![^(]*\))/g,Da=/:([^]+)/,Ia=/\/\*[^]*?\*\//g;function Ua(t){const e={};return t.replace(Ia,"").split(La).forEach(i=>{if(i){const r=i.split(Da);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function dr(t){let e="";if(Rt(t))e=t;else if(ht(t))for(let i=0;i<t.length;i++){const r=dr(t[i]);r&&(e+=r+" ")}else if(bt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Ba="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Va=or(Ba);function vo(t){return!!t||t===""}function Ha(t,e){if(t.length!==e.length)return!1;let i=!0;for(let r=0;i&&r<t.length;r++)i=mn(t[r],e[r]);return i}function mn(t,e){if(t===e)return!0;let i=Or(t),r=Or(e);if(i||r)return i&&r?t.getTime()===e.getTime():!1;if(i=ie(t),r=ie(e),i||r)return t===e;if(i=ht(t),r=ht(e),i||r)return i&&r?Ha(t,e):!1;if(i=bt(t),r=bt(e),i||r){if(!i||!r)return!1;const n=Object.keys(t).length,s=Object.keys(e).length;if(n!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!mn(t[o],e[o]))return!1}}return String(t)===String(e)}function qa(t,e){return t.findIndex(i=>mn(i,e))}const bo=t=>!!(t&&t.__v_isRef===!0),So=t=>Rt(t)?t:t==null?"":ht(t)||bt(t)&&(t.toString===_o||!ct(t.toString))?bo(t)?So(t.value):JSON.stringify(t,Co,2):String(t),Co=(t,e)=>bo(e)?Co(t,e.value):Ne(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[r,n],s)=>(i[An(r,s)+" =>"]=n,i),{})}:fn(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>An(i))}:ie(e)?An(e):bt(e)&&!ht(e)&&!mo(e)?String(e):e,An=(t,e="")=>{var i;return ie(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qt;class Wa{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qt,!e&&qt&&(this.index=(qt.scopes||(qt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=qt;try{return qt=this,e()}finally{qt=i}}}on(){++this._on===1&&(this.prevScope=qt,qt=this)}off(){this._on>0&&--this._on===0&&(qt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function ja(){return qt}let vt;const Rn=new WeakSet;class wo{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qt&&qt.active&&qt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rn.has(this)&&(Rn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Po(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Nr(this),To(this);const e=vt,i=Jt;vt=this,Jt=!0;try{return this.fn()}finally{Ao(this),vt=e,Jt=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)gr(e);this.deps=this.depsTail=void 0,Nr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xn(this)&&this.run()}get dirty(){return Xn(this)}}let xo=0,Mi,Oi;function Po(t,e=!1){if(t.flags|=8,e){t.next=Oi,Oi=t;return}t.next=Mi,Mi=t}function ur(){xo++}function fr(){if(--xo>0)return;if(Oi){let e=Oi;for(Oi=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Mi;){let e=Mi;for(Mi=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=i}}if(t)throw t}function To(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ao(t){let e,i=t.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),gr(r),za(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=i}function Xn(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ro(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ro(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ii)||(t.globalVersion=Ii,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Xn(t))))return;t.flags|=2;const e=t.dep,i=vt,r=Jt;vt=t,Jt=!0;try{To(t);const n=t.fn(t._value);(e.version===0||me(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{vt=i,Jt=r,Ao(t),t.flags&=-3}}function gr(t,e=!1){const{dep:i,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),i.subs===t&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)gr(s,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function za(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let Jt=!0;const Eo=[];function de(){Eo.push(Jt),Jt=!1}function ue(){const t=Eo.pop();Jt=t===void 0?!0:t}function Nr(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=vt;vt=void 0;try{e()}finally{vt=i}}}let Ii=0;class Ka{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class pr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!vt||!Jt||vt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==vt)i=this.activeLink=new Ka(vt,this),vt.deps?(i.prevDep=vt.depsTail,vt.depsTail.nextDep=i,vt.depsTail=i):vt.deps=vt.depsTail=i,Fo(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=vt.depsTail,i.nextDep=void 0,vt.depsTail.nextDep=i,vt.depsTail=i,vt.deps===i&&(vt.deps=r)}return i}trigger(e){this.version++,Ii++,this.notify(e)}notify(e){ur();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{fr()}}}function Fo(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Fo(r)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const $n=new WeakMap,xe=Symbol(""),Jn=Symbol(""),Ui=Symbol("");function Gt(t,e,i){if(Jt&&vt){let r=$n.get(t);r||$n.set(t,r=new Map);let n=r.get(i);n||(r.set(i,n=new pr),n.map=r,n.key=i),n.track()}}function he(t,e,i,r,n,s){const o=$n.get(t);if(!o){Ii++;return}const a=l=>{l&&l.trigger()};if(ur(),e==="clear")o.forEach(a);else{const l=ht(t),c=l&&hr(i);if(l&&i==="length"){const h=Number(r);o.forEach((_,y)=>{(y==="length"||y===Ui||!ie(y)&&y>=h)&&a(_)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),c&&a(o.get(Ui)),e){case"add":l?c&&a(o.get("length")):(a(o.get(xe)),Ne(t)&&a(o.get(Jn)));break;case"delete":l||(a(o.get(xe)),Ne(t)&&a(o.get(Jn)));break;case"set":Ne(t)&&a(o.get(xe));break}}fr()}function Te(t){const e=_t(t);return e===t?e:(Gt(e,"iterate",Ui),Xt(t)?e:e.map(kt))}function yn(t){return Gt(t=_t(t),"iterate",Ui),t}const Ya={__proto__:null,[Symbol.iterator](){return En(this,Symbol.iterator,kt)},concat(...t){return Te(this).concat(...t.map(e=>ht(e)?Te(e):e))},entries(){return En(this,"entries",t=>(t[1]=kt(t[1]),t))},every(t,e){return re(this,"every",t,e,void 0,arguments)},filter(t,e){return re(this,"filter",t,e,i=>i.map(kt),arguments)},find(t,e){return re(this,"find",t,e,kt,arguments)},findIndex(t,e){return re(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return re(this,"findLast",t,e,kt,arguments)},findLastIndex(t,e){return re(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return re(this,"forEach",t,e,void 0,arguments)},includes(...t){return Fn(this,"includes",t)},indexOf(...t){return Fn(this,"indexOf",t)},join(t){return Te(this).join(t)},lastIndexOf(...t){return Fn(this,"lastIndexOf",t)},map(t,e){return re(this,"map",t,e,void 0,arguments)},pop(){return Ue(this,"pop")},push(...t){return Ue(this,"push",t)},reduce(t,...e){return Gr(this,"reduce",t,e)},reduceRight(t,...e){return Gr(this,"reduceRight",t,e)},shift(){return Ue(this,"shift")},some(t,e){return re(this,"some",t,e,void 0,arguments)},splice(...t){return Ue(this,"splice",t)},toReversed(){return Te(this).toReversed()},toSorted(t){return Te(this).toSorted(t)},toSpliced(...t){return Te(this).toSpliced(...t)},unshift(...t){return Ue(this,"unshift",t)},values(){return En(this,"values",kt)}};function En(t,e,i){const r=yn(t),n=r[e]();return r!==t&&!Xt(t)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=i(s.value)),s}),n}const Xa=Array.prototype;function re(t,e,i,r,n,s){const o=yn(t),a=o!==t&&!Xt(t),l=o[e];if(l!==Xa[e]){const _=l.apply(t,s);return a?kt(_):_}let c=i;o!==t&&(a?c=function(_,y){return i.call(this,kt(_),y,t)}:i.length>2&&(c=function(_,y){return i.call(this,_,y,t)}));const h=l.call(o,c,r);return a&&n?n(h):h}function Gr(t,e,i,r){const n=yn(t);let s=i;return n!==t&&(Xt(t)?i.length>3&&(s=function(o,a,l){return i.call(this,o,a,l,t)}):s=function(o,a,l){return i.call(this,o,kt(a),l,t)}),n[e](s,...r)}function Fn(t,e,i){const r=_t(t);Gt(r,"iterate",Ui);const n=r[e](...i);return(n===-1||n===!1)&&yr(i[0])?(i[0]=_t(i[0]),r[e](...i)):n}function Ue(t,e,i=[]){de(),ur();const r=_t(t)[e].apply(t,i);return fr(),ue(),r}const $a=or("__proto__,__v_isRef,__isVue"),Mo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ie));function Ja(t){ie(t)||(t=String(t));const e=_t(this);return Gt(e,"has",t),e.hasOwnProperty(t)}class Oo{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,r){if(i==="__v_skip")return e.__v_skip;const n=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return s;if(i==="__v_raw")return r===(n?s?al:Lo:s?Go:No).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ht(e);if(!n){let l;if(o&&(l=Ya[i]))return l;if(i==="hasOwnProperty")return Ja}const a=Reflect.get(e,i,Lt(e)?e:r);return(ie(i)?Mo.has(i):$a(i))||(n||Gt(e,"get",i),s)?a:Lt(a)?o&&hr(i)?a:a.value:bt(a)?n?Do(a):Wi(a):a}}class ko extends Oo{constructor(e=!1){super(!1,e)}set(e,i,r,n){let s=e[i];if(!this._isShallow){const l=ye(s);if(!Xt(r)&&!ye(r)&&(s=_t(s),r=_t(r)),!ht(e)&&Lt(s)&&!Lt(r))return l?!1:(s.value=r,!0)}const o=ht(e)&&hr(i)?Number(i)<e.length:mt(e,i),a=Reflect.set(e,i,r,Lt(e)?e:n);return e===_t(n)&&(o?me(r,s)&&he(e,"set",i,r):he(e,"add",i,r)),a}deleteProperty(e,i){const r=mt(e,i);e[i];const n=Reflect.deleteProperty(e,i);return n&&r&&he(e,"delete",i,void 0),n}has(e,i){const r=Reflect.has(e,i);return(!ie(i)||!Mo.has(i))&&Gt(e,"has",i),r}ownKeys(e){return Gt(e,"iterate",ht(e)?"length":xe),Reflect.ownKeys(e)}}class Qa extends Oo{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const Za=new ko,tl=new Qa,el=new ko(!0);const Qn=t=>t,Ki=t=>Reflect.getPrototypeOf(t);function il(t,e,i){return function(...r){const n=this.__v_raw,s=_t(n),o=Ne(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=n[t](...r),h=i?Qn:e?nn:kt;return!e&&Gt(s,"iterate",l?Jn:xe),{next(){const{value:_,done:y}=c.next();return y?{value:_,done:y}:{value:a?[h(_[0]),h(_[1])]:h(_),done:y}},[Symbol.iterator](){return this}}}}function Yi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nl(t,e){const i={get(n){const s=this.__v_raw,o=_t(s),a=_t(n);t||(me(n,a)&&Gt(o,"get",n),Gt(o,"get",a));const{has:l}=Ki(o),c=e?Qn:t?nn:kt;if(l.call(o,n))return c(s.get(n));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(n)},get size(){const n=this.__v_raw;return!t&&Gt(_t(n),"iterate",xe),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,o=_t(s),a=_t(n);return t||(me(n,a)&&Gt(o,"has",n),Gt(o,"has",a)),n===a?s.has(n):s.has(n)||s.has(a)},forEach(n,s){const o=this,a=o.__v_raw,l=_t(a),c=e?Qn:t?nn:kt;return!t&&Gt(l,"iterate",xe),a.forEach((h,_)=>n.call(s,c(h),c(_),o))}};return Dt(i,t?{add:Yi("add"),set:Yi("set"),delete:Yi("delete"),clear:Yi("clear")}:{add(n){!e&&!Xt(n)&&!ye(n)&&(n=_t(n));const s=_t(this);return Ki(s).has.call(s,n)||(s.add(n),he(s,"add",n,n)),this},set(n,s){!e&&!Xt(s)&&!ye(s)&&(s=_t(s));const o=_t(this),{has:a,get:l}=Ki(o);let c=a.call(o,n);c||(n=_t(n),c=a.call(o,n));const h=l.call(o,n);return o.set(n,s),c?me(s,h)&&he(o,"set",n,s):he(o,"add",n,s),this},delete(n){const s=_t(this),{has:o,get:a}=Ki(s);let l=o.call(s,n);l||(n=_t(n),l=o.call(s,n)),a&&a.call(s,n);const c=s.delete(n);return l&&he(s,"delete",n,void 0),c},clear(){const n=_t(this),s=n.size!==0,o=n.clear();return s&&he(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=il(n,t,e)}),i}function _r(t,e){const i=nl(t,e);return(r,n,s)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(mt(i,n)&&n in r?i:r,n,s)}const rl={get:_r(!1,!1)},sl={get:_r(!1,!0)},ol={get:_r(!0,!1)};const No=new WeakMap,Go=new WeakMap,Lo=new WeakMap,al=new WeakMap;function ll(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hl(t){return t.__v_skip||!Object.isExtensible(t)?0:ll(ka(t))}function Wi(t){return ye(t)?t:mr(t,!1,Za,rl,No)}function cl(t){return mr(t,!1,el,sl,Go)}function Do(t){return mr(t,!0,tl,ol,Lo)}function mr(t,e,i,r,n){if(!bt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=hl(t);if(s===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,s===2?r:i);return n.set(t,a),a}function Ge(t){return ye(t)?Ge(t.__v_raw):!!(t&&t.__v_isReactive)}function ye(t){return!!(t&&t.__v_isReadonly)}function Xt(t){return!!(t&&t.__v_isShallow)}function yr(t){return t?!!t.__v_raw:!1}function _t(t){const e=t&&t.__v_raw;return e?_t(e):t}function dl(t){return!mt(t,"__v_skip")&&Object.isExtensible(t)&&Yn(t,"__v_skip",!0),t}const kt=t=>bt(t)?Wi(t):t,nn=t=>bt(t)?Do(t):t;function Lt(t){return t?t.__v_isRef===!0:!1}function ul(t){return fl(t,!1)}function fl(t,e){return Lt(t)?t:new gl(t,e)}class gl{constructor(e,i){this.dep=new pr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:_t(e),this._value=i?e:kt(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,r=this.__v_isShallow||Xt(e)||ye(e);e=r?e:_t(e),me(e,i)&&(this._rawValue=e,this._value=r?e:kt(e),this.dep.trigger())}}function pl(t){return Lt(t)?t.value:t}const _l={get:(t,e,i)=>e==="__v_raw"?t:pl(Reflect.get(t,e,i)),set:(t,e,i,r)=>{const n=t[e];return Lt(n)&&!Lt(i)?(n.value=i,!0):Reflect.set(t,e,i,r)}};function Io(t){return Ge(t)?t:new Proxy(t,_l)}class ml{constructor(e,i,r){this.fn=e,this.setter=i,this._value=void 0,this.dep=new pr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ii-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&vt!==this)return Po(this,!0),!0}get value(){const e=this.dep.track();return Ro(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yl(t,e,i=!1){let r,n;return ct(t)?r=t:(r=t.get,n=t.set),new ml(r,n,i)}const Xi={},rn=new WeakMap;let we;function vl(t,e=!1,i=we){if(i){let r=rn.get(i);r||rn.set(i,r=[]),r.push(t)}}function bl(t,e,i=yt){const{immediate:r,deep:n,once:s,scheduler:o,augmentJob:a,call:l}=i,c=m=>n?m:Xt(m)||n===!1||n===0?ce(m,1):ce(m);let h,_,y,u,g=!1,v=!1;if(Lt(t)?(_=()=>t.value,g=Xt(t)):Ge(t)?(_=()=>c(t),g=!0):ht(t)?(v=!0,g=t.some(m=>Ge(m)||Xt(m)),_=()=>t.map(m=>{if(Lt(m))return m.value;if(Ge(m))return c(m);if(ct(m))return l?l(m,2):m()})):ct(t)?e?_=l?()=>l(t,2):t:_=()=>{if(y){de();try{y()}finally{ue()}}const m=we;we=h;try{return l?l(t,3,[u]):t(u)}finally{we=m}}:_=ee,e&&n){const m=_,C=n===!0?1/0:n;_=()=>ce(m(),C)}const S=ja(),P=()=>{h.stop(),S&&S.active&&lr(S.effects,h)};if(s&&e){const m=e;e=(...C)=>{m(...C),P()}}let f=v?new Array(t.length).fill(Xi):Xi;const d=m=>{if(!(!(h.flags&1)||!h.dirty&&!m))if(e){const C=h.run();if(n||g||(v?C.some((A,G)=>me(A,f[G])):me(C,f))){y&&y();const A=we;we=h;try{const G=[C,f===Xi?void 0:v&&f[0]===Xi?[]:f,u];f=C,l?l(e,3,G):e(...G)}finally{we=A}}}else h.run()};return a&&a(d),h=new wo(_),h.scheduler=o?()=>o(d,!1):d,u=m=>vl(m,!1,h),y=h.onStop=()=>{const m=rn.get(h);if(m){if(l)l(m,4);else for(const C of m)C();rn.delete(h)}},e?r?d(!0):f=h.run():o?o(d.bind(null,!0),!0):h.run(),P.pause=h.pause.bind(h),P.resume=h.resume.bind(h),P.stop=P,P}function ce(t,e=1/0,i){if(e<=0||!bt(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,Lt(t))ce(t.value,e,i);else if(ht(t))for(let r=0;r<t.length;r++)ce(t[r],e,i);else if(fn(t)||Ne(t))t.forEach(r=>{ce(r,e,i)});else if(mo(t)){for(const r in t)ce(t[r],e,i);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ce(t[r],e,i)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ji(t,e,i,r){try{return r?t(...r):t()}catch(n){vn(n,e,i)}}function ne(t,e,i,r){if(ct(t)){const n=ji(t,e,i,r);return n&&po(n)&&n.catch(s=>{vn(s,e,i)}),n}if(ht(t)){const n=[];for(let s=0;s<t.length;s++)n.push(ne(t[s],e,i,r));return n}}function vn(t,e,i,r=!0){const n=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||yt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const h=a.ec;if(h){for(let _=0;_<h.length;_++)if(h[_](t,l,c)===!1)return}a=a.parent}if(s){de(),ji(s,null,10,[t,l,c]),ue();return}}Sl(t,i,n,r,o)}function Sl(t,e,i,r=!0,n=!1){if(n)throw t;console.error(t)}const Ut=[];let Zt=-1;const Le=[];let pe=null,Ee=0;const Uo=Promise.resolve();let sn=null;function Bo(t){const e=sn||Uo;return t?e.then(this?t.bind(this):t):e}function Cl(t){let e=Zt+1,i=Ut.length;for(;e<i;){const r=e+i>>>1,n=Ut[r],s=Bi(n);s<t||s===t&&n.flags&2?e=r+1:i=r}return e}function vr(t){if(!(t.flags&1)){const e=Bi(t),i=Ut[Ut.length-1];!i||!(t.flags&2)&&e>=Bi(i)?Ut.push(t):Ut.splice(Cl(e),0,t),t.flags|=1,Vo()}}function Vo(){sn||(sn=Uo.then(qo))}function wl(t){ht(t)?Le.push(...t):pe&&t.id===-1?pe.splice(Ee+1,0,t):t.flags&1||(Le.push(t),t.flags|=1),Vo()}function Lr(t,e,i=Zt+1){for(;i<Ut.length;i++){const r=Ut[i];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ut.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ho(t){if(Le.length){const e=[...new Set(Le)].sort((i,r)=>Bi(i)-Bi(r));if(Le.length=0,pe){pe.push(...e);return}for(pe=e,Ee=0;Ee<pe.length;Ee++){const i=pe[Ee];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}pe=null,Ee=0}}const Bi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function qo(t){try{for(Zt=0;Zt<Ut.length;Zt++){const e=Ut[Zt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ji(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Zt<Ut.length;Zt++){const e=Ut[Zt];e&&(e.flags&=-2)}Zt=-1,Ut.length=0,Ho(),sn=null,(Ut.length||Le.length)&&qo()}}let Wt=null,Wo=null;function on(t){const e=Wt;return Wt=t,Wo=t&&t.type.__scopeId||null,e}function Fe(t,e=Wt,i){if(!e||t._n)return t;const r=(...n)=>{r._d&&zr(-1);const s=on(e);let o;try{o=t(...n)}finally{on(s),r._d&&zr(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function xl(t,e){if(Wt===null)return t;const i=wn(Wt),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[s,o,a,l=yt]=e[n];s&&(ct(s)&&(s={mounted:s,updated:s}),s.deep&&ce(o),r.push({dir:s,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function be(t,e,i,r){const n=t.dirs,s=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(de(),ne(l,i,8,[t.el,a,t,e]),ue())}}const Pl=Symbol("_vte"),Tl=t=>t.__isTeleport;function br(t,e){t.shapeFlag&6&&t.component?(t.transition=e,br(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function jo(t,e){return ct(t)?Dt({name:t.name},e,{setup:t}):t}function zo(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ki(t,e,i,r,n=!1){if(ht(t)){t.forEach((g,v)=>ki(g,e&&(ht(e)?e[v]:e),i,r,n));return}if(Ni(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ki(t,e,i,r.component.subTree);return}const s=r.shapeFlag&4?wn(r.component):r.el,o=n?null:s,{i:a,r:l}=t,c=e&&e.r,h=a.refs===yt?a.refs={}:a.refs,_=a.setupState,y=_t(_),u=_===yt?()=>!1:g=>mt(y,g);if(c!=null&&c!==l&&(Rt(c)?(h[c]=null,u(c)&&(_[c]=null)):Lt(c)&&(c.value=null)),ct(l))ji(l,a,12,[o,h]);else{const g=Rt(l),v=Lt(l);if(g||v){const S=()=>{if(t.f){const P=g?u(l)?_[l]:h[l]:l.value;n?ht(P)&&lr(P,s):ht(P)?P.includes(s)||P.push(s):g?(h[l]=[s],u(l)&&(_[l]=h[l])):(l.value=[s],t.k&&(h[t.k]=l.value))}else g?(h[l]=o,u(l)&&(_[l]=o)):v&&(l.value=o,t.k&&(h[t.k]=o))};o?(S.id=-1,jt(S,i)):S()}}}_n().requestIdleCallback;_n().cancelIdleCallback;const Ni=t=>!!t.type.__asyncLoader,Ko=t=>t.type.__isKeepAlive;function Al(t,e){Yo(t,"a",e)}function Rl(t,e){Yo(t,"da",e)}function Yo(t,e,i=Nt){const r=t.__wdc||(t.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(bn(e,r,i),i){let n=i.parent;for(;n&&n.parent;)Ko(n.parent.vnode)&&El(r,e,i,n),n=n.parent}}function El(t,e,i,r){const n=bn(e,t,r,!0);wr(()=>{lr(r[e],n)},i)}function bn(t,e,i=Nt,r=!1){if(i){const n=i[t]||(i[t]=[]),s=e.__weh||(e.__weh=(...o)=>{de();const a=zi(i),l=ne(e,i,t,o);return a(),ue(),l});return r?n.unshift(s):n.push(s),s}}const fe=t=>(e,i=Nt)=>{(!Hi||t==="sp")&&bn(t,(...r)=>e(...r),i)},Fl=fe("bm"),Sr=fe("m"),Ml=fe("bu"),Cr=fe("u"),Xo=fe("bum"),wr=fe("um"),Ol=fe("sp"),kl=fe("rtg"),Nl=fe("rtc");function Gl(t,e=Nt){bn("ec",t,e)}const Ll="components";function Ae(t,e){return Il(Ll,t,!0,e)||t}const Dl=Symbol.for("v-ndc");function Il(t,e,i=!0,r=!1){const n=Wt||Nt;if(n){const s=n.type;{const a=Ah(s,!1);if(a&&(a===e||a===$t(e)||a===pn($t(e))))return s}const o=Dr(n[t]||s[t],e)||Dr(n.appContext[t],e);return!o&&r?s:o}}function Dr(t,e){return t&&(t[e]||t[$t(e)]||t[pn($t(e))])}function Mn(t,e,i,r){let n;const s=i,o=ht(t);if(o||Rt(t)){const a=o&&Ge(t);let l=!1,c=!1;a&&(l=!Xt(t),c=ye(t),t=yn(t)),n=new Array(t.length);for(let h=0,_=t.length;h<_;h++)n[h]=e(l?c?nn(kt(t[h])):kt(t[h]):t[h],h,void 0,s)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,s)}else if(bt(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];n[l]=e(t[h],h,l,s)}}else n=[];return n}const Zn=t=>t?_a(t)?wn(t):Zn(t.parent):null,Gi=Dt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zn(t.parent),$root:t=>Zn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Jo(t),$forceUpdate:t=>t.f||(t.f=()=>{vr(t.update)}),$nextTick:t=>t.n||(t.n=Bo.bind(t.proxy)),$watch:t=>oh.bind(t)}),On=(t,e)=>t!==yt&&!t.__isScriptSetup&&mt(t,e),Ul={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const u=o[e];if(u!==void 0)switch(u){case 1:return r[e];case 2:return n[e];case 4:return i[e];case 3:return s[e]}else{if(On(r,e))return o[e]=1,r[e];if(n!==yt&&mt(n,e))return o[e]=2,n[e];if((c=t.propsOptions[0])&&mt(c,e))return o[e]=3,s[e];if(i!==yt&&mt(i,e))return o[e]=4,i[e];tr&&(o[e]=0)}}const h=Gi[e];let _,y;if(h)return e==="$attrs"&&Gt(t.attrs,"get",""),h(t);if((_=a.__cssModules)&&(_=_[e]))return _;if(i!==yt&&mt(i,e))return o[e]=4,i[e];if(y=l.config.globalProperties,mt(y,e))return y[e]},set({_:t},e,i){const{data:r,setupState:n,ctx:s}=t;return On(n,e)?(n[e]=i,!0):r!==yt&&mt(r,e)?(r[e]=i,!0):mt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:r,appContext:n,propsOptions:s}},o){let a;return!!i[o]||t!==yt&&mt(t,o)||On(e,o)||(a=s[0])&&mt(a,o)||mt(r,o)||mt(Gi,o)||mt(n.config.globalProperties,o)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:mt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Ir(t){return ht(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let tr=!0;function Bl(t){const e=Jo(t),i=t.proxy,r=t.ctx;tr=!1,e.beforeCreate&&Ur(e.beforeCreate,t,"bc");const{data:n,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:_,mounted:y,beforeUpdate:u,updated:g,activated:v,deactivated:S,beforeDestroy:P,beforeUnmount:f,destroyed:d,unmounted:m,render:C,renderTracked:A,renderTriggered:G,errorCaptured:R,serverPrefetch:T,expose:x,inheritAttrs:M,components:L,directives:p,filters:w}=e;if(c&&Vl(c,r,null),o)for(const O in o){const D=o[O];ct(D)&&(r[O]=D.bind(i))}if(n){const O=n.call(i,i);bt(O)&&(t.data=Wi(O))}if(tr=!0,s)for(const O in s){const D=s[O],H=ct(D)?D.bind(i,i):ct(D.get)?D.get.bind(i,i):ee,U=!ct(D)&&ct(D.set)?D.set.bind(i):ee,z=Eh({get:H,set:U});Object.defineProperty(r,O,{enumerable:!0,configurable:!0,get:()=>z.value,set:et=>z.value=et})}if(a)for(const O in a)$o(a[O],r,i,O);if(l){const O=ct(l)?l.call(i):l;Reflect.ownKeys(O).forEach(D=>{Kl(D,O[D])})}h&&Ur(h,t,"c");function E(O,D){ht(D)?D.forEach(H=>O(H.bind(i))):D&&O(D.bind(i))}if(E(Fl,_),E(Sr,y),E(Ml,u),E(Cr,g),E(Al,v),E(Rl,S),E(Gl,R),E(Nl,A),E(kl,G),E(Xo,f),E(wr,m),E(Ol,T),ht(x))if(x.length){const O=t.exposed||(t.exposed={});x.forEach(D=>{Object.defineProperty(O,D,{get:()=>i[D],set:H=>i[D]=H})})}else t.exposed||(t.exposed={});C&&t.render===ee&&(t.render=C),M!=null&&(t.inheritAttrs=M),L&&(t.components=L),p&&(t.directives=p),T&&zo(t)}function Vl(t,e,i=ee){ht(t)&&(t=er(t));for(const r in t){const n=t[r];let s;bt(n)?"default"in n?s=Ji(n.from||r,n.default,!0):s=Ji(n.from||r):s=Ji(n),Lt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Ur(t,e,i){ne(ht(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,i)}function $o(t,e,i,r){let n=r.includes(".")?ca(i,r):()=>i[r];if(Rt(t)){const s=e[t];ct(s)&&Li(n,s)}else if(ct(t))Li(n,t.bind(i));else if(bt(t))if(ht(t))t.forEach(s=>$o(s,e,i,r));else{const s=ct(t.handler)?t.handler.bind(i):e[t.handler];ct(s)&&Li(n,s,t)}}function Jo(t){const e=t.type,{mixins:i,extends:r}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!n.length&&!i&&!r?l=e:(l={},n.length&&n.forEach(c=>an(l,c,o,!0)),an(l,e,o)),bt(e)&&s.set(e,l),l}function an(t,e,i,r=!1){const{mixins:n,extends:s}=e;s&&an(t,s,i,!0),n&&n.forEach(o=>an(t,o,i,!0));for(const o in e)if(!(r&&o==="expose")){const a=Hl[o]||i&&i[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Hl={data:Br,props:Vr,emits:Vr,methods:Ei,computed:Ei,beforeCreate:It,created:It,beforeMount:It,mounted:It,beforeUpdate:It,updated:It,beforeDestroy:It,beforeUnmount:It,destroyed:It,unmounted:It,activated:It,deactivated:It,errorCaptured:It,serverPrefetch:It,components:Ei,directives:Ei,watch:Wl,provide:Br,inject:ql};function Br(t,e){return e?t?function(){return Dt(ct(t)?t.call(this,this):t,ct(e)?e.call(this,this):e)}:e:t}function ql(t,e){return Ei(er(t),er(e))}function er(t){if(ht(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function It(t,e){return t?[...new Set([].concat(t,e))]:e}function Ei(t,e){return t?Dt(Object.create(null),t,e):e}function Vr(t,e){return t?ht(t)&&ht(e)?[...new Set([...t,...e])]:Dt(Object.create(null),Ir(t),Ir(e??{})):e}function Wl(t,e){if(!t)return e;if(!e)return t;const i=Dt(Object.create(null),t);for(const r in e)i[r]=It(t[r],e[r]);return i}function Qo(){return{app:null,config:{isNativeTag:Ma,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jl=0;function zl(t,e){return function(r,n=null){ct(r)||(r=Dt({},r)),n!=null&&!bt(n)&&(n=null);const s=Qo(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:jl++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Fh,get config(){return s.config},set config(h){},use(h,..._){return o.has(h)||(h&&ct(h.install)?(o.add(h),h.install(c,..._)):ct(h)&&(o.add(h),h(c,..._))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,_){return _?(s.components[h]=_,c):s.components[h]},directive(h,_){return _?(s.directives[h]=_,c):s.directives[h]},mount(h,_,y){if(!l){const u=c._ceVNode||At(r,n);return u.appContext=s,y===!0?y="svg":y===!1&&(y=void 0),t(u,h,y),l=!0,c._container=h,h.__vue_app__=c,wn(u.component)}},onUnmount(h){a.push(h)},unmount(){l&&(ne(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,_){return s.provides[h]=_,c},runWithContext(h){const _=De;De=c;try{return h()}finally{De=_}}};return c}}let De=null;function Kl(t,e){if(Nt){let i=Nt.provides;const r=Nt.parent&&Nt.parent.provides;r===i&&(i=Nt.provides=Object.create(r)),i[t]=e}}function Ji(t,e,i=!1){const r=Nt||Wt;if(r||De){let n=De?De._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return i&&ct(e)?e.call(r&&r.proxy):e}}const Zo={},ta=()=>Object.create(Zo),ea=t=>Object.getPrototypeOf(t)===Zo;function Yl(t,e,i,r=!1){const n={},s=ta();t.propsDefaults=Object.create(null),ia(t,e,n,s);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);i?t.props=r?n:cl(n):t.type.props?t.props=n:t.props=s,t.attrs=s}function Xl(t,e,i,r){const{props:n,attrs:s,vnode:{patchFlag:o}}=t,a=_t(n),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let _=0;_<h.length;_++){let y=h[_];if(Sn(t.emitsOptions,y))continue;const u=e[y];if(l)if(mt(s,y))u!==s[y]&&(s[y]=u,c=!0);else{const g=$t(y);n[g]=ir(l,a,g,u,t,!1)}else u!==s[y]&&(s[y]=u,c=!0)}}}else{ia(t,e,n,s)&&(c=!0);let h;for(const _ in a)(!e||!mt(e,_)&&((h=Pe(_))===_||!mt(e,h)))&&(l?i&&(i[_]!==void 0||i[h]!==void 0)&&(n[_]=ir(l,a,_,void 0,t,!0)):delete n[_]);if(s!==a)for(const _ in s)(!e||!mt(e,_))&&(delete s[_],c=!0)}c&&he(t.attrs,"set","")}function ia(t,e,i,r){const[n,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Fi(l))continue;const c=e[l];let h;n&&mt(n,h=$t(l))?!s||!s.includes(h)?i[h]=c:(a||(a={}))[h]=c:Sn(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=_t(i),c=a||yt;for(let h=0;h<s.length;h++){const _=s[h];i[_]=ir(n,l,_,c[_],t,!mt(c,_))}}return o}function ir(t,e,i,r,n,s){const o=t[i];if(o!=null){const a=mt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ct(l)){const{propsDefaults:c}=n;if(i in c)r=c[i];else{const h=zi(n);r=c[i]=l.call(null,e),h()}}else r=l;n.ce&&n.ce._setProp(i,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Pe(i))&&(r=!0))}return r}const $l=new WeakMap;function na(t,e,i=!1){const r=i?$l:e.propsCache,n=r.get(t);if(n)return n;const s=t.props,o={},a=[];let l=!1;if(!ct(t)){const h=_=>{l=!0;const[y,u]=na(_,e,!0);Dt(o,y),u&&a.push(...u)};!i&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!l)return bt(t)&&r.set(t,ke),ke;if(ht(s))for(let h=0;h<s.length;h++){const _=$t(s[h]);Hr(_)&&(o[_]=yt)}else if(s)for(const h in s){const _=$t(h);if(Hr(_)){const y=s[h],u=o[_]=ht(y)||ct(y)?{type:y}:Dt({},y),g=u.type;let v=!1,S=!0;if(ht(g))for(let P=0;P<g.length;++P){const f=g[P],d=ct(f)&&f.name;if(d==="Boolean"){v=!0;break}else d==="String"&&(S=!1)}else v=ct(g)&&g.name==="Boolean";u[0]=v,u[1]=S,(v||mt(u,"default"))&&a.push(_)}}const c=[o,a];return bt(t)&&r.set(t,c),c}function Hr(t){return t[0]!=="$"&&!Fi(t)}const xr=t=>t[0]==="_"||t==="$stable",Pr=t=>ht(t)?t.map(te):[te(t)],Jl=(t,e,i)=>{if(e._n)return e;const r=Fe((...n)=>Pr(e(...n)),i);return r._c=!1,r},ra=(t,e,i)=>{const r=t._ctx;for(const n in t){if(xr(n))continue;const s=t[n];if(ct(s))e[n]=Jl(n,s,r);else if(s!=null){const o=Pr(s);e[n]=()=>o}}},sa=(t,e)=>{const i=Pr(e);t.slots.default=()=>i},oa=(t,e,i)=>{for(const r in e)(i||!xr(r))&&(t[r]=e[r])},Ql=(t,e,i)=>{const r=t.slots=ta();if(t.vnode.shapeFlag&32){const n=e.__;n&&Yn(r,"__",n,!0);const s=e._;s?(oa(r,e,i),i&&Yn(r,"_",s,!0)):ra(e,r)}else e&&sa(t,e)},Zl=(t,e,i)=>{const{vnode:r,slots:n}=t;let s=!0,o=yt;if(r.shapeFlag&32){const a=e._;a?i&&a===1?s=!1:oa(n,e,i):(s=!e.$stable,ra(e,n)),o=e}else e&&(sa(t,e),o={default:1});if(s)for(const a in n)!xr(a)&&o[a]==null&&delete n[a]},jt=fh;function th(t){return eh(t)}function eh(t,e){const i=_n();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:_,nextSibling:y,setScopeId:u=ee,insertStaticContent:g}=t,v=(F,k,I,V=null,j=null,W=null,Y=void 0,Z=null,$=!!k.dynamicChildren)=>{if(F===k)return;F&&!Ve(F,k)&&(V=N(F),et(F,j,W,!0),F=null),k.patchFlag===-2&&($=!1,k.dynamicChildren=null);const{type:K,ref:it,shapeFlag:tt}=k;switch(K){case Cn:S(F,k,I,V);break;case ve:P(F,k,I,V);break;case Nn:F==null&&f(k,I,V,Y);break;case Yt:L(F,k,I,V,j,W,Y,Z,$);break;default:tt&1?C(F,k,I,V,j,W,Y,Z,$):tt&6?p(F,k,I,V,j,W,Y,Z,$):(tt&64||tt&128)&&K.process(F,k,I,V,j,W,Y,Z,$,Q)}it!=null&&j?ki(it,F&&F.ref,W,k||F,!k):it==null&&F&&F.ref!=null&&ki(F.ref,null,W,F,!0)},S=(F,k,I,V)=>{if(F==null)r(k.el=a(k.children),I,V);else{const j=k.el=F.el;k.children!==F.children&&c(j,k.children)}},P=(F,k,I,V)=>{F==null?r(k.el=l(k.children||""),I,V):k.el=F.el},f=(F,k,I,V)=>{[F.el,F.anchor]=g(F.children,k,I,V,F.el,F.anchor)},d=({el:F,anchor:k},I,V)=>{let j;for(;F&&F!==k;)j=y(F),r(F,I,V),F=j;r(k,I,V)},m=({el:F,anchor:k})=>{let I;for(;F&&F!==k;)I=y(F),n(F),F=I;n(k)},C=(F,k,I,V,j,W,Y,Z,$)=>{k.type==="svg"?Y="svg":k.type==="math"&&(Y="mathml"),F==null?A(k,I,V,j,W,Y,Z,$):T(F,k,j,W,Y,Z,$)},A=(F,k,I,V,j,W,Y,Z)=>{let $,K;const{props:it,shapeFlag:tt,transition:ot,dirs:at}=F;if($=F.el=o(F.type,W,it&&it.is,it),tt&8?h($,F.children):tt&16&&R(F.children,$,null,V,j,kn(F,W),Y,Z),at&&be(F,null,V,"created"),G($,F,F.scopeId,Y,V),it){for(const pt in it)pt!=="value"&&!Fi(pt)&&s($,pt,null,it[pt],W,V);"value"in it&&s($,"value",null,it.value,W),(K=it.onVnodeBeforeMount)&&Qt(K,V,F)}at&&be(F,null,V,"beforeMount");const lt=ih(j,ot);lt&&ot.beforeEnter($),r($,k,I),((K=it&&it.onVnodeMounted)||lt||at)&&jt(()=>{K&&Qt(K,V,F),lt&&ot.enter($),at&&be(F,null,V,"mounted")},j)},G=(F,k,I,V,j)=>{if(I&&u(F,I),V)for(let W=0;W<V.length;W++)u(F,V[W]);if(j){let W=j.subTree;if(k===W||ua(W.type)&&(W.ssContent===k||W.ssFallback===k)){const Y=j.vnode;G(F,Y,Y.scopeId,Y.slotScopeIds,j.parent)}}},R=(F,k,I,V,j,W,Y,Z,$=0)=>{for(let K=$;K<F.length;K++){const it=F[K]=Z?_e(F[K]):te(F[K]);v(null,it,k,I,V,j,W,Y,Z)}},T=(F,k,I,V,j,W,Y)=>{const Z=k.el=F.el;let{patchFlag:$,dynamicChildren:K,dirs:it}=k;$|=F.patchFlag&16;const tt=F.props||yt,ot=k.props||yt;let at;if(I&&Se(I,!1),(at=ot.onVnodeBeforeUpdate)&&Qt(at,I,k,F),it&&be(k,F,I,"beforeUpdate"),I&&Se(I,!0),(tt.innerHTML&&ot.innerHTML==null||tt.textContent&&ot.textContent==null)&&h(Z,""),K?x(F.dynamicChildren,K,Z,I,V,kn(k,j),W):Y||D(F,k,Z,null,I,V,kn(k,j),W,!1),$>0){if($&16)M(Z,tt,ot,I,j);else if($&2&&tt.class!==ot.class&&s(Z,"class",null,ot.class,j),$&4&&s(Z,"style",tt.style,ot.style,j),$&8){const lt=k.dynamicProps;for(let pt=0;pt<lt.length;pt++){const dt=lt[pt],wt=tt[dt],Ct=ot[dt];(Ct!==wt||dt==="value")&&s(Z,dt,wt,Ct,j,I)}}$&1&&F.children!==k.children&&h(Z,k.children)}else!Y&&K==null&&M(Z,tt,ot,I,j);((at=ot.onVnodeUpdated)||it)&&jt(()=>{at&&Qt(at,I,k,F),it&&be(k,F,I,"updated")},V)},x=(F,k,I,V,j,W,Y)=>{for(let Z=0;Z<k.length;Z++){const $=F[Z],K=k[Z],it=$.el&&($.type===Yt||!Ve($,K)||$.shapeFlag&198)?_($.el):I;v($,K,it,null,V,j,W,Y,!0)}},M=(F,k,I,V,j)=>{if(k!==I){if(k!==yt)for(const W in k)!Fi(W)&&!(W in I)&&s(F,W,k[W],null,j,V);for(const W in I){if(Fi(W))continue;const Y=I[W],Z=k[W];Y!==Z&&W!=="value"&&s(F,W,Z,Y,j,V)}"value"in I&&s(F,"value",k.value,I.value,j)}},L=(F,k,I,V,j,W,Y,Z,$)=>{const K=k.el=F?F.el:a(""),it=k.anchor=F?F.anchor:a("");let{patchFlag:tt,dynamicChildren:ot,slotScopeIds:at}=k;at&&(Z=Z?Z.concat(at):at),F==null?(r(K,I,V),r(it,I,V),R(k.children||[],I,it,j,W,Y,Z,$)):tt>0&&tt&64&&ot&&F.dynamicChildren?(x(F.dynamicChildren,ot,I,j,W,Y,Z),(k.key!=null||j&&k===j.subTree)&&aa(F,k,!0)):D(F,k,I,it,j,W,Y,Z,$)},p=(F,k,I,V,j,W,Y,Z,$)=>{k.slotScopeIds=Z,F==null?k.shapeFlag&512?j.ctx.activate(k,I,V,Y,$):w(k,I,V,j,W,Y,$):b(F,k,$)},w=(F,k,I,V,j,W,Y)=>{const Z=F.component=Ch(F,V,j);if(Ko(F)&&(Z.ctx.renderer=Q),wh(Z,!1,Y),Z.asyncDep){if(j&&j.registerDep(Z,E,Y),!F.el){const $=Z.subTree=At(ve);P(null,$,k,I)}}else E(Z,F,k,I,j,W,Y)},b=(F,k,I)=>{const V=k.component=F.component;if(dh(F,k,I))if(V.asyncDep&&!V.asyncResolved){O(V,k,I);return}else V.next=k,V.update();else k.el=F.el,V.vnode=k},E=(F,k,I,V,j,W,Y)=>{const Z=()=>{if(F.isMounted){let{next:tt,bu:ot,u:at,parent:lt,vnode:pt}=F;{const xt=la(F);if(xt){tt&&(tt.el=pt.el,O(F,tt,Y)),xt.asyncDep.then(()=>{F.isUnmounted||Z()});return}}let dt=tt,wt;Se(F,!1),tt?(tt.el=pt.el,O(F,tt,Y)):tt=pt,ot&&$i(ot),(wt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Qt(wt,lt,tt,pt),Se(F,!0);const Ct=Wr(F),Et=F.subTree;F.subTree=Ct,v(Et,Ct,_(Et.el),N(Et),F,j,W),tt.el=Ct.el,dt===null&&uh(F,Ct.el),at&&jt(at,j),(wt=tt.props&&tt.props.onVnodeUpdated)&&jt(()=>Qt(wt,lt,tt,pt),j)}else{let tt;const{el:ot,props:at}=k,{bm:lt,m:pt,parent:dt,root:wt,type:Ct}=F,Et=Ni(k);Se(F,!1),lt&&$i(lt),!Et&&(tt=at&&at.onVnodeBeforeMount)&&Qt(tt,dt,k),Se(F,!0);{wt.ce&&wt.ce._def.shadowRoot!==!1&&wt.ce._injectChildStyle(Ct);const xt=F.subTree=Wr(F);v(null,xt,I,V,F,j,W),k.el=xt.el}if(pt&&jt(pt,j),!Et&&(tt=at&&at.onVnodeMounted)){const xt=k;jt(()=>Qt(tt,dt,xt),j)}(k.shapeFlag&256||dt&&Ni(dt.vnode)&&dt.vnode.shapeFlag&256)&&F.a&&jt(F.a,j),F.isMounted=!0,k=I=V=null}};F.scope.on();const $=F.effect=new wo(Z);F.scope.off();const K=F.update=$.run.bind($),it=F.job=$.runIfDirty.bind($);it.i=F,it.id=F.uid,$.scheduler=()=>vr(it),Se(F,!0),K()},O=(F,k,I)=>{k.component=F;const V=F.vnode.props;F.vnode=k,F.next=null,Xl(F,k.props,V,I),Zl(F,k.children,I),de(),Lr(F),ue()},D=(F,k,I,V,j,W,Y,Z,$=!1)=>{const K=F&&F.children,it=F?F.shapeFlag:0,tt=k.children,{patchFlag:ot,shapeFlag:at}=k;if(ot>0){if(ot&128){U(K,tt,I,V,j,W,Y,Z,$);return}else if(ot&256){H(K,tt,I,V,j,W,Y,Z,$);return}}at&8?(it&16&&rt(K,j,W),tt!==K&&h(I,tt)):it&16?at&16?U(K,tt,I,V,j,W,Y,Z,$):rt(K,j,W,!0):(it&8&&h(I,""),at&16&&R(tt,I,V,j,W,Y,Z,$))},H=(F,k,I,V,j,W,Y,Z,$)=>{F=F||ke,k=k||ke;const K=F.length,it=k.length,tt=Math.min(K,it);let ot;for(ot=0;ot<tt;ot++){const at=k[ot]=$?_e(k[ot]):te(k[ot]);v(F[ot],at,I,null,j,W,Y,Z,$)}K>it?rt(F,j,W,!0,!1,tt):R(k,I,V,j,W,Y,Z,$,tt)},U=(F,k,I,V,j,W,Y,Z,$)=>{let K=0;const it=k.length;let tt=F.length-1,ot=it-1;for(;K<=tt&&K<=ot;){const at=F[K],lt=k[K]=$?_e(k[K]):te(k[K]);if(Ve(at,lt))v(at,lt,I,null,j,W,Y,Z,$);else break;K++}for(;K<=tt&&K<=ot;){const at=F[tt],lt=k[ot]=$?_e(k[ot]):te(k[ot]);if(Ve(at,lt))v(at,lt,I,null,j,W,Y,Z,$);else break;tt--,ot--}if(K>tt){if(K<=ot){const at=ot+1,lt=at<it?k[at].el:V;for(;K<=ot;)v(null,k[K]=$?_e(k[K]):te(k[K]),I,lt,j,W,Y,Z,$),K++}}else if(K>ot)for(;K<=tt;)et(F[K],j,W,!0),K++;else{const at=K,lt=K,pt=new Map;for(K=lt;K<=ot;K++){const Ot=k[K]=$?_e(k[K]):te(k[K]);Ot.key!=null&&pt.set(Ot.key,K)}let dt,wt=0;const Ct=ot-lt+1;let Et=!1,xt=0;const Mt=new Array(Ct);for(K=0;K<Ct;K++)Mt[K]=0;for(K=at;K<=tt;K++){const Ot=F[K];if(wt>=Ct){et(Ot,j,W,!0);continue}let Kt;if(Ot.key!=null)Kt=pt.get(Ot.key);else for(dt=lt;dt<=ot;dt++)if(Mt[dt-lt]===0&&Ve(Ot,k[dt])){Kt=dt;break}Kt===void 0?et(Ot,j,W,!0):(Mt[Kt-lt]=K+1,Kt>=xt?xt=Kt:Et=!0,v(Ot,k[Kt],I,null,j,W,Y,Z,$),wt++)}const Bt=Et?nh(Mt):ke;for(dt=Bt.length-1,K=Ct-1;K>=0;K--){const Ot=lt+K,Kt=k[Ot],Mr=Ot+1<it?k[Ot+1].el:V;Mt[K]===0?v(null,Kt,I,Mr,j,W,Y,Z,$):Et&&(dt<0||K!==Bt[dt]?z(Kt,I,Mr,2):dt--)}}},z=(F,k,I,V,j=null)=>{const{el:W,type:Y,transition:Z,children:$,shapeFlag:K}=F;if(K&6){z(F.component.subTree,k,I,V);return}if(K&128){F.suspense.move(k,I,V);return}if(K&64){Y.move(F,k,I,Q);return}if(Y===Yt){r(W,k,I);for(let tt=0;tt<$.length;tt++)z($[tt],k,I,V);r(F.anchor,k,I);return}if(Y===Nn){d(F,k,I);return}if(V!==2&&K&1&&Z)if(V===0)Z.beforeEnter(W),r(W,k,I),jt(()=>Z.enter(W),j);else{const{leave:tt,delayLeave:ot,afterLeave:at}=Z,lt=()=>{F.ctx.isUnmounted?n(W):r(W,k,I)},pt=()=>{tt(W,()=>{lt(),at&&at()})};ot?ot(W,lt,pt):pt()}else r(W,k,I)},et=(F,k,I,V=!1,j=!1)=>{const{type:W,props:Y,ref:Z,children:$,dynamicChildren:K,shapeFlag:it,patchFlag:tt,dirs:ot,cacheIndex:at}=F;if(tt===-2&&(j=!1),Z!=null&&(de(),ki(Z,null,I,F,!0),ue()),at!=null&&(k.renderCache[at]=void 0),it&256){k.ctx.deactivate(F);return}const lt=it&1&&ot,pt=!Ni(F);let dt;if(pt&&(dt=Y&&Y.onVnodeBeforeUnmount)&&Qt(dt,k,F),it&6)nt(F.component,I,V);else{if(it&128){F.suspense.unmount(I,V);return}lt&&be(F,null,k,"beforeUnmount"),it&64?F.type.remove(F,k,I,Q,V):K&&!K.hasOnce&&(W!==Yt||tt>0&&tt&64)?rt(K,k,I,!1,!0):(W===Yt&&tt&384||!j&&it&16)&&rt($,k,I),V&&q(F)}(pt&&(dt=Y&&Y.onVnodeUnmounted)||lt)&&jt(()=>{dt&&Qt(dt,k,F),lt&&be(F,null,k,"unmounted")},I)},q=F=>{const{type:k,el:I,anchor:V,transition:j}=F;if(k===Yt){J(I,V);return}if(k===Nn){m(F);return}const W=()=>{n(I),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(F.shapeFlag&1&&j&&!j.persisted){const{leave:Y,delayLeave:Z}=j,$=()=>Y(I,W);Z?Z(F.el,W,$):$()}else W()},J=(F,k)=>{let I;for(;F!==k;)I=y(F),n(F),F=I;n(k)},nt=(F,k,I)=>{const{bum:V,scope:j,job:W,subTree:Y,um:Z,m:$,a:K,parent:it,slots:{__:tt}}=F;qr($),qr(K),V&&$i(V),it&&ht(tt)&&tt.forEach(ot=>{it.renderCache[ot]=void 0}),j.stop(),W&&(W.flags|=8,et(Y,F,k,I)),Z&&jt(Z,k),jt(()=>{F.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},rt=(F,k,I,V=!1,j=!1,W=0)=>{for(let Y=W;Y<F.length;Y++)et(F[Y],k,I,V,j)},N=F=>{if(F.shapeFlag&6)return N(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const k=y(F.anchor||F.el),I=k&&k[Pl];return I?y(I):k};let B=!1;const X=(F,k,I)=>{F==null?k._vnode&&et(k._vnode,null,null,!0):v(k._vnode||null,F,k,null,null,null,I),k._vnode=F,B||(B=!0,Lr(),Ho(),B=!1)},Q={p:v,um:et,m:z,r:q,mt:w,mc:R,pc:D,pbc:x,n:N,o:t};return{render:X,hydrate:void 0,createApp:zl(X)}}function kn({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Se({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ih(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function aa(t,e,i=!1){const r=t.children,n=e.children;if(ht(r)&&ht(n))for(let s=0;s<r.length;s++){const o=r[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=_e(n[s]),a.el=o.el),!i&&a.patchFlag!==-2&&aa(o,a)),a.type===Cn&&(a.el=o.el),a.type===ve&&!a.el&&(a.el=o.el)}}function nh(t){const e=t.slice(),i=[0];let r,n,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(n=i[i.length-1],t[n]<c){e[r]=n,i.push(r);continue}for(s=0,o=i.length-1;s<o;)a=s+o>>1,t[i[a]]<c?s=a+1:o=a;c<t[i[s]]&&(s>0&&(e[r]=i[s-1]),i[s]=r)}}for(s=i.length,o=i[s-1];s-- >0;)i[s]=o,o=e[o];return i}function la(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:la(e)}function qr(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rh=Symbol.for("v-scx"),sh=()=>Ji(rh);function Li(t,e,i){return ha(t,e,i)}function ha(t,e,i=yt){const{immediate:r,deep:n,flush:s,once:o}=i,a=Dt({},i),l=e&&r||!e&&s!=="post";let c;if(Hi){if(s==="sync"){const u=sh();c=u.__watcherHandles||(u.__watcherHandles=[])}else if(!l){const u=()=>{};return u.stop=ee,u.resume=ee,u.pause=ee,u}}const h=Nt;a.call=(u,g,v)=>ne(u,h,g,v);let _=!1;s==="post"?a.scheduler=u=>{jt(u,h&&h.suspense)}:s!=="sync"&&(_=!0,a.scheduler=(u,g)=>{g?u():vr(u)}),a.augmentJob=u=>{e&&(u.flags|=4),_&&(u.flags|=2,h&&(u.id=h.uid,u.i=h))};const y=bl(t,e,a);return Hi&&(c?c.push(y):l&&y()),y}function oh(t,e,i){const r=this.proxy,n=Rt(t)?t.includes(".")?ca(r,t):()=>r[t]:t.bind(r,r);let s;ct(e)?s=e:(s=e.handler,i=e);const o=zi(this),a=ha(n,s.bind(r),i);return o(),a}function ca(t,e){const i=e.split(".");return()=>{let r=t;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const ah=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${$t(e)}Modifiers`]||t[`${Pe(e)}Modifiers`];function lh(t,e,...i){if(t.isUnmounted)return;const r=t.vnode.props||yt;let n=i;const s=e.startsWith("update:"),o=s&&ah(r,e.slice(7));o&&(o.trim&&(n=i.map(h=>Rt(h)?h.trim():h)),o.number&&(n=i.map(yo)));let a,l=r[a=Tn(e)]||r[a=Tn($t(e))];!l&&s&&(l=r[a=Tn(Pe(e))]),l&&ne(l,t,6,n);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ne(c,t,6,n)}}function da(t,e,i=!1){const r=e.emitsCache,n=r.get(t);if(n!==void 0)return n;const s=t.emits;let o={},a=!1;if(!ct(t)){const l=c=>{const h=da(c,e,!0);h&&(a=!0,Dt(o,h))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(bt(t)&&r.set(t,null),null):(ht(s)?s.forEach(l=>o[l]=null):Dt(o,s),bt(t)&&r.set(t,o),o)}function Sn(t,e){return!t||!un(e)?!1:(e=e.slice(2).replace(/Once$/,""),mt(t,e[0].toLowerCase()+e.slice(1))||mt(t,Pe(e))||mt(t,e))}function Wr(t){const{type:e,vnode:i,proxy:r,withProxy:n,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:_,data:y,setupState:u,ctx:g,inheritAttrs:v}=t,S=on(t);let P,f;try{if(i.shapeFlag&4){const m=n||r,C=m;P=te(c.call(C,m,h,_,u,y,g)),f=a}else{const m=e;P=te(m.length>1?m(_,{attrs:a,slots:o,emit:l}):m(_,null)),f=e.props?a:hh(a)}}catch(m){Di.length=0,vn(m,t,1),P=At(ve)}let d=P;if(f&&v!==!1){const m=Object.keys(f),{shapeFlag:C}=d;m.length&&C&7&&(s&&m.some(ar)&&(f=ch(f,s)),d=Ie(d,f,!1,!0))}return i.dirs&&(d=Ie(d,null,!1,!0),d.dirs=d.dirs?d.dirs.concat(i.dirs):i.dirs),i.transition&&br(d,i.transition),P=d,on(S),P}const hh=t=>{let e;for(const i in t)(i==="class"||i==="style"||un(i))&&((e||(e={}))[i]=t[i]);return e},ch=(t,e)=>{const i={};for(const r in t)(!ar(r)||!(r.slice(9)in e))&&(i[r]=t[r]);return i};function dh(t,e,i){const{props:r,children:n,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?jr(r,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let _=0;_<h.length;_++){const y=h[_];if(o[y]!==r[y]&&!Sn(c,y))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?jr(r,o,c):!0:!!o;return!1}function jr(t,e,i){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(e[s]!==t[s]&&!Sn(i,s))return!0}return!1}function uh({vnode:t,parent:e},i){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=i,e=e.parent;else break}}const ua=t=>t.__isSuspense;function fh(t,e){e&&e.pendingBranch?ht(t)?e.effects.push(...t):e.effects.push(t):wl(t)}const Yt=Symbol.for("v-fgt"),Cn=Symbol.for("v-txt"),ve=Symbol.for("v-cmt"),Nn=Symbol.for("v-stc"),Di=[];let zt=null;function ae(t=!1){Di.push(zt=t?null:[])}function gh(){Di.pop(),zt=Di[Di.length-1]||null}let Vi=1;function zr(t,e=!1){Vi+=t,t<0&&zt&&e&&(zt.hasOnce=!0)}function fa(t){return t.dynamicChildren=Vi>0?zt||ke:null,gh(),Vi>0&&zt&&zt.push(t),t}function Be(t,e,i,r,n,s){return fa(Oe(t,e,i,r,n,s,!0))}function Qi(t,e,i,r,n){return fa(At(t,e,i,r,n,!0))}function ln(t){return t?t.__v_isVNode===!0:!1}function Ve(t,e){return t.type===e.type&&t.key===e.key}const ga=({key:t})=>t??null,Zi=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Rt(t)||Lt(t)||ct(t)?{i:Wt,r:t,k:e,f:!!i}:t:null);function Oe(t,e=null,i=null,r=0,n=null,s=t===Yt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ga(e),ref:e&&Zi(e),scopeId:Wo,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Wt};return a?(Tr(l,i),s&128&&t.normalize(l)):i&&(l.shapeFlag|=Rt(i)?8:16),Vi>0&&!o&&zt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&zt.push(l),l}const At=ph;function ph(t,e=null,i=null,r=0,n=null,s=!1){if((!t||t===Dl)&&(t=ve),ln(t)){const a=Ie(t,e,!0);return i&&Tr(a,i),Vi>0&&!s&&zt&&(a.shapeFlag&6?zt[zt.indexOf(t)]=a:zt.push(a)),a.patchFlag=-2,a}if(Rh(t)&&(t=t.__vccOpts),e){e=_h(e);let{class:a,style:l}=e;a&&!Rt(a)&&(e.class=dr(a)),bt(l)&&(yr(l)&&!ht(l)&&(l=Dt({},l)),e.style=cr(l))}const o=Rt(t)?1:ua(t)?128:Tl(t)?64:bt(t)?4:ct(t)?2:0;return Oe(t,e,i,r,n,o,s,!0)}function _h(t){return t?yr(t)||ea(t)?Dt({},t):t:null}function Ie(t,e,i=!1,r=!1){const{props:n,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?vh(n||{},e):n,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ga(c),ref:e&&e.ref?i&&s?ht(s)?s.concat(Zi(e)):[s,Zi(e)]:Zi(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Yt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ie(t.ssContent),ssFallback:t.ssFallback&&Ie(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&br(h,l.clone(h)),h}function mh(t=" ",e=0){return At(Cn,null,t,e)}function yh(t="",e=!1){return e?(ae(),Qi(ve,null,t)):At(ve,null,t)}function te(t){return t==null||typeof t=="boolean"?At(ve):ht(t)?At(Yt,null,t.slice()):ln(t)?_e(t):At(Cn,null,String(t))}function _e(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ie(t)}function Tr(t,e){let i=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ht(e))i=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Tr(t,n()),n._c&&(n._d=!0));return}else{i=32;const n=e._;!n&&!ea(e)?e._ctx=Wt:n===3&&Wt&&(Wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ct(e)?(e={default:e,_ctx:Wt},i=32):(e=String(e),r&64?(i=16,e=[mh(e)]):i=8);t.children=e,t.shapeFlag|=i}function vh(...t){const e={};for(let i=0;i<t.length;i++){const r=t[i];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=dr([e.class,r.class]));else if(n==="style")e.style=cr([e.style,r.style]);else if(un(n)){const s=e[n],o=r[n];o&&s!==o&&!(ht(s)&&s.includes(o))&&(e[n]=s?[].concat(s,o):o)}else n!==""&&(e[n]=r[n])}return e}function Qt(t,e,i,r=null){ne(t,e,7,[i,r])}const bh=Qo();let Sh=0;function Ch(t,e,i){const r=t.type,n=(e?e.appContext:t.appContext)||bh,s={uid:Sh++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Wa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:na(r,n),emitsOptions:da(r,n),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=lh.bind(null,s),t.ce&&t.ce(s),s}let Nt=null;const pa=()=>Nt||Wt;let hn,nr;{const t=_n(),e=(i,r)=>{let n;return(n=t[i])||(n=t[i]=[]),n.push(r),s=>{n.length>1?n.forEach(o=>o(s)):n[0](s)}};hn=e("__VUE_INSTANCE_SETTERS__",i=>Nt=i),nr=e("__VUE_SSR_SETTERS__",i=>Hi=i)}const zi=t=>{const e=Nt;return hn(t),t.scope.on(),()=>{t.scope.off(),hn(e)}},Kr=()=>{Nt&&Nt.scope.off(),hn(null)};function _a(t){return t.vnode.shapeFlag&4}let Hi=!1;function wh(t,e=!1,i=!1){e&&nr(e);const{props:r,children:n}=t.vnode,s=_a(t);Yl(t,r,s,e),Ql(t,n,i||e);const o=s?xh(t,e):void 0;return e&&nr(!1),o}function xh(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ul);const{setup:r}=i;if(r){de();const n=t.setupContext=r.length>1?Th(t):null,s=zi(t),o=ji(r,t,0,[t.props,n]),a=po(o);if(ue(),s(),(a||t.sp)&&!Ni(t)&&zo(t),a){if(o.then(Kr,Kr),e)return o.then(l=>{Yr(t,l)}).catch(l=>{vn(l,t,0)});t.asyncDep=o}else Yr(t,o)}else ma(t)}function Yr(t,e,i){ct(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:bt(e)&&(t.setupState=Io(e)),ma(t)}function ma(t,e,i){const r=t.type;t.render||(t.render=r.render||ee);{const n=zi(t);de();try{Bl(t)}finally{ue(),n()}}}const Ph={get(t,e){return Gt(t,"get",""),t[e]}};function Th(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,Ph),slots:t.slots,emit:t.emit,expose:e}}function wn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Io(dl(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Gi)return Gi[i](t)},has(e,i){return i in e||i in Gi}})):t.proxy}function Ah(t,e=!0){return ct(t)?t.displayName||t.name:t.name||e&&t.__name}function Rh(t){return ct(t)&&"__vccOpts"in t}const Eh=(t,e)=>yl(t,e,Hi);function ya(t,e,i){const r=arguments.length;return r===2?bt(e)&&!ht(e)?ln(e)?At(t,null,[e]):At(t,e):At(t,null,e):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&ln(i)&&(i=[i]),At(t,e,i))}const Fh="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rr;const Xr=typeof window<"u"&&window.trustedTypes;if(Xr)try{rr=Xr.createPolicy("vue",{createHTML:t=>t})}catch{}const va=rr?t=>rr.createHTML(t):t=>t,Mh="http://www.w3.org/2000/svg",Oh="http://www.w3.org/1998/Math/MathML",le=typeof document<"u"?document:null,$r=le&&le.createElement("template"),kh={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,r)=>{const n=e==="svg"?le.createElementNS(Mh,t):e==="mathml"?le.createElementNS(Oh,t):i?le.createElement(t,{is:i}):le.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>le.createTextNode(t),createComment:t=>le.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>le.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,r,n,s){const o=i?i.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{$r.innerHTML=va(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=$r.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},Nh=Symbol("_vtc");function Gh(t,e,i){const r=t[Nh];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const Jr=Symbol("_vod"),Lh=Symbol("_vsh"),Dh=Symbol(""),Ih=/(^|;)\s*display\s*:/;function Uh(t,e,i){const r=t.style,n=Rt(i);let s=!1;if(i&&!n){if(e)if(Rt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&tn(r,a,"")}else for(const o in e)i[o]==null&&tn(r,o,"");for(const o in i)o==="display"&&(s=!0),tn(r,o,i[o])}else if(n){if(e!==i){const o=r[Dh];o&&(i+=";"+o),r.cssText=i,s=Ih.test(i)}}else e&&t.removeAttribute("style");Jr in t&&(t[Jr]=s?r.display:"",t[Lh]&&(r.display="none"))}const Qr=/\s*!important$/;function tn(t,e,i){if(ht(i))i.forEach(r=>tn(t,e,r));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const r=Bh(t,e);Qr.test(i)?t.setProperty(Pe(r),i.replace(Qr,""),"important"):t[r]=i}}const Zr=["Webkit","Moz","ms"],Gn={};function Bh(t,e){const i=Gn[e];if(i)return i;let r=$t(e);if(r!=="filter"&&r in t)return Gn[e]=r;r=pn(r);for(let n=0;n<Zr.length;n++){const s=Zr[n]+r;if(s in t)return Gn[e]=s}return e}const ts="http://www.w3.org/1999/xlink";function es(t,e,i,r,n,s=Va(e)){r&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(ts,e.slice(6,e.length)):t.setAttributeNS(ts,e,i):i==null||s&&!vo(i)?t.removeAttribute(e):t.setAttribute(e,s?"":ie(i)?String(i):i)}function is(t,e,i,r,n){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?va(i):i);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let o=!1;if(i===""||i==null){const a=typeof t[e];a==="boolean"?i=vo(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(n||e)}function ba(t,e,i,r){t.addEventListener(e,i,r)}function Vh(t,e,i,r){t.removeEventListener(e,i,r)}const ns=Symbol("_vei");function Hh(t,e,i,r,n=null){const s=t[ns]||(t[ns]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=qh(e);if(r){const c=s[e]=zh(r,n);ba(t,a,c,l)}else o&&(Vh(t,a,o,l),s[e]=void 0)}}const rs=/(?:Once|Passive|Capture)$/;function qh(t){let e;if(rs.test(t)){e={};let r;for(;r=t.match(rs);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pe(t.slice(2)),e]}let Ln=0;const Wh=Promise.resolve(),jh=()=>Ln||(Wh.then(()=>Ln=0),Ln=Date.now());function zh(t,e){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;ne(Kh(r,i.value),e,5,[r])};return i.value=t,i.attached=jh(),i}function Kh(t,e){if(ht(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const ss=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Yh=(t,e,i,r,n,s)=>{const o=n==="svg";e==="class"?Gh(t,r,o):e==="style"?Uh(t,i,r):un(e)?ar(e)||Hh(t,e,i,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Xh(t,e,r,o))?(is(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&es(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Rt(r))?is(t,$t(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),es(t,e,r,o))};function Xh(t,e,i,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&ss(e)&&ct(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return ss(e)&&Rt(i)?!1:e in t}const os=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ht(e)?i=>$i(e,i):e},Dn=Symbol("_assign"),$h={deep:!0,created(t,{value:e,modifiers:{number:i}},r){const n=fn(e);ba(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?yo(cn(o)):cn(o));t[Dn](t.multiple?n?new Set(s):s:s[0]),t._assigning=!0,Bo(()=>{t._assigning=!1})}),t[Dn]=os(r)},mounted(t,{value:e}){as(t,e)},beforeUpdate(t,e,i){t[Dn]=os(i)},updated(t,{value:e}){t._assigning||as(t,e)}};function as(t,e){const i=t.multiple,r=ht(e);if(!(i&&!r&&!fn(e))){for(let n=0,s=t.options.length;n<s;n++){const o=t.options[n],a=cn(o);if(i)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=qa(e,a)>-1}else o.selected=e.has(a);else if(mn(cn(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function cn(t){return"_value"in t?t._value:t.value}const Jh=Dt({patchProp:Yh},kh);let ls;function Qh(){return ls||(ls=th(Jh))}const Zh=(...t)=>{const e=Qh().createApp(...t),{mount:i}=e;return e.mount=r=>{const n=ec(r);if(!n)return;const s=e._component;!ct(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=i(n,!1,tc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function tc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function ec(t){return Rt(t)?document.querySelector(t):t}const ic={"Seconde 12":[{id:1,name:"Alice",color:"#f8f"},{id:2,name:"Bob",color:"#f88"},{id:3,name:"Arthur",color:"#f88"},{id:4,name:"Léa",color:"#f8f"},{id:5,name:"Théo",color:"#f88"},{id:6,name:"Benoîthenry",color:"#8f8"}],"Première S1":[{id:1,name:"Claire",color:"#88f"},{id:2,name:"David",color:"#ff8"}],"Première S2":[{id:1,name:"Eva",color:"#f8f"},{id:2,name:"Farid",color:"#8ff"}]},nc="data:image/svg+xml,%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20122.88%20114.27'%3e%3cdefs%3e%3cstyle%3e.cls-1,.cls-2,.cls-3{fill-rule:evenodd;}.cls-2{fill:%23f9c450;}.cls-3{fill:%23e0501e;}%3c/style%3e%3c/defs%3e%3ctitle%3educk%3c/title%3e%3cpath%20class='cls-1'%20d='M34.28,42.71c-24.6,6.52-27.23,67.46,27.56,67.55,42.18.06,72.76-36.3,48.33-73.61-1.63-2.49-6,22-38.3,20.12-19.81-1.16-20.33,13.29-16.53-4.05,16.33-3,22.31-20.21,18.07-33.25C62.78-13.22,3,11.44,34.28,42.71Zm-8.43-.26c-9.73-4.35-9.79-2.29-20.34-9.72-7.3-5.58-8.45-10.44,3.38-11.53a61.82,61.82,0,0,0,13.42-2.69c.1-.29.19-.57.3-.85a26,26,0,0,1,12-13.25A35,35,0,0,1,52.53,0c10.55.33,20.65,5.73,24.71,18.2a31.15,31.15,0,0,1,1,3.89A32.16,32.16,0,0,1,75.54,42a27,27,0,0,1-9.63,10.9,39.12,39.12,0,0,1,6.19-.09c22.29,1.31,29.76-11.23,32.7-16.17a9.77,9.77,0,0,1,2.71-3.42h0c2.41-1.58,4.36-1.27,6,1.27,6.47,9.88,9.35,19.77,9.34,29.09a44.39,44.39,0,0,1-6.32,22.75,53.12,53.12,0,0,1-16.75,17.2,69.11,69.11,0,0,1-38,10.78c-20.16,0-33.23-7.82-40.66-18.37A42.31,42.31,0,0,1,14,77.57a44.38,44.38,0,0,1,1.15-18.42c2-6.94,5.66-12.91,10.71-16.7Z'/%3e%3cpath%20class='cls-2'%20d='M34.28,42.71c-24.6,6.52-27.23,67.46,27.56,67.55,42.18.06,72.76-36.3,48.33-73.61-1.63-2.49-6,22-38.3,20.12-19.81-1.16-20.33,13.29-16.53-4.05,16.33-3,22.31-20.21,18.07-33.25C62.78-13.22,3,11.44,34.28,42.71Z'/%3e%3cpath%20class='cls-1'%20d='M46.84,16a5.3,5.3,0,1,0,5.3,5.29A5.29,5.29,0,0,0,46.84,16Z'/%3e%3cpath%20class='cls-3'%20d='M25.61,38.47c-1.92-5.26-5-10.65-3.65-16.77A104.39,104.39,0,0,1,6.37,24.6c-1.82.23-2.58.32-2.32.9,3.18,7.19,14.52,9.94,21.56,13Z'/%3e%3cpath%20class='cls-3'%20d='M72.82,94.4c16.88-1.87,29.29-14.61,19.45-29.63-.65-1-2.43,8.87-15.41,8.1-50.16-3-27.73,24.14-4,21.53Z'/%3e%3cpath%20d='M72.66,92.94a31.35,31.35,0,0,0,13.66-4.65,18.84,18.84,0,0,0,6.23-6.42,13.42,13.42,0,0,0,1.66-8.12,17.66,17.66,0,0,0-2.09-6.38c-1.82,2.81-5.83,7.52-15.35,7-15.2-.89-23.43,1-26.87,3.84a4.08,4.08,0,0,0-1.67,3.72,8.19,8.19,0,0,0,2.68,4.49c4.35,4.23,13,7.54,21.75,6.56Zm15.26-2.2A34.28,34.28,0,0,1,73,95.85c-9.7,1.07-19.23-2.64-24.11-7.38a11,11,0,0,1-3.54-6.22A6.81,6.81,0,0,1,48,75.94C52,72.62,60.9,70.47,76.94,71.41,86,72,89.05,66.84,90.25,64.83a3.7,3.7,0,0,1,1-1.32A1.4,1.4,0,0,1,93.5,64a21.69,21.69,0,0,1,3.62,9.45,16.37,16.37,0,0,1-2,9.86,21.8,21.8,0,0,1-7.19,7.45Z'/%3e%3c/svg%3e",rc=(t,e)=>{const i=t.__vccOpts||t;for(const[r,n]of e)i[r]=n;return i},sc={data(){return{avatarImage:null,stageConfig:{width:800,height:600},plots:[{id:1,x:100,y:100,name:"Plot A"},{id:2,x:300,y:100,name:"Plot B"}],nextPlotId:3,classes:ic,selectedClass:"",students:[]}},methods:{getAvatarImage(t){return this.avatarImage},getStudentPosition(t,e){if(t.plotId){const i=this.plots.find(n=>n.id===t.plotId),r=this.students.filter(n=>n.plotId===t.plotId).indexOf(t);return{x:i.x+10,y:i.y+40+r*40}}else return{x:this.stageConfig.width-150,y:50+e*60}},updatePlotPosition(t,e){const i=e.target.position();t.x=i.x,t.y=i.y},updateStudentPosition(t,e){const i=e.target.getAbsolutePosition().x,r=e.target.getAbsolutePosition().y,n=this.plots.find(s=>i>=s.x&&i<=s.x+100&&r>=s.y&&r<=s.y+100);n?t.plotId=n.id:(t.plotId=null,t.x=i,t.y=r)},addPlot(){const t=this.nextPlotId,e=`Plot ${String.fromCharCode(64+t)}`;this.plots.push({id:t,name:e,x:100+t*50,y:200}),this.nextPlotId++},loadStudents(){if(!this.avatarImage){setTimeout(()=>this.loadStudents(),100);return}const t=600,e=50;this.students=this.classes[this.selectedClass].map((i,r)=>({...i,x:t,y:e+r*40,plotId:null}))},resizeStage(){this.stageConfig.width=window.innerWidth,this.stageConfig.height=window.innerHeight-100}},mounted(){const t=new window.Image;t.src=nc,t.onload=()=>{this.avatarImage=t},window.addEventListener("resize",this.resizeStage),this.resizeStage()},beforeUnmount(){window.removeEventListener("resize",this.resizeStage)}},oc={id:"app"},ac=["value"];function lc(t,e,i,r,n,s){const o=Ae("v-rect"),a=Ae("v-text"),l=Ae("v-group"),c=Ae("v-image"),h=Ae("v-layer"),_=Ae("v-stage");return ae(),Be("div",oc,[e[4]||(e[4]=Oe("h1",null,"Plan de TP - Drag and Drop",-1)),xl(Oe("select",{"onUpdate:modelValue":e[0]||(e[0]=y=>n.selectedClass=y),onChange:e[1]||(e[1]=(...y)=>s.loadStudents&&s.loadStudents(...y))},[e[3]||(e[3]=Oe("option",{disabled:"",value:""},"Choisir une classe",-1)),(ae(!0),Be(Yt,null,Mn(n.classes,(y,u)=>(ae(),Be("option",{key:u,value:u},So(u),9,ac))),128))],544),[[$h,n.selectedClass]]),Oe("button",{onClick:e[2]||(e[2]=(...y)=>s.addPlot&&s.addPlot(...y))},"Ajouter un plot"),At(_,{config:n.stageConfig},{default:Fe(()=>[At(h,null,{default:Fe(()=>[(ae(!0),Be(Yt,null,Mn(n.plots,y=>(ae(),Qi(l,{key:y.id,config:{x:y.x,y:y.y,draggable:!0},onDragmove:u=>s.updatePlotPosition(y,u)},{default:Fe(()=>[At(o,{config:{width:130,height:130,fill:"#ccc",stroke:"#000"}}),At(a,{config:{text:y.name,fontSize:14,x:85,y:5}},null,8,["config"])]),_:2},1032,["config","onDragmove"]))),128)),(ae(!0),Be(Yt,null,Mn(n.students,(y,u)=>(ae(),Qi(l,{key:y.id,config:s.getStudentPosition(y,u),draggable:!0,onDragend:g=>s.updateStudentPosition(y,g)},{default:Fe(()=>[n.avatarImage?(ae(),Qi(c,{key:0,config:{image:n.avatarImage,width:40,height:40,offset:{x:30,y:20}}},null,8,["config"])):yh("",!0),At(l,null,{default:Fe(()=>[At(o,{config:{x:12,y:-10,width:70,height:25,fill:"#186efa",cornerRadius:10}}),At(a,{config:{text:y.name,x:25,y:-4,fontSize:14,fill:"#fff",width:50,align:"left"}},null,8,["config"])]),_:2},1024)]),_:2},1032,["config","onDragend"]))),128))]),_:1})]),_:1},8,["config"])])}const hc=rc(sc,[["render",lc]]);var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var en={exports:{}},He={},In={},Un={},cs;function ut(){return cs||(cs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof hs<"u"?hs:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.20",isBrowser:i(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return t.Konva.angleDeg?n*e:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var n;return(n=t.Konva.Transformer)===null||n===void 0?void 0:n.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(n){t.glob.Konva=n}};const r=n=>{t.Konva[n.prototype.getClassName()]=n};t._registerNode=r,t.Konva._injectGlobal(t.Konva)}(Un)),Un}var Bn={},ds;function Pt(){return ds||(ds=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=ut();class i{constructor(m=[1,0,0,1,0,0]){this.dirty=!1,this.m=m&&m.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(m){m.m[0]=this.m[0],m.m[1]=this.m[1],m.m[2]=this.m[2],m.m[3]=this.m[3],m.m[4]=this.m[4],m.m[5]=this.m[5]}point(m){const C=this.m;return{x:C[0]*m.x+C[2]*m.y+C[4],y:C[1]*m.x+C[3]*m.y+C[5]}}translate(m,C){return this.m[4]+=this.m[0]*m+this.m[2]*C,this.m[5]+=this.m[1]*m+this.m[3]*C,this}scale(m,C){return this.m[0]*=m,this.m[1]*=m,this.m[2]*=C,this.m[3]*=C,this}rotate(m){const C=Math.cos(m),A=Math.sin(m),G=this.m[0]*C+this.m[2]*A,R=this.m[1]*C+this.m[3]*A,T=this.m[0]*-A+this.m[2]*C,x=this.m[1]*-A+this.m[3]*C;return this.m[0]=G,this.m[1]=R,this.m[2]=T,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(m,C){const A=this.m[0]+this.m[2]*C,G=this.m[1]+this.m[3]*C,R=this.m[2]+this.m[0]*m,T=this.m[3]+this.m[1]*m;return this.m[0]=A,this.m[1]=G,this.m[2]=R,this.m[3]=T,this}multiply(m){const C=this.m[0]*m.m[0]+this.m[2]*m.m[1],A=this.m[1]*m.m[0]+this.m[3]*m.m[1],G=this.m[0]*m.m[2]+this.m[2]*m.m[3],R=this.m[1]*m.m[2]+this.m[3]*m.m[3],T=this.m[0]*m.m[4]+this.m[2]*m.m[5]+this.m[4],x=this.m[1]*m.m[4]+this.m[3]*m.m[5]+this.m[5];return this.m[0]=C,this.m[1]=A,this.m[2]=G,this.m[3]=R,this.m[4]=T,this.m[5]=x,this}invert(){const m=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*m,A=-this.m[1]*m,G=-this.m[2]*m,R=this.m[0]*m,T=m*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=m*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=A,this.m[2]=G,this.m[3]=R,this.m[4]=T,this.m[5]=x,this}getMatrix(){return this.m}decompose(){const m=this.m[0],C=this.m[1],A=this.m[2],G=this.m[3],R=this.m[4],T=this.m[5],x=m*G-C*A,M={x:R,y:T,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(m!=0||C!=0){const L=Math.sqrt(m*m+C*C);M.rotation=C>0?Math.acos(m/L):-Math.acos(m/L),M.scaleX=L,M.scaleY=x/L,M.skewX=(m*A+C*G)/x,M.skewY=0}else if(A!=0||G!=0){const L=Math.sqrt(A*A+G*G);M.rotation=Math.PI/2-(G>0?Math.acos(-A/L):-Math.acos(A/L)),M.scaleX=x/L,M.scaleY=L,M.skewX=0,M.skewY=(m*A+C*G)/x}return M.rotation=t.Util._getRotation(M.rotation),M}}t.Transform=i;const r="[object Array]",n="[object Number]",s="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,c="#",h="",_="0",y="Konva warning: ",u="Konva error: ",g="rgb(",v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let P=[];const f=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(d){setTimeout(d,60)};t.Util={_isElement(d){return!!(d&&d.nodeType==1)},_isFunction(d){return!!(d&&d.constructor&&d.call&&d.apply)},_isPlainObject(d){return!!d&&d.constructor===Object},_isArray(d){return Object.prototype.toString.call(d)===r},_isNumber(d){return Object.prototype.toString.call(d)===n&&!isNaN(d)&&isFinite(d)},_isString(d){return Object.prototype.toString.call(d)===s},_isBoolean(d){return Object.prototype.toString.call(d)===o},isObject(d){return d instanceof Object},isValidSelector(d){if(typeof d!="string")return!1;const m=d[0];return m==="#"||m==="."||m===m.toUpperCase()},_sign(d){return d===0||d>0?1:-1},requestAnimFrame(d){P.push(d),P.length===1&&f(function(){const m=P;P=[],m.forEach(function(C){C()})})},createCanvasElement(){const d=document.createElement("canvas");try{d.style=d.style||{}}catch{}return d},createImageElement(){return document.createElement("img")},_isInDocument(d){for(;d=d.parentNode;)if(d==document)return!0;return!1},_urlToImage(d,m){const C=t.Util.createImageElement();C.onload=function(){m(C)},C.src=d},_rgbToHex(d,m,C){return((1<<24)+(d<<16)+(m<<8)+C).toString(16).slice(1)},_hexToRgb(d){d=d.replace(c,h);const m=parseInt(d,16);return{r:m>>16&255,g:m>>8&255,b:m&255}},getRandomColor(){let d=(Math.random()*16777215<<0).toString(16);for(;d.length<6;)d=_+d;return c+d},getRGB(d){let m;return d in v?(m=v[d],{r:m[0],g:m[1],b:m[2]}):d[0]===c?this._hexToRgb(d.substring(1)):d.substr(0,4)===g?(m=S.exec(d.replace(/ /g,"")),{r:parseInt(m[1],10),g:parseInt(m[2],10),b:parseInt(m[3],10)}):{r:0,g:0,b:0}},colorToRGBA(d){return d=d||"black",t.Util._namedColorToRBA(d)||t.Util._hex3ColorToRGBA(d)||t.Util._hex4ColorToRGBA(d)||t.Util._hex6ColorToRGBA(d)||t.Util._hex8ColorToRGBA(d)||t.Util._rgbColorToRGBA(d)||t.Util._rgbaColorToRGBA(d)||t.Util._hslColorToRGBA(d)},_namedColorToRBA(d){const m=v[d.toLowerCase()];return m?{r:m[0],g:m[1],b:m[2],a:1}:null},_rgbColorToRGBA(d){if(d.indexOf("rgb(")===0){d=d.match(/rgb\(([^)]+)\)/)[1];const m=d.split(/ *, */).map(Number);return{r:m[0],g:m[1],b:m[2],a:1}}},_rgbaColorToRGBA(d){if(d.indexOf("rgba(")===0){d=d.match(/rgba\(([^)]+)\)/)[1];const m=d.split(/ *, */).map((C,A)=>C.slice(-1)==="%"?A===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:m[0],g:m[1],b:m[2],a:m[3]}}},_hex8ColorToRGBA(d){if(d[0]==="#"&&d.length===9)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:parseInt(d.slice(7,9),16)/255}},_hex6ColorToRGBA(d){if(d[0]==="#"&&d.length===7)return{r:parseInt(d.slice(1,3),16),g:parseInt(d.slice(3,5),16),b:parseInt(d.slice(5,7),16),a:1}},_hex4ColorToRGBA(d){if(d[0]==="#"&&d.length===5)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:parseInt(d[4]+d[4],16)/255}},_hex3ColorToRGBA(d){if(d[0]==="#"&&d.length===4)return{r:parseInt(d[1]+d[1],16),g:parseInt(d[2]+d[2],16),b:parseInt(d[3]+d[3],16),a:1}},_hslColorToRGBA(d){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(d)){const[m,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(d),A=Number(C[0])/360,G=Number(C[1])/100,R=Number(C[2])/100;let T,x,M;if(G===0)return M=R*255,{r:Math.round(M),g:Math.round(M),b:Math.round(M),a:1};R<.5?T=R*(1+G):T=R+G-R*G;const L=2*R-T,p=[0,0,0];for(let w=0;w<3;w++)x=A+1/3*-(w-1),x<0&&x++,x>1&&x--,6*x<1?M=L+(T-L)*6*x:2*x<1?M=T:3*x<2?M=L+(T-L)*(2/3-x)*6:M=L,p[w]=M*255;return{r:Math.round(p[0]),g:Math.round(p[1]),b:Math.round(p[2]),a:1}}},haveIntersection(d,m){return!(m.x>d.x+d.width||m.x+m.width<d.x||m.y>d.y+d.height||m.y+m.height<d.y)},cloneObject(d){const m={};for(const C in d)this._isPlainObject(d[C])?m[C]=this.cloneObject(d[C]):this._isArray(d[C])?m[C]=this.cloneArray(d[C]):m[C]=d[C];return m},cloneArray(d){return d.slice(0)},degToRad(d){return d*a},radToDeg(d){return d*l},_degToRad(d){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(d)},_radToDeg(d){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(d)},_getRotation(d){return e.Konva.angleDeg?t.Util.radToDeg(d):d},_capitalize(d){return d.charAt(0).toUpperCase()+d.slice(1)},throw(d){throw new Error(u+d)},error(d){console.error(u+d)},warn(d){e.Konva.showWarnings&&console.warn(y+d)},each(d,m){for(const C in d)m(C,d[C])},_inRange(d,m,C){return m<=d&&d<C},_getProjectionToSegment(d,m,C,A,G,R){let T,x,M;const L=(d-C)*(d-C)+(m-A)*(m-A);if(L==0)T=d,x=m,M=(G-C)*(G-C)+(R-A)*(R-A);else{const p=((G-d)*(C-d)+(R-m)*(A-m))/L;p<0?(T=d,x=m,M=(d-G)*(d-G)+(m-R)*(m-R)):p>1?(T=C,x=A,M=(C-G)*(C-G)+(A-R)*(A-R)):(T=d+p*(C-d),x=m+p*(A-m),M=(T-G)*(T-G)+(x-R)*(x-R))}return[T,x,M]},_getProjectionToLine(d,m,C){const A=t.Util.cloneObject(d);let G=Number.MAX_VALUE;return m.forEach(function(R,T){if(!C&&T===m.length-1)return;const x=m[(T+1)%m.length],M=t.Util._getProjectionToSegment(R.x,R.y,x.x,x.y,d.x,d.y),L=M[0],p=M[1],w=M[2];w<G&&(A.x=L,A.y=p,G=w)}),A},_prepareArrayForTween(d,m,C){const A=[],G=[];if(d.length>m.length){const T=m;m=d,d=T}for(let T=0;T<d.length;T+=2)A.push({x:d[T],y:d[T+1]});for(let T=0;T<m.length;T+=2)G.push({x:m[T],y:m[T+1]});const R=[];return G.forEach(function(T){const x=t.Util._getProjectionToLine(T,A,C);R.push(x.x),R.push(x.y)}),R},_prepareToStringify(d){let m;d.visitedByCircularReferenceRemoval=!0;for(const C in d)if(d.hasOwnProperty(C)&&d[C]&&typeof d[C]=="object"){if(m=Object.getOwnPropertyDescriptor(d,C),d[C].visitedByCircularReferenceRemoval||t.Util._isElement(d[C]))if(m.configurable)delete d[C];else return null;else if(t.Util._prepareToStringify(d[C])===null)if(m.configurable)delete d[C];else return null}return delete d.visitedByCircularReferenceRemoval,d},_assign(d,m){for(const C in m)d[C]=m[C];return d},_getFirstPointerId(d){return d.touches?d.changedTouches[0].identifier:d.pointerId||999},releaseCanvas(...d){e.Konva.releaseCanvasOnDestroy&&d.forEach(m=>{m.width=0,m.height=0})},drawRoundedRectPath(d,m,C,A){let G=0,R=0,T=0,x=0;typeof A=="number"?G=R=T=x=Math.min(A,m/2,C/2):(G=Math.min(A[0]||0,m/2,C/2),R=Math.min(A[1]||0,m/2,C/2),x=Math.min(A[2]||0,m/2,C/2),T=Math.min(A[3]||0,m/2,C/2)),d.moveTo(G,0),d.lineTo(m-R,0),d.arc(m-R,R,R,Math.PI*3/2,0,!1),d.lineTo(m,C-x),d.arc(m-x,C-x,x,0,Math.PI/2,!1),d.lineTo(T,C),d.arc(T,C-T,T,Math.PI/2,Math.PI,!1),d.lineTo(0,G),d.arc(G,G,G,Math.PI,Math.PI*3/2,!1)}}}(Bn)),Bn}var qe={},Vn={},Vt={},us;function gt(){if(us)return Vt;us=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.RGBComponent=r,Vt.alphaComponent=n,Vt.getNumberValidator=s,Vt.getNumberOrArrayOfNumbersValidator=o,Vt.getNumberOrAutoValidator=a,Vt.getStringValidator=l,Vt.getStringOrGradientValidator=c,Vt.getFunctionValidator=h,Vt.getNumberArrayValidator=_,Vt.getBooleanValidator=y,Vt.getComponentValidator=u;const t=ut(),e=Pt();function i(g){return e.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||e.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function r(g){return g>255?255:g<0?0:Math.round(g)}function n(g){return g>1?1:g<1e-4?1e-4:g}function s(){if(t.Konva.isUnminified)return function(g,v){return e.Util._isNumber(g)||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a number.'),g}}function o(g){if(t.Konva.isUnminified)return function(v,S){let P=e.Util._isNumber(v),f=e.Util._isArray(v)&&v.length==g;return!P&&!f&&e.Util.warn(i(v)+' is a not valid value for "'+S+'" attribute. The value should be a number or Array<number>('+g+")"),v}}function a(){if(t.Konva.isUnminified)return function(g,v){var S=e.Util._isNumber(g),P=g==="auto";return S||P||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a number or "auto".'),g}}function l(){if(t.Konva.isUnminified)return function(g,v){return e.Util._isString(g)||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a string.'),g}}function c(){if(t.Konva.isUnminified)return function(g,v){const S=e.Util._isString(g),P=Object.prototype.toString.call(g)==="[object CanvasGradient]"||g&&g.addColorStop;return S||P||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a string or a native gradient.'),g}}function h(){if(t.Konva.isUnminified)return function(g,v){return e.Util._isFunction(g)||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a function.'),g}}function _(){if(t.Konva.isUnminified)return function(g,v){const S=Int8Array?Object.getPrototypeOf(Int8Array):null;return S&&g instanceof S||(e.Util._isArray(g)?g.forEach(function(P){e.Util._isNumber(P)||e.Util.warn('"'+v+'" attribute has non numeric element '+P+". Make sure that all elements are numbers.")}):e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a array of numbers.')),g}}function y(){if(t.Konva.isUnminified)return function(g,v){var S=g===!0||g===!1;return S||e.Util.warn(i(g)+' is a not valid value for "'+v+'" attribute. The value should be a boolean.'),g}}function u(g){if(t.Konva.isUnminified)return function(v,S){return v==null||e.Util.isObject(v)||e.Util.warn(i(v)+' is a not valid value for "'+S+'" attribute. The value should be an object with properties '+g),v}}return Vt}var fs;function ft(){return fs||(fs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=Pt(),i=gt(),r="get",n="set";t.Factory={addGetterSetter(s,o,a,l,c){t.Factory.addGetter(s,o,a),t.Factory.addSetter(s,o,l,c),t.Factory.addOverloadedGetterSetter(s,o)},addGetter(s,o,a){var l=r+e.Util._capitalize(o);s.prototype[l]=s.prototype[l]||function(){const c=this.attrs[o];return c===void 0?a:c}},addSetter(s,o,a,l){var c=n+e.Util._capitalize(o);s.prototype[c]||t.Factory.overWriteSetter(s,o,a,l)},overWriteSetter(s,o,a,l){var c=n+e.Util._capitalize(o);s.prototype[c]=function(h){return a&&h!==void 0&&h!==null&&(h=a.call(this,h,o)),this._setAttr(o,h),l&&l.call(this),this}},addComponentsGetterSetter(s,o,a,l,c){const h=a.length,_=e.Util._capitalize,y=r+_(o),u=n+_(o);s.prototype[y]=function(){const v={};for(let S=0;S<h;S++){const P=a[S];v[P]=this.getAttr(o+_(P))}return v};const g=(0,i.getComponentValidator)(a);s.prototype[u]=function(v){const S=this.attrs[o];l&&(v=l.call(this,v,o)),g&&g.call(this,v,o);for(const P in v)v.hasOwnProperty(P)&&this._setAttr(o+_(P),v[P]);return v||a.forEach(P=>{this._setAttr(o+_(P),void 0)}),this._fireChangeEvent(o,S,v),c&&c.call(this),this},t.Factory.addOverloadedGetterSetter(s,o)},addOverloadedGetterSetter(s,o){var a=e.Util._capitalize(o),l=n+a,c=r+a;s.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(s,o,a,l){e.Util.error("Adding deprecated "+o);const c=r+e.Util._capitalize(o),h=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[c]=function(){e.Util.error(h);const _=this.attrs[o];return _===void 0?a:_},t.Factory.addSetter(s,o,l,function(){e.Util.error(h)}),t.Factory.addOverloadedGetterSetter(s,o)},backCompat(s,o){e.Util.each(o,function(a,l){const c=s.prototype[l],h=r+e.Util._capitalize(a),_=n+e.Util._capitalize(a);function y(){c.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[a]=y,s.prototype[h]=y,s.prototype[_]=y})},afterSetFilter(){this._filterUpToDate=!1}}}(Vn)),Vn}var se={},oe={},gs;function Sa(){if(gs)return oe;gs=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.HitContext=oe.SceneContext=oe.Context=void 0;const t=Pt(),e=ut();function i(P){const f=[],d=P.length,m=t.Util;for(let C=0;C<d;C++){let A=P[C];m._isNumber(A)?A=Math.round(A*1e3)/1e3:m._isString(A)||(A=A+""),f.push(A)}return f}const r=",",n="(",s=")",o="([",a="])",l=";",c="()",h="=",_=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],y=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],u=100;let g=class{constructor(f){this.canvas=f,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(f){f.fillEnabled()&&this._fill(f)}_fill(f){}strokeShape(f){f.hasStroke()&&this._stroke(f)}_stroke(f){}fillStrokeShape(f){f.attrs.fillAfterStrokeEnabled?(this.strokeShape(f),this.fillShape(f)):(this.fillShape(f),this.strokeShape(f))}getTrace(f,d){let m=this.traceArr,C=m.length,A="",G,R,T,x;for(G=0;G<C;G++)R=m[G],T=R.method,T?(x=R.args,A+=T,f?A+=c:t.Util._isArray(x[0])?A+=o+x.join(r)+a:(d&&(x=x.map(M=>typeof M=="number"?Math.floor(M):M)),A+=n+x.join(r)+s)):(A+=R.property,f||(A+=h+R.val)),A+=l;return A}clearTrace(){this.traceArr=[]}_trace(f){let d=this.traceArr,m;d.push(f),m=d.length,m>=u&&d.shift()}reset(){const f=this.getCanvas().getPixelRatio();this.setTransform(1*f,0,0,1*f,0,0)}getCanvas(){return this.canvas}clear(f){const d=this.getCanvas();f?this.clearRect(f.x||0,f.y||0,f.width||0,f.height||0):this.clearRect(0,0,d.getWidth()/d.pixelRatio,d.getHeight()/d.pixelRatio)}_applyLineCap(f){const d=f.attrs.lineCap;d&&this.setAttr("lineCap",d)}_applyOpacity(f){const d=f.getAbsoluteOpacity();d!==1&&this.setAttr("globalAlpha",d)}_applyLineJoin(f){const d=f.attrs.lineJoin;d&&this.setAttr("lineJoin",d)}setAttr(f,d){this._context[f]=d}arc(f,d,m,C,A,G){this._context.arc(f,d,m,C,A,G)}arcTo(f,d,m,C,A){this._context.arcTo(f,d,m,C,A)}beginPath(){this._context.beginPath()}bezierCurveTo(f,d,m,C,A,G){this._context.bezierCurveTo(f,d,m,C,A,G)}clearRect(f,d,m,C){this._context.clearRect(f,d,m,C)}clip(...f){this._context.clip.apply(this._context,f)}closePath(){this._context.closePath()}createImageData(f,d){const m=arguments;if(m.length===2)return this._context.createImageData(f,d);if(m.length===1)return this._context.createImageData(f)}createLinearGradient(f,d,m,C){return this._context.createLinearGradient(f,d,m,C)}createPattern(f,d){return this._context.createPattern(f,d)}createRadialGradient(f,d,m,C,A,G){return this._context.createRadialGradient(f,d,m,C,A,G)}drawImage(f,d,m,C,A,G,R,T,x){const M=arguments,L=this._context;M.length===3?L.drawImage(f,d,m):M.length===5?L.drawImage(f,d,m,C,A):M.length===9&&L.drawImage(f,d,m,C,A,G,R,T,x)}ellipse(f,d,m,C,A,G,R,T){this._context.ellipse(f,d,m,C,A,G,R,T)}isPointInPath(f,d,m,C){return m?this._context.isPointInPath(m,f,d,C):this._context.isPointInPath(f,d,C)}fill(...f){this._context.fill.apply(this._context,f)}fillRect(f,d,m,C){this._context.fillRect(f,d,m,C)}strokeRect(f,d,m,C){this._context.strokeRect(f,d,m,C)}fillText(f,d,m,C){C?this._context.fillText(f,d,m,C):this._context.fillText(f,d,m)}measureText(f){return this._context.measureText(f)}getImageData(f,d,m,C){return this._context.getImageData(f,d,m,C)}lineTo(f,d){this._context.lineTo(f,d)}moveTo(f,d){this._context.moveTo(f,d)}rect(f,d,m,C){this._context.rect(f,d,m,C)}roundRect(f,d,m,C,A){this._context.roundRect(f,d,m,C,A)}putImageData(f,d,m){this._context.putImageData(f,d,m)}quadraticCurveTo(f,d,m,C){this._context.quadraticCurveTo(f,d,m,C)}restore(){this._context.restore()}rotate(f){this._context.rotate(f)}save(){this._context.save()}scale(f,d){this._context.scale(f,d)}setLineDash(f){this._context.setLineDash?this._context.setLineDash(f):"mozDash"in this._context?this._context.mozDash=f:"webkitLineDash"in this._context&&(this._context.webkitLineDash=f)}getLineDash(){return this._context.getLineDash()}setTransform(f,d,m,C,A,G){this._context.setTransform(f,d,m,C,A,G)}stroke(f){f?this._context.stroke(f):this._context.stroke()}strokeText(f,d,m,C){this._context.strokeText(f,d,m,C)}transform(f,d,m,C,A,G){this._context.transform(f,d,m,C,A,G)}translate(f,d){this._context.translate(f,d)}_enableTrace(){let f=this,d=_.length,m=this.setAttr,C,A;const G=function(R){let T=f[R],x;f[R]=function(){return A=i(Array.prototype.slice.call(arguments,0)),x=T.apply(f,arguments),f._trace({method:R,args:A}),x}};for(C=0;C<d;C++)G(_[C]);f.setAttr=function(){m.apply(f,arguments);const R=arguments[0];let T=arguments[1];(R==="shadowOffsetX"||R==="shadowOffsetY"||R==="shadowBlur")&&(T=T/this.canvas.getPixelRatio()),f._trace({property:R,val:T})}}_applyGlobalCompositeOperation(f){const d=f.attrs.globalCompositeOperation;!d||d==="source-over"||this.setAttr("globalCompositeOperation",d)}};oe.Context=g,y.forEach(function(P){Object.defineProperty(g.prototype,P,{get(){return this._context[P]},set(f){this._context[P]=f}})});class v extends g{constructor(f,{willReadFrequently:d=!1}={}){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:d})}_fillColor(f){const d=f.fill();this.setAttr("fillStyle",d),f._fillFunc(this)}_fillPattern(f){this.setAttr("fillStyle",f._getFillPattern()),f._fillFunc(this)}_fillLinearGradient(f){const d=f._getLinearGradient();d&&(this.setAttr("fillStyle",d),f._fillFunc(this))}_fillRadialGradient(f){const d=f._getRadialGradient();d&&(this.setAttr("fillStyle",d),f._fillFunc(this))}_fill(f){const d=f.fill(),m=f.getFillPriority();if(d&&m==="color"){this._fillColor(f);return}const C=f.getFillPatternImage();if(C&&m==="pattern"){this._fillPattern(f);return}const A=f.getFillLinearGradientColorStops();if(A&&m==="linear-gradient"){this._fillLinearGradient(f);return}const G=f.getFillRadialGradientColorStops();if(G&&m==="radial-gradient"){this._fillRadialGradient(f);return}d?this._fillColor(f):C?this._fillPattern(f):A?this._fillLinearGradient(f):G&&this._fillRadialGradient(f)}_strokeLinearGradient(f){const d=f.getStrokeLinearGradientStartPoint(),m=f.getStrokeLinearGradientEndPoint(),C=f.getStrokeLinearGradientColorStops(),A=this.createLinearGradient(d.x,d.y,m.x,m.y);if(C){for(let G=0;G<C.length;G+=2)A.addColorStop(C[G],C[G+1]);this.setAttr("strokeStyle",A)}}_stroke(f){const d=f.dash(),m=f.getStrokeScaleEnabled();if(f.hasStroke()){if(!m){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(f),d&&f.dashEnabled()&&(this.setLineDash(d),this.setAttr("lineDashOffset",f.dashOffset())),this.setAttr("lineWidth",f.strokeWidth()),f.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),f.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(f):this.setAttr("strokeStyle",f.stroke()),f._strokeFunc(this),m||this.restore()}}_applyShadow(f){var d,m,C;const A=(d=f.getShadowRGBA())!==null&&d!==void 0?d:"black",G=(m=f.getShadowBlur())!==null&&m!==void 0?m:5,R=(C=f.getShadowOffset())!==null&&C!==void 0?C:{x:0,y:0},T=f.getAbsoluteScale(),x=this.canvas.getPixelRatio(),M=T.x*x,L=T.y*x;this.setAttr("shadowColor",A),this.setAttr("shadowBlur",G*Math.min(Math.abs(M),Math.abs(L))),this.setAttr("shadowOffsetX",R.x*M),this.setAttr("shadowOffsetY",R.y*L)}}oe.SceneContext=v;class S extends g{constructor(f){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:!0})}_fill(f){this.save(),this.setAttr("fillStyle",f.colorKey),f._fillFuncHit(this),this.restore()}strokeShape(f){f.hasHitStroke()&&this._stroke(f)}_stroke(f){if(f.hasHitStroke()){const d=f.getStrokeScaleEnabled();if(!d){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(f);const m=f.hitStrokeWidth(),C=m==="auto"?f.strokeWidth():m;this.setAttr("lineWidth",C),this.setAttr("strokeStyle",f.colorKey),f._strokeFuncHit(this),d||this.restore()}}}return oe.HitContext=S,oe}var ps;function xn(){if(ps)return se;ps=1,Object.defineProperty(se,"__esModule",{value:!0}),se.HitCanvas=se.SceneCanvas=se.Canvas=void 0;const t=Pt(),e=Sa(),i=ut();let r;function n(){if(r)return r;const l=t.Util.createCanvasElement(),c=l.getContext("2d");return r=function(){const h=i.Konva._global.devicePixelRatio||1,_=c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1;return h/_}(),t.Util.releaseCanvas(l),r}let s=class{constructor(c){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const _=(c||{}).pixelRatio||i.Konva.pixelRatio||n();this.pixelRatio=_,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(c){const h=this.pixelRatio;this.pixelRatio=c,this.setSize(this.getWidth()/h,this.getHeight()/h)}setWidth(c){this.width=this._canvas.width=c*this.pixelRatio,this._canvas.style.width=c+"px";const h=this.pixelRatio;this.getContext()._context.scale(h,h)}setHeight(c){this.height=this._canvas.height=c*this.pixelRatio,this._canvas.style.height=c+"px";const h=this.pixelRatio;this.getContext()._context.scale(h,h)}getWidth(){return this.width}getHeight(){return this.height}setSize(c,h){this.setWidth(c||0),this.setHeight(h||0)}toDataURL(c,h){try{return this._canvas.toDataURL(c,h)}catch{try{return this._canvas.toDataURL()}catch(y){return t.Util.error("Unable to get data URL. "+y.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};se.Canvas=s;class o extends s{constructor(c={width:0,height:0,willReadFrequently:!1}){super(c),this.context=new e.SceneContext(this,{willReadFrequently:c.willReadFrequently}),this.setSize(c.width,c.height)}}se.SceneCanvas=o;class a extends s{constructor(c={width:0,height:0}){super(c),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(c.width,c.height)}}return se.HitCanvas=a,se}var Hn={},_s;function Ar(){return _s||(_s=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=ut(),i=Pt();t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(n=>{r=n.node}),r},_dragElements:new Map,_drag(r){const n=[];t.DD._dragElements.forEach((s,o)=>{const{node:a}=s,l=a.getStage();l.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=i.Util._getFirstPointerId(r));const c=l._changedPointerPositions.find(h=>h.id===s.pointerId);if(c){if(s.dragStatus!=="dragging"){const h=a.dragDistance();if(Math.max(Math.abs(c.x-s.startPointerPos.x),Math.abs(c.y-s.startPointerPos.y))<h||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),n.push(a)}}),n.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const n=[];t.DD._dragElements.forEach(s=>{const{node:o}=s,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(h=>h.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,s.dragStatus="stopped");const c=s.node.getLayer()||s.node instanceof e.Konva.Stage&&s.node;c&&n.indexOf(c)===-1&&n.push(c)}),n.forEach(s=>{s.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((n,s)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:r},!0),n.dragStatus!=="dragging"&&t.DD._dragElements.delete(s)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(Hn)),Hn}var ms;function Tt(){if(ms)return qe;ms=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.Node=void 0;const t=Pt(),e=ft(),i=xn(),r=ut(),n=Ar(),s=gt(),o="absoluteOpacity",a="allEventListeners",l="absoluteTransform",c="absoluteScale",h="canvas",_="Change",y="children",u="konva",g="listening",v="mouseenter",S="mouseleave",P="set",f="Shape",d=" ",m="stage",C="transform",A="Stage",G="visible",R=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(d);let T=1,x=class sr{constructor(p){this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(p),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(p){(p===C||p===l)&&this._cache.get(p)?this._cache.get(p).dirty=!0:p?this._cache.delete(p):this._cache.clear()}_getCache(p,w){let b=this._cache.get(p);return(b===void 0||(p===C||p===l)&&b.dirty===!0)&&(b=w.call(this),this._cache.set(p,b)),b}_calculate(p,w,b){if(!this._attachedDepsListeners.get(p)){const E=w.map(O=>O+"Change.konva").join(d);this.on(E,()=>{this._clearCache(p)}),this._attachedDepsListeners.set(p,!0)}return this._getCache(p,b)}_getCanvasCache(){return this._cache.get(h)}_clearSelfAndDescendantCache(p){this._clearCache(p),p===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(h)){const{scene:p,filter:w,hit:b}=this._cache.get(h);t.Util.releaseCanvas(p,w,b),this._cache.delete(h)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(p){const w=p||{};let b={};(w.x===void 0||w.y===void 0||w.width===void 0||w.height===void 0)&&(b=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let E=Math.ceil(w.width||b.width),O=Math.ceil(w.height||b.height),D=w.pixelRatio,H=w.x===void 0?Math.floor(b.x):w.x,U=w.y===void 0?Math.floor(b.y):w.y,z=w.offset||0,et=w.drawBorder||!1,q=w.hitCanvasPixelRatio||1;if(!E||!O){t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const J=Math.abs(Math.round(b.x)-H)>.5?1:0,nt=Math.abs(Math.round(b.y)-U)>.5?1:0;E+=z*2+J,O+=z*2+nt,H-=z,U-=z;const rt=new i.SceneCanvas({pixelRatio:D,width:E,height:O}),N=new i.SceneCanvas({pixelRatio:D,width:0,height:0,willReadFrequently:!0}),B=new i.HitCanvas({pixelRatio:q,width:E,height:O}),X=rt.getContext(),Q=B.getContext();return B.isCache=!0,rt.isCache=!0,this._cache.delete(h),this._filterUpToDate=!1,w.imageSmoothingEnabled===!1&&(rt.getContext()._context.imageSmoothingEnabled=!1,N.getContext()._context.imageSmoothingEnabled=!1),X.save(),Q.save(),X.translate(-H,-U),Q.translate(-H,-U),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(c),this.drawScene(rt,this),this.drawHit(B,this),this._isUnderCache=!1,X.restore(),Q.restore(),et&&(X.save(),X.beginPath(),X.rect(0,0,E,O),X.closePath(),X.setAttr("strokeStyle","red"),X.setAttr("lineWidth",5),X.stroke(),X.restore()),this._cache.set(h,{scene:rt,filter:N,hit:B,x:H,y:U}),this._requestDraw(),this}isCached(){return this._cache.has(h)}getClientRect(p){throw new Error('abstract "getClientRect" method call')}_transformedRect(p,w){const b=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}];let E=1/0,O=1/0,D=-1/0,H=-1/0;const U=this.getAbsoluteTransform(w);return b.forEach(function(z){const et=U.point(z);E===void 0&&(E=D=et.x,O=H=et.y),E=Math.min(E,et.x),O=Math.min(O,et.y),D=Math.max(D,et.x),H=Math.max(H,et.y)}),{x:E,y:O,width:D-E,height:H-O}}_drawCachedSceneCanvas(p){p.save(),p._applyOpacity(this),p._applyGlobalCompositeOperation(this);const w=this._getCanvasCache();p.translate(w.x,w.y);const b=this._getCachedSceneCanvas(),E=b.pixelRatio;p.drawImage(b._canvas,0,0,b.width/E,b.height/E),p.restore()}_drawCachedHitCanvas(p){const w=this._getCanvasCache(),b=w.hit;p.save(),p.translate(w.x,w.y),p.drawImage(b._canvas,0,0,b.width/b.pixelRatio,b.height/b.pixelRatio),p.restore()}_getCachedSceneCanvas(){let p=this.filters(),w=this._getCanvasCache(),b=w.scene,E=w.filter,O=E.getContext(),D,H,U,z;if(p){if(!this._filterUpToDate){const et=b.pixelRatio;E.setSize(b.width/b.pixelRatio,b.height/b.pixelRatio);try{for(D=p.length,O.clear(),O.drawImage(b._canvas,0,0,b.getWidth()/et,b.getHeight()/et),H=O.getImageData(0,0,E.getWidth(),E.getHeight()),U=0;U<D;U++){if(z=p[U],typeof z!="function"){t.Util.error("Filter should be type of function, but got "+typeof z+" instead. Please check correct filters");continue}z.call(this,H),O.putImageData(H,0,0)}}catch(q){t.Util.error("Unable to apply filter. "+q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return E}return b}on(p,w){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let b=p.split(d),E=b.length,O,D,H,U,z;for(O=0;O<E;O++)D=b[O],H=D.split("."),U=H[0],z=H[1]||"",this.eventListeners[U]||(this.eventListeners[U]=[]),this.eventListeners[U].push({name:z,handler:w});return this}off(p,w){let b=(p||"").split(d),E=b.length,O,D,H,U,z,et;if(this._cache&&this._cache.delete(a),!p)for(D in this.eventListeners)this._off(D);for(O=0;O<E;O++)if(H=b[O],U=H.split("."),z=U[0],et=U[1],z)this.eventListeners[z]&&this._off(z,et,w);else for(D in this.eventListeners)this._off(D,et,w);return this}dispatchEvent(p){const w={target:this,type:p.type,evt:p};return this.fire(p.type,w),this}addEventListener(p,w){return this.on(p,function(b){w.call(this,b.evt)}),this}removeEventListener(p){return this.off(p),this}_delegate(p,w,b){const E=this;this.on(p,function(O){const D=O.target.findAncestors(w,!0,E);for(let H=0;H<D.length;H++)O=t.Util.cloneObject(O),O.currentTarget=D[H],b.call(D[H],O)})}remove(){return this.isDragging()&&this.stopDrag(),n.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(g)}_remove(){this._clearCaches();const p=this.getParent();p&&p.children&&(p.children.splice(this.index,1),p._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(p){const w="get"+t.Util._capitalize(p);return t.Util._isFunction(this[w])?this[w]():this.attrs[p]}getAncestors(){let p=this.getParent(),w=[];for(;p;)w.push(p),p=p.getParent();return w}getAttrs(){return this.attrs||{}}setAttrs(p){return this._batchTransformChanges(()=>{let w,b;if(!p)return this;for(w in p)w!==y&&(b=P+t.Util._capitalize(w),t.Util._isFunction(this[b])?this[b](p[w]):this._setAttr(w,p[w]))}),this}isListening(){return this._getCache(g,this._isListening)}_isListening(p){if(!this.listening())return!1;const b=this.getParent();return b&&b!==p&&this!==p?b._isListening(p):!0}isVisible(){return this._getCache(G,this._isVisible)}_isVisible(p){if(!this.visible())return!1;const b=this.getParent();return b&&b!==p&&this!==p?b._isVisible(p):!0}shouldDrawHit(p,w=!1){if(p)return this._isVisible(p)&&this._isListening(p);const b=this.getLayer();let E=!1;n.DD._dragElements.forEach(D=>{D.dragStatus==="dragging"&&(D.node.nodeType==="Stage"||D.node.getLayer()===b)&&(E=!0)});const O=!w&&!r.Konva.hitOnDragEnabled&&(E||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!O}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let p=this.getDepth(),w=this,b=0,E,O,D,H;function U(et){for(E=[],O=et.length,D=0;D<O;D++)H=et[D],b++,H.nodeType!==f&&(E=E.concat(H.getChildren().slice())),H._id===w._id&&(D=O);E.length>0&&E[0].getDepth()<=p&&U(E)}const z=this.getStage();return w.nodeType!==A&&z&&U(z.getChildren()),b}getDepth(){let p=0,w=this.parent;for(;w;)p++,w=w.parent;return p}_batchTransformChanges(p){this._batchingTransformChange=!0,p(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(C),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(p){return this._batchTransformChanges(()=>{this.x(p.x),this.y(p.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const p=this.getStage();if(!p)return null;const w=p.getPointerPosition();if(!w)return null;const b=this.getAbsoluteTransform().copy();return b.invert(),b.point(w)}getAbsolutePosition(p){let w=!1,b=this.parent;for(;b;){if(b.isCached()){w=!0;break}b=b.parent}w&&!p&&(p=!0);const E=this.getAbsoluteTransform(p).getMatrix(),O=new t.Transform,D=this.offset();return O.m=E.slice(),O.translate(D.x,D.y),O.getTranslation()}setAbsolutePosition(p){const{x:w,y:b,...E}=this._clearTransform();this.attrs.x=w,this.attrs.y=b,this._clearCache(C);const O=this._getAbsoluteTransform().copy();return O.invert(),O.translate(p.x,p.y),p={x:this.attrs.x+O.getTranslation().x,y:this.attrs.y+O.getTranslation().y},this._setTransform(E),this.setPosition({x:p.x,y:p.y}),this._clearCache(C),this._clearSelfAndDescendantCache(l),this}_setTransform(p){let w;for(w in p)this.attrs[w]=p[w]}_clearTransform(){const p={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,p}move(p){let w=p.x,b=p.y,E=this.x(),O=this.y();return w!==void 0&&(E+=w),b!==void 0&&(O+=b),this.setPosition({x:E,y:O}),this}_eachAncestorReverse(p,w){let b=[],E=this.getParent(),O,D;if(!(w&&w._id===this._id)){for(b.unshift(this);E&&(!w||E._id!==w._id);)b.unshift(E),E=E.parent;for(O=b.length,D=0;D<O;D++)p(b[D])}}rotate(p){return this.rotation(this.rotation()+p),this}moveToTop(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const p=this.index,w=this.parent.getChildren().length;return p<w-1?(this.parent.children.splice(p,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;const p=this.index,w=this.parent.getChildren().length;return p<w-1?(this.parent.children.splice(p,1),this.parent.children.splice(p+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;const p=this.index;return p>0?(this.parent.children.splice(p,1),this.parent.children.splice(p-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const p=this.index;return p>0?(this.parent.children.splice(p,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(p){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(p<0||p>=this.parent.children.length)&&t.Util.warn("Unexpected value "+p+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const w=this.index;return this.parent.children.splice(w,1),this.parent.children.splice(p,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let p=this.opacity();const w=this.getParent();return w&&!w._isUnderCache&&(p*=w.getAbsoluteOpacity()),p}moveTo(p){return this.getParent()!==p&&(this._remove(),p.add(this)),this}toObject(){let p=this.getAttrs(),w,b,E,O,D;const H={attrs:{},className:this.getClassName()};for(w in p)b=p[w],D=t.Util.isObject(b)&&!t.Util._isPlainObject(b)&&!t.Util._isArray(b),!D&&(E=typeof this[w]=="function"&&this[w],delete p[w],O=E?E.call(this):null,p[w]=b,O!==b&&(H.attrs[w]=b));return t.Util._prepareToStringify(H)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(p,w,b){const E=[];w&&this._isMatch(p)&&E.push(this);let O=this.parent;for(;O;){if(O===b)return E;O._isMatch(p)&&E.push(O),O=O.parent}return E}isAncestorOf(p){return!1}findAncestor(p,w,b){return this.findAncestors(p,w,b)[0]}_isMatch(p){if(!p)return!1;if(typeof p=="function")return p(this);let w=p.replace(/ /g,"").split(","),b=w.length,E,O;for(E=0;E<b;E++)if(O=w[E],t.Util.isValidSelector(O)||(t.Util.warn('Selector "'+O+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),O.charAt(0)==="#"){if(this.id()===O.slice(1))return!0}else if(O.charAt(0)==="."){if(this.hasName(O.slice(1)))return!0}else if(this.className===O||this.nodeType===O)return!0;return!1}getLayer(){const p=this.getParent();return p?p.getLayer():null}getStage(){return this._getCache(m,this._getStage)}_getStage(){const p=this.getParent();return p?p.getStage():null}fire(p,w={},b){return w.target=w.target||this,b?this._fireAndBubble(p,w):this._fire(p,w),this}getAbsoluteTransform(p){return p?this._getAbsoluteTransform(p):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(p){let w;if(p)return w=new t.Transform,this._eachAncestorReverse(function(b){const E=b.transformsEnabled();E==="all"?w.multiply(b.getTransform()):E==="position"&&w.translate(b.x()-b.offsetX(),b.y()-b.offsetY())},p),w;{w=this._cache.get(l)||new t.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(w):w.reset();const b=this.transformsEnabled();if(b==="all")w.multiply(this.getTransform());else if(b==="position"){const E=this.attrs.x||0,O=this.attrs.y||0,D=this.attrs.offsetX||0,H=this.attrs.offsetY||0;w.translate(E-D,O-H)}return w.dirty=!1,w}}getAbsoluteScale(p){let w=this;for(;w;)w._isUnderCache&&(p=w),w=w.getParent();const E=this.getAbsoluteTransform(p).decompose();return{x:E.scaleX,y:E.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(C,this._getTransform)}_getTransform(){var p,w;const b=this._cache.get(C)||new t.Transform;b.reset();const E=this.x(),O=this.y(),D=r.Konva.getAngle(this.rotation()),H=(p=this.attrs.scaleX)!==null&&p!==void 0?p:1,U=(w=this.attrs.scaleY)!==null&&w!==void 0?w:1,z=this.attrs.skewX||0,et=this.attrs.skewY||0,q=this.attrs.offsetX||0,J=this.attrs.offsetY||0;return(E!==0||O!==0)&&b.translate(E,O),D!==0&&b.rotate(D),(z!==0||et!==0)&&b.skew(z,et),(H!==1||U!==1)&&b.scale(H,U),(q!==0||J!==0)&&b.translate(-1*q,-1*J),b.dirty=!1,b}clone(p){let w=t.Util.cloneObject(this.attrs),b,E,O,D,H;for(b in p)w[b]=p[b];const U=new this.constructor(w);for(b in this.eventListeners)for(E=this.eventListeners[b],O=E.length,D=0;D<O;D++)H=E[D],H.name.indexOf(u)<0&&(U.eventListeners[b]||(U.eventListeners[b]=[]),U.eventListeners[b].push(H));return U}_toKonvaCanvas(p){p=p||{};const w=this.getClientRect(),b=this.getStage(),E=p.x!==void 0?p.x:Math.floor(w.x),O=p.y!==void 0?p.y:Math.floor(w.y),D=p.pixelRatio||1,H=new i.SceneCanvas({width:p.width||Math.ceil(w.width)||(b?b.width():0),height:p.height||Math.ceil(w.height)||(b?b.height():0),pixelRatio:D}),U=H.getContext(),z=new i.SceneCanvas({width:H.width/H.pixelRatio+Math.abs(E),height:H.height/H.pixelRatio+Math.abs(O),pixelRatio:H.pixelRatio});return p.imageSmoothingEnabled===!1&&(U._context.imageSmoothingEnabled=!1),U.save(),(E||O)&&U.translate(-1*E,-1*O),this.drawScene(H,void 0,z),U.restore(),H}toCanvas(p){return this._toKonvaCanvas(p)._canvas}toDataURL(p){p=p||{};const w=p.mimeType||null,b=p.quality||null,E=this._toKonvaCanvas(p).toDataURL(w,b);return p.callback&&p.callback(E),E}toImage(p){return new Promise((w,b)=>{try{const E=p?.callback;E&&delete p.callback,t.Util._urlToImage(this.toDataURL(p),function(O){w(O),E?.(O)})}catch(E){b(E)}})}toBlob(p){return new Promise((w,b)=>{try{const E=p?.callback;E&&delete p.callback,this.toCanvas(p).toBlob(O=>{w(O),E?.(O)},p?.mimeType,p?.quality)}catch(E){b(E)}})}setSize(p){return this.width(p.width),this.height(p.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(p,w,b){let E=this.eventListeners[p],O,D,H;for(O=0;O<E.length;O++)if(D=E[O].name,H=E[O].handler,(D!=="konva"||w==="konva")&&(!w||D===w)&&(!b||b===H)){if(E.splice(O,1),E.length===0){delete this.eventListeners[p];break}O--}}_fireChangeEvent(p,w,b){this._fire(p+_,{oldVal:w,newVal:b})}addName(p){if(!this.hasName(p)){const w=this.name(),b=w?w+" "+p:p;this.name(b)}return this}hasName(p){if(!p)return!1;const w=this.name();return w?(w||"").split(/\s/g).indexOf(p)!==-1:!1}removeName(p){const w=(this.name()||"").split(/\s/g),b=w.indexOf(p);return b!==-1&&(w.splice(b,1),this.name(w.join(" "))),this}setAttr(p,w){const b=this[P+t.Util._capitalize(p)];return t.Util._isFunction(b)?b.call(this,w):this._setAttr(p,w),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const p=this.getLayer()||this.getStage();p?.batchDraw()}}_setAttr(p,w){const b=this.attrs[p];b===w&&!t.Util.isObject(w)||(w==null?delete this.attrs[p]:this.attrs[p]=w,this._shouldFireChangeEvents&&this._fireChangeEvent(p,b,w),this._requestDraw())}_setComponentAttr(p,w,b){let E;b!==void 0&&(E=this.attrs[p],E||(this.attrs[p]=this.getAttr(p)),this.attrs[p][w]=b,this._fireChangeEvent(p,E,b))}_fireAndBubble(p,w,b){if(w&&this.nodeType===f&&(w.target=this),!((p===v||p===S)&&(b&&(this===b||this.isAncestorOf&&this.isAncestorOf(b))||this.nodeType==="Stage"&&!b))){this._fire(p,w);const O=(p===v||p===S)&&b&&b.isAncestorOf&&b.isAncestorOf(this)&&!b.isAncestorOf(this.parent);(w&&!w.cancelBubble||!w)&&this.parent&&this.parent.isListening()&&!O&&(b&&b.parent?this._fireAndBubble.call(this.parent,p,w,b):this._fireAndBubble.call(this.parent,p,w))}}_getProtoListeners(p){var w,b,E;const O=(w=this._cache.get(a))!==null&&w!==void 0?w:{};let D=O?.[p];if(D===void 0){D=[];let H=Object.getPrototypeOf(this);for(;H;){const U=(E=(b=H.eventListeners)===null||b===void 0?void 0:b[p])!==null&&E!==void 0?E:[];D.push(...U),H=Object.getPrototypeOf(H)}O[p]=D,this._cache.set(a,O)}return D}_fire(p,w){w=w||{},w.currentTarget=this,w.type=p;const b=this._getProtoListeners(p);if(b)for(var E=0;E<b.length;E++)b[E].handler.call(this,w);const O=this.eventListeners[p];if(O)for(var E=0;E<O.length;E++)O[E].handler.call(this,w)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(p){const w=p?p.pointerId:void 0,b=this.getStage(),E=this.getAbsolutePosition();if(!b)return;const O=b._getPointerById(w)||b._changedPointerPositions[0]||E;n.DD._dragElements.set(this._id,{node:this,startPointerPos:O,offset:{x:O.x-E.x,y:O.y-E.y},dragStatus:"ready",pointerId:w})}startDrag(p,w=!0){n.DD._dragElements.has(this._id)||this._createDragElement(p);const b=n.DD._dragElements.get(this._id);b.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:p&&p.evt},w)}_setDragPosition(p,w){const b=this.getStage()._getPointerById(w.pointerId);if(!b)return;let E={x:b.x-w.offset.x,y:b.y-w.offset.y};const O=this.dragBoundFunc();if(O!==void 0){const D=O.call(this,E,p);D?E=D:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==E.x||this._lastPos.y!==E.y)&&(this.setAbsolutePosition(E),this._requestDraw()),this._lastPos=E}stopDrag(p){const w=n.DD._dragElements.get(this._id);w&&(w.dragStatus="stopped"),n.DD._endDragBefore(p),n.DD._endDragAfter(p)}setDraggable(p){this._setAttr("draggable",p),this._dragChange()}isDragging(){const p=n.DD._dragElements.get(this._id);return p?p.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(p){if(!(!(p.evt.button!==void 0)||r.Konva.dragButtons.indexOf(p.evt.button)>=0)||this.isDragging())return;let E=!1;n.DD._dragElements.forEach(O=>{this.isAncestorOf(O.node)&&(E=!0)}),E||this._createDragElement(p)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const w=n.DD._dragElements.get(this._id),b=w&&w.dragStatus==="dragging",E=w&&w.dragStatus==="ready";b?this.stopDrag():E&&n.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(p={x:0,y:0}){const w=this.getStage();if(!w)return!1;const b={x:-p.x,y:-p.y,width:w.width()+2*p.x,height:w.height()+2*p.y};return t.Util.haveIntersection(b,this.getClientRect())}static create(p,w){return t.Util._isString(p)&&(p=JSON.parse(p)),this._createNode(p,w)}static _createNode(p,w){let b=sr.prototype.getClassName.call(p),E=p.children,O,D,H;w&&(p.attrs.container=w),r.Konva[b]||(t.Util.warn('Can not find a node with class name "'+b+'". Fallback to "Shape".'),b="Shape");const U=r.Konva[b];if(O=new U(p.attrs),E)for(D=E.length,H=0;H<D;H++)O.add(sr._createNode(E[H]));return O}};qe.Node=x,x.prototype.nodeType="Node",x.prototype._attrsAffectingSize=[],x.prototype.eventListeners={},x.prototype.on.call(x.prototype,R,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(C),this._clearSelfAndDescendantCache(l)}),x.prototype.on.call(x.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(G)}),x.prototype.on.call(x.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(g)}),x.prototype.on.call(x.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const M=e.Factory.addGetterSetter;return M(x,"zIndex"),M(x,"absolutePosition"),M(x,"position"),M(x,"x",0,(0,s.getNumberValidator)()),M(x,"y",0,(0,s.getNumberValidator)()),M(x,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),M(x,"opacity",1,(0,s.getNumberValidator)()),M(x,"name","",(0,s.getStringValidator)()),M(x,"id","",(0,s.getStringValidator)()),M(x,"rotation",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(x,"scale",["x","y"]),M(x,"scaleX",1,(0,s.getNumberValidator)()),M(x,"scaleY",1,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(x,"skew",["x","y"]),M(x,"skewX",0,(0,s.getNumberValidator)()),M(x,"skewY",0,(0,s.getNumberValidator)()),e.Factory.addComponentsGetterSetter(x,"offset",["x","y"]),M(x,"offsetX",0,(0,s.getNumberValidator)()),M(x,"offsetY",0,(0,s.getNumberValidator)()),M(x,"dragDistance",void 0,(0,s.getNumberValidator)()),M(x,"width",0,(0,s.getNumberValidator)()),M(x,"height",0,(0,s.getNumberValidator)()),M(x,"listening",!0,(0,s.getBooleanValidator)()),M(x,"preventDefault",!0,(0,s.getBooleanValidator)()),M(x,"filters",void 0,function(L){return this._filterUpToDate=!1,L}),M(x,"visible",!0,(0,s.getBooleanValidator)()),M(x,"transformsEnabled","all",(0,s.getStringValidator)()),M(x,"size"),M(x,"dragBoundFunc"),M(x,"draggable",!1,(0,s.getBooleanValidator)()),e.Factory.backCompat(x,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),qe}var We={},ys;function Pn(){if(ys)return We;ys=1,Object.defineProperty(We,"__esModule",{value:!0}),We.Container=void 0;const t=ft(),e=Tt(),i=gt();let r=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const o=this.children||[],a=[];return o.forEach(function(l){s(l)&&a.push(l)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let a=0;a<s.length;a++)this.add(s[a]);return this}const o=s[0];return o.getParent()?(o.moveTo(this),this):(this._validateAdd(o),o.index=this.getChildren().length,o.parent=this,o._clearCaches(),this.getChildren().push(o),this._fire("add",{child:o}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const o=this._generalFind(s,!0);return o.length>0?o[0]:void 0}_generalFind(s,o){const a=[];return this._descendants(l=>{const c=l._isMatch(s);return c&&a.push(l),!!(c&&o)}),a}_descendants(s){let o=!1;const a=this.getChildren();for(const l of a){if(o=s(l),o)return!0;if(l.hasChildren()&&(o=l._descendants(s),o))return!0}return!1}toObject(){const s=e.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(o=>{s.children.push(o.toObject())}),s}isAncestorOf(s){let o=s.getParent();for(;o;){if(o._id===this._id)return!0;o=o.getParent()}return!1}clone(s){const o=e.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(a){o.add(a.clone())}),o}getAllIntersections(s){const o=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(s)&&o.push(a)}),o}_clearSelfAndDescendantCache(s){var o;super._clearSelfAndDescendantCache(s),!this.isCached()&&((o=this.children)===null||o===void 0||o.forEach(function(a){a._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(o,a){o.index=a}),this._requestDraw()}drawScene(s,o,a){const l=this.getLayer(),c=s||l&&l.getCanvas(),h=c&&c.getContext(),_=this._getCanvasCache(),y=_&&_.scene,u=c&&c.isCache;if(!this.isVisible()&&!u)return this;if(y){h.save();const g=this.getAbsoluteTransform(o).getMatrix();h.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",c,o,a);return this}drawHit(s,o){if(!this.shouldDrawHit(o))return this;const a=this.getLayer(),l=s||a&&a.hitCanvas,c=l&&l.getContext(),h=this._getCanvasCache();if(h&&h.hit){c.save();const y=this.getAbsoluteTransform(o).getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedHitCanvas(c),c.restore()}else this._drawChildren("drawHit",l,o);return this}_drawChildren(s,o,a,l){var c;const h=o&&o.getContext(),_=this.clipWidth(),y=this.clipHeight(),u=this.clipFunc(),g=typeof _=="number"&&typeof y=="number"||u,v=a===this;if(g){h.save();const P=this.getAbsoluteTransform(a);let f=P.getMatrix();h.transform(f[0],f[1],f[2],f[3],f[4],f[5]),h.beginPath();let d;if(u)d=u.call(this,h,this);else{const m=this.clipX(),C=this.clipY();h.rect(m||0,C||0,_,y)}h.clip.apply(h,d),f=P.copy().invert().getMatrix(),h.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const S=!v&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";S&&(h.save(),h._applyGlobalCompositeOperation(this)),(c=this.children)===null||c===void 0||c.forEach(function(P){P[s](o,a,l)}),S&&h.restore(),g&&h.restore()}getClientRect(s={}){var o;const a=s.skipTransform,l=s.relativeTo;let c,h,_,y,u={x:1/0,y:1/0,width:0,height:0};const g=this;(o=this.children)===null||o===void 0||o.forEach(function(P){if(!P.visible())return;const f=P.getClientRect({relativeTo:g,skipShadow:s.skipShadow,skipStroke:s.skipStroke});f.width===0&&f.height===0||(c===void 0?(c=f.x,h=f.y,_=f.x+f.width,y=f.y+f.height):(c=Math.min(c,f.x),h=Math.min(h,f.y),_=Math.max(_,f.x+f.width),y=Math.max(y,f.y+f.height)))});const v=this.find("Shape");let S=!1;for(let P=0;P<v.length;P++)if(v[P]._isVisible(this)){S=!0;break}return S&&c!==void 0?u={x:c,y:h,width:_-c,height:y-h}:u={x:0,y:0,width:0,height:0},a?u:this._transformedRect(u,l)}};return We.Container=r,t.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(r,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipFunc"),We}var qn={},ge={},vs;function Ca(){if(vs)return ge;vs=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.getCapturedShape=r,ge.createEvent=n,ge.hasPointerCapture=s,ge.setPointerCapture=o,ge.releaseCapture=a;const t=ut(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function r(l){return e.get(l)}function n(l){return{evt:l,pointerId:l.pointerId}}function s(l,c){return e.get(l)===c}function o(l,c){a(l),c.getStage()&&(e.set(l,c),i&&c._fire("gotpointercapture",n(new PointerEvent("gotpointercapture"))))}function a(l,c){const h=e.get(l);if(!h)return;const _=h.getStage();_&&_.content,e.delete(l),i&&h._fire("lostpointercapture",n(new PointerEvent("lostpointercapture")))}return ge}var bs;function dc(){return bs||(bs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=Pt(),i=ft(),r=Pn(),n=ut(),s=xn(),o=Ar(),a=ut(),l=Ca(),c="Stage",h="string",_="px",y="mouseout",u="mouseleave",g="mouseover",v="mouseenter",S="mousemove",P="mousedown",f="mouseup",d="pointermove",m="pointerdown",C="pointerup",A="pointercancel",G="lostpointercapture",R="pointerout",T="pointerleave",x="pointerover",M="pointerenter",L="contextmenu",p="touchstart",w="touchend",b="touchmove",E="touchcancel",O="wheel",D=5,H=[[v,"_pointerenter"],[P,"_pointerdown"],[S,"_pointermove"],[f,"_pointerup"],[u,"_pointerleave"],[p,"_pointerdown"],[b,"_pointermove"],[w,"_pointerup"],[E,"_pointercancel"],[g,"_pointerover"],[O,"_wheel"],[L,"_contextmenu"],[m,"_pointerdown"],[d,"_pointermove"],[C,"_pointerup"],[A,"_pointercancel"],[G,"_lostpointercapture"]],U={mouse:{[R]:y,[T]:u,[x]:g,[M]:v,[d]:S,[m]:P,[C]:f,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[R]:"touchout",[T]:"touchleave",[x]:"touchover",[M]:"touchenter",[d]:b,[m]:p,[C]:w,[A]:E,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[R]:R,[T]:T,[x]:x,[M]:M,[d]:d,[m]:m,[C]:C,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},z=rt=>rt.indexOf("pointer")>=0?"pointer":rt.indexOf("touch")>=0?"touch":"mouse",et=rt=>{const N=z(rt);if(N==="pointer")return n.Konva.pointerEventsEnabled&&U.pointer;if(N==="touch")return U.touch;if(N==="mouse")return U.mouse};function q(rt={}){return(rt.clipFunc||rt.clipWidth||rt.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),rt}const J="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class nt extends r.Container{constructor(N){super(q(N)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{q(this.attrs)}),this._checkVisibility()}_validateAdd(N){const B=N.getType()==="Layer",X=N.getType()==="FastLayer";B||X||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const N=this.visible()?"":"none";this.content.style.display=N}setContainer(N){if(typeof N===h){if(N.charAt(0)==="."){const X=N.slice(1);N=document.getElementsByClassName(X)[0]}else{var B;N.charAt(0)!=="#"?B=N:B=N.slice(1),N=document.getElementById(B)}if(!N)throw"Can not find container in document with id "+B}return this._setAttr("container",N),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),N.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const N=this.children,B=N.length;for(let X=0;X<B;X++)N[X].clear();return this}clone(N){return N||(N={}),N.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,N)}destroy(){super.destroy();const N=this.content;N&&e.Util._isInDocument(N)&&this.container().removeChild(N);const B=t.stages.indexOf(this);return B>-1&&t.stages.splice(B,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const N=this._pointerPositions[0]||this._changedPointerPositions[0];return N?{x:N.x,y:N.y}:(e.Util.warn(J),null)}_getPointerById(N){return this._pointerPositions.find(B=>B.id===N)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(N){N=N||{},N.x=N.x||0,N.y=N.y||0,N.width=N.width||this.width(),N.height=N.height||this.height();const B=new s.SceneCanvas({width:N.width,height:N.height,pixelRatio:N.pixelRatio||1}),X=B.getContext()._context,Q=this.children;return(N.x||N.y)&&X.translate(-1*N.x,-1*N.y),Q.forEach(function(st){if(!st.isVisible())return;const F=st._toKonvaCanvas(N);X.drawImage(F._canvas,N.x,N.y,F.getWidth()/F.getPixelRatio(),F.getHeight()/F.getPixelRatio())}),B}getIntersection(N){if(!N)return null;const B=this.children,X=B.length,Q=X-1;for(let st=Q;st>=0;st--){const F=B[st].getIntersection(N);if(F)return F}return null}_resizeDOM(){const N=this.width(),B=this.height();this.content&&(this.content.style.width=N+_,this.content.style.height=B+_),this.bufferCanvas.setSize(N,B),this.bufferHitCanvas.setSize(N,B),this.children.forEach(X=>{X.setSize({width:N,height:B}),X.draw()})}add(N,...B){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}super.add(N);const X=this.children.length;return X>D&&e.Util.warn("The stage has "+X+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),N.setSize({width:this.width(),height:this.height()}),N.draw(),n.Konva.isBrowser&&this.content.appendChild(N.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(N){return l.hasPointerCapture(N,this)}setPointerCapture(N){l.setPointerCapture(N,this)}releaseCapture(N){l.releaseCapture(N,this)}getLayers(){return this.children}_bindContentEvents(){n.Konva.isBrowser&&H.forEach(([N,B])=>{this.content.addEventListener(N,X=>{this[B](X)},{passive:!1})})}_pointerenter(N){this.setPointersPositions(N);const B=et(N.type);B&&this._fire(B.pointerenter,{evt:N,target:this,currentTarget:this})}_pointerover(N){this.setPointersPositions(N);const B=et(N.type);B&&this._fire(B.pointerover,{evt:N,target:this,currentTarget:this})}_getTargetShape(N){let B=this[N+"targetShape"];return B&&!B.getStage()&&(B=null),B}_pointerleave(N){const B=et(N.type),X=z(N.type);if(!B)return;this.setPointersPositions(N);const Q=this._getTargetShape(X),st=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;Q&&st?(Q._fireAndBubble(B.pointerout,{evt:N}),Q._fireAndBubble(B.pointerleave,{evt:N}),this._fire(B.pointerleave,{evt:N,target:this,currentTarget:this}),this[X+"targetShape"]=null):st&&(this._fire(B.pointerleave,{evt:N,target:this,currentTarget:this}),this._fire(B.pointerout,{evt:N,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(N){const B=et(N.type),X=z(N.type);if(!B)return;this.setPointersPositions(N);let Q=!1;this._changedPointerPositions.forEach(st=>{const F=this.getIntersection(st);if(o.DD.justDragged=!1,n.Konva["_"+X+"ListenClick"]=!0,!F||!F.isListening()){this[X+"ClickStartShape"]=void 0;return}n.Konva.capturePointerEventsEnabled&&F.setPointerCapture(st.id),this[X+"ClickStartShape"]=F,F._fireAndBubble(B.pointerdown,{evt:N,pointerId:st.id}),Q=!0;const k=N.type.indexOf("touch")>=0;F.preventDefault()&&N.cancelable&&k&&N.preventDefault()}),Q||this._fire(B.pointerdown,{evt:N,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(N){const B=et(N.type),X=z(N.type);if(!B||(n.Konva.isDragging()&&o.DD.node.preventDefault()&&N.cancelable&&N.preventDefault(),this.setPointersPositions(N),!(!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled)))return;const st={};let F=!1;const k=this._getTargetShape(X);this._changedPointerPositions.forEach(I=>{const V=l.getCapturedShape(I.id)||this.getIntersection(I),j=I.id,W={evt:N,pointerId:j},Y=k!==V;if(Y&&k&&(k._fireAndBubble(B.pointerout,{...W},V),k._fireAndBubble(B.pointerleave,{...W},V)),V){if(st[V._id])return;st[V._id]=!0}V&&V.isListening()?(F=!0,Y&&(V._fireAndBubble(B.pointerover,{...W},k),V._fireAndBubble(B.pointerenter,{...W},k),this[X+"targetShape"]=V),V._fireAndBubble(B.pointermove,{...W})):k&&(this._fire(B.pointerover,{evt:N,target:this,currentTarget:this,pointerId:j}),this[X+"targetShape"]=null)}),F||this._fire(B.pointermove,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(N){const B=et(N.type),X=z(N.type);if(!B)return;this.setPointersPositions(N);const Q=this[X+"ClickStartShape"],st=this[X+"ClickEndShape"],F={};let k=!1;this._changedPointerPositions.forEach(I=>{const V=l.getCapturedShape(I.id)||this.getIntersection(I);if(V){if(V.releaseCapture(I.id),F[V._id])return;F[V._id]=!0}const j=I.id,W={evt:N,pointerId:j};let Y=!1;n.Konva["_"+X+"InDblClickWindow"]?(Y=!0,clearTimeout(this[X+"DblTimeout"])):o.DD.justDragged||(n.Konva["_"+X+"InDblClickWindow"]=!0,clearTimeout(this[X+"DblTimeout"])),this[X+"DblTimeout"]=setTimeout(function(){n.Konva["_"+X+"InDblClickWindow"]=!1},n.Konva.dblClickWindow),V&&V.isListening()?(k=!0,this[X+"ClickEndShape"]=V,V._fireAndBubble(B.pointerup,{...W}),n.Konva["_"+X+"ListenClick"]&&Q&&Q===V&&(V._fireAndBubble(B.pointerclick,{...W}),Y&&st&&st===V&&V._fireAndBubble(B.pointerdblclick,{...W}))):(this[X+"ClickEndShape"]=null,n.Konva["_"+X+"ListenClick"]&&this._fire(B.pointerclick,{evt:N,target:this,currentTarget:this,pointerId:j}),Y&&this._fire(B.pointerdblclick,{evt:N,target:this,currentTarget:this,pointerId:j}))}),k||this._fire(B.pointerup,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n.Konva["_"+X+"ListenClick"]=!1,N.cancelable&&X!=="touch"&&X!=="pointer"&&N.preventDefault()}_contextmenu(N){this.setPointersPositions(N);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(L,{evt:N}):this._fire(L,{evt:N,target:this,currentTarget:this})}_wheel(N){this.setPointersPositions(N);const B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(O,{evt:N}):this._fire(O,{evt:N,target:this,currentTarget:this})}_pointercancel(N){this.setPointersPositions(N);const B=l.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(C,l.createEvent(N)),l.releaseCapture(N.pointerId)}_lostpointercapture(N){l.releaseCapture(N.pointerId)}setPointersPositions(N){const B=this._getContentPosition();let X=null,Q=null;N=N||window.event,N.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(N.touches,st=>{this._pointerPositions.push({id:st.identifier,x:(st.clientX-B.left)/B.scaleX,y:(st.clientY-B.top)/B.scaleY})}),Array.prototype.forEach.call(N.changedTouches||N.touches,st=>{this._changedPointerPositions.push({id:st.identifier,x:(st.clientX-B.left)/B.scaleX,y:(st.clientY-B.top)/B.scaleY})})):(X=(N.clientX-B.left)/B.scaleX,Q=(N.clientY-B.top)/B.scaleY,this.pointerPos={x:X,y:Q},this._pointerPositions=[{x:X,y:Q,id:e.Util._getFirstPointerId(N)}],this._changedPointerPositions=[{x:X,y:Q,id:e.Util._getFirstPointerId(N)}])}_setPointerPosition(N){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(N)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const N=this.content.getBoundingClientRect();return{top:N.top,left:N.left,scaleX:N.width/this.content.clientWidth||1,scaleY:N.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!n.Konva.isBrowser)return;const N=this.container();if(!N)throw"Stage has no container. A container is required.";N.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),N.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(N){N.batchDraw()}),this}}t.Stage=nt,nt.prototype.nodeType=c,(0,a._registerNode)(nt),i.Factory.addGetterSetter(nt,"container"),n.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(rt=>{rt.batchDraw()})})}(qn)),qn}var je={},Wn={},Ss;function Ft(){return Ss||(Ss=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=ut(),i=Pt(),r=ft(),n=Tt(),s=gt(),o=ut(),a=Ca(),l="hasShadow",c="shadowRGBA",h="patternImage",_="linearGradient",y="radialGradient";let u;function g(){return u||(u=i.Util.createCanvasElement().getContext("2d"),u)}t.shapes={};function v(T){const x=this.attrs.fillRule;x?T.fill(x):T.fill()}function S(T){T.stroke()}function P(T){const x=this.attrs.fillRule;x?T.fill(x):T.fill()}function f(T){T.stroke()}function d(){this._clearCache(l)}function m(){this._clearCache(c)}function C(){this._clearCache(h)}function A(){this._clearCache(_)}function G(){this._clearCache(y)}class R extends n.Node{constructor(x){super(x);let M;for(;M=i.Util.getRandomColor(),!(M&&!(M in t.shapes)););this.colorKey=M,t.shapes[M]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(h,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const M=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(M&&M.setTransform){const L=new i.Transform;L.translate(this.fillPatternX(),this.fillPatternY()),L.rotate(e.Konva.getAngle(this.fillPatternRotation())),L.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),L.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const p=L.getMatrix(),w=typeof DOMMatrix>"u"?{a:p[0],b:p[1],c:p[2],d:p[3],e:p[4],f:p[5]}:new DOMMatrix(p);M.setTransform(w)}return M}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){const x=this.fillLinearGradientColorStops();if(x){const M=g(),L=this.fillLinearGradientStartPoint(),p=this.fillLinearGradientEndPoint(),w=M.createLinearGradient(L.x,L.y,p.x,p.y);for(let b=0;b<x.length;b+=2)w.addColorStop(x[b],x[b+1]);return w}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){const x=this.fillRadialGradientColorStops();if(x){const M=g(),L=this.fillRadialGradientStartPoint(),p=this.fillRadialGradientEndPoint(),w=M.createRadialGradient(L.x,L.y,this.fillRadialGradientStartRadius(),p.x,p.y,this.fillRadialGradientEndRadius());for(let b=0;b<x.length;b+=2)w.addColorStop(x[b],x[b+1]);return w}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const x=i.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){const M=this.getStage();if(!M)return!1;const L=M.bufferHitCanvas;return L.getContext().clear(),this.drawHit(L,void 0,!0),L.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data[3]>0}destroy(){return n.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var M;if(!((M=this.attrs.perfectDrawEnabled)!==null&&M!==void 0?M:!0))return!1;const p=x||this.hasFill(),w=this.hasStroke(),b=this.getAbsoluteOpacity()!==1;if(p&&w&&b)return!0;const E=this.hasShadow(),O=this.shadowForStrokeEnabled();return!!(p&&w&&E&&O)}setStrokeHitEnabled(x){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){let M=!1,L=this.getParent();for(;L;){if(L.isCached()){M=!0;break}L=L.getParent()}const p=x.skipTransform,w=x.relativeTo||M&&this.getStage()||void 0,b=this.getSelfRect(),O=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,D=b.width+O,H=b.height+O,U=!x.skipShadow&&this.hasShadow(),z=U?this.shadowOffsetX():0,et=U?this.shadowOffsetY():0,q=D+Math.abs(z),J=H+Math.abs(et),nt=U&&this.shadowBlur()||0,rt=q+nt*2,N=J+nt*2,B={width:rt,height:N,x:-(O/2+nt)+Math.min(z,0)+b.x,y:-(O/2+nt)+Math.min(et,0)+b.y};return p?B:this._transformedRect(B,w)}drawScene(x,M,L){const p=this.getLayer();let w=x||p.getCanvas(),b=w.getContext(),E=this._getCanvasCache(),O=this.getSceneFunc(),D=this.hasShadow(),H,U;const z=w.isCache,et=M===this;if(!this.isVisible()&&!et)return this;if(E){b.save();const J=this.getAbsoluteTransform(M).getMatrix();return b.transform(J[0],J[1],J[2],J[3],J[4],J[5]),this._drawCachedSceneCanvas(b),b.restore(),this}if(!O)return this;if(b.save(),this._useBufferCanvas()&&!z){H=this.getStage();const J=L||H.bufferCanvas;U=J.getContext(),U.clear(),U.save(),U._applyLineJoin(this);var q=this.getAbsoluteTransform(M).getMatrix();U.transform(q[0],q[1],q[2],q[3],q[4],q[5]),O.call(this,U,this),U.restore();const nt=J.pixelRatio;D&&b._applyShadow(this),b._applyOpacity(this),b._applyGlobalCompositeOperation(this),b.drawImage(J._canvas,0,0,J.width/nt,J.height/nt)}else{if(b._applyLineJoin(this),!et){var q=this.getAbsoluteTransform(M).getMatrix();b.transform(q[0],q[1],q[2],q[3],q[4],q[5]),b._applyOpacity(this),b._applyGlobalCompositeOperation(this)}D&&b._applyShadow(this),O.call(this,b,this)}return b.restore(),this}drawHit(x,M,L=!1){if(!this.shouldDrawHit(M,L))return this;const p=this.getLayer(),w=x||p.hitCanvas,b=w&&w.getContext(),E=this.hitFunc()||this.sceneFunc(),O=this._getCanvasCache(),D=O&&O.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),D){b.save();const U=this.getAbsoluteTransform(M).getMatrix();return b.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedHitCanvas(b),b.restore(),this}if(!E)return this;if(b.save(),b._applyLineJoin(this),!(this===M)){const U=this.getAbsoluteTransform(M).getMatrix();b.transform(U[0],U[1],U[2],U[3],U[4],U[5])}return E.call(this,b,this),b.restore(),this}drawHitFromCache(x=0){const M=this._getCanvasCache(),L=this._getCachedSceneCanvas(),p=M.hit,w=p.getContext(),b=p.getWidth(),E=p.getHeight();w.clear(),w.drawImage(L._canvas,0,0,b,E);try{const O=w.getImageData(0,0,b,E),D=O.data,H=D.length,U=i.Util._hexToRgb(this.colorKey);for(let z=0;z<H;z+=4)D[z+3]>x?(D[z]=U.r,D[z+1]=U.g,D[z+2]=U.b,D[z+3]=255):D[z+3]=0;w.putImageData(O,0,0)}catch(O){i.Util.error("Unable to draw hit graph from cached scene canvas. "+O.message)}return this}hasPointerCapture(x){return a.hasPointerCapture(x,this)}setPointerCapture(x){a.setPointerCapture(x,this)}releaseCapture(x){a.releaseCapture(x,this)}}t.Shape=R,R.prototype._fillFunc=v,R.prototype._strokeFunc=S,R.prototype._fillFuncHit=P,R.prototype._strokeFuncHit=f,R.prototype._centroid=!1,R.prototype.nodeType="Shape",(0,o._registerNode)(R),R.prototype.eventListeners={},R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d),R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",G),r.Factory.addGetterSetter(R,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(R,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(R,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(R,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(R,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(R,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(R,"lineJoin"),r.Factory.addGetterSetter(R,"lineCap"),r.Factory.addGetterSetter(R,"sceneFunc"),r.Factory.addGetterSetter(R,"hitFunc"),r.Factory.addGetterSetter(R,"dash"),r.Factory.addGetterSetter(R,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(R,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(R,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternImage"),r.Factory.addGetterSetter(R,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(R,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(R,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(R,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(R,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(R,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(R,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(R,"fillEnabled",!0),r.Factory.addGetterSetter(R,"strokeEnabled",!0),r.Factory.addGetterSetter(R,"shadowEnabled",!0),r.Factory.addGetterSetter(R,"dashEnabled",!0),r.Factory.addGetterSetter(R,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(R,"fillPriority","color"),r.Factory.addComponentsGetterSetter(R,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(R,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(R,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(R,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(R,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(R,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(R,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(R,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(R,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(R,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(R,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(R,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(R,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(R,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(R,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(R,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(R,"fillPatternRotation",0),r.Factory.addGetterSetter(R,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(R,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Wn)),Wn}var Cs;function wa(){if(Cs)return je;Cs=1,Object.defineProperty(je,"__esModule",{value:!0}),je.Layer=void 0;const t=Pt(),e=Pn(),i=Tt(),r=ft(),n=xn(),s=gt(),o=Ft(),a=ut(),l="#",c="beforeDraw",h="draw",_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],y=_.length;let u=class extends e.Container{constructor(v){super(v),this.canvas=new n.SceneCanvas,this.hitCanvas=new n.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(v){return this.getContext().clear(v),this.getHitCanvas().getContext().clear(v),this}setZIndex(v){super.setZIndex(v);const S=this.getStage();return S&&S.content&&(S.content.removeChild(this.getNativeCanvasElement()),v<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[v+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const S=this.getStage();return!S||!S.content?!1:(S.content.removeChild(this.getNativeCanvasElement()),this.index<S.children.length-1?S.content.insertBefore(this.getNativeCanvasElement(),S.children[this.index+1].getCanvas()._canvas):S.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const v=this.getStage();if(v){const S=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),S[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const v=this.getStage();if(v){const S=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),S[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const v=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),v&&v.parentNode&&t.Util._isInDocument(v)&&v.parentNode.removeChild(v),this}getStage(){return this.parent}setSize({width:v,height:S}){return this.canvas.setSize(v,S),this.hitCanvas.setSize(v,S),this._setSmoothEnabled(),this}_validateAdd(v){const S=v.getType();S!=="Group"&&S!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(v){return v=v||{},v.width=v.width||this.getWidth(),v.height=v.height||this.getHeight(),v.x=v.x!==void 0?v.x:this.x(),v.y=v.y!==void 0?v.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,v)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(v){if(!this.isListening()||!this.isVisible())return null;let S=1,P=!1;for(;;){for(let f=0;f<y;f++){const d=_[f],m=this._getIntersection({x:v.x+d.x*S,y:v.y+d.y*S}),C=m.shape;if(C)return C;if(P=!!m.antialiased,!m.antialiased)break}if(P)S+=1;else return null}}_getIntersection(v){const S=this.hitCanvas.pixelRatio,P=this.hitCanvas.context.getImageData(Math.round(v.x*S),Math.round(v.y*S),1,1).data,f=P[3];if(f===255){const d=t.Util._rgbToHex(P[0],P[1],P[2]),m=o.shapes[l+d];return m?{shape:m}:{antialiased:!0}}else if(f>0)return{antialiased:!0};return{}}drawScene(v,S){const P=this.getLayer(),f=v||P&&P.getCanvas();return this._fire(c,{node:this}),this.clearBeforeDraw()&&f.getContext().clear(),e.Container.prototype.drawScene.call(this,f,S),this._fire(h,{node:this}),this}drawHit(v,S){const P=this.getLayer(),f=v||P&&P.hitCanvas;return P&&P.clearBeforeDraw()&&P.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,f,S),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(v){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(v)}getHitGraphEnabled(v){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const v=this.parent;!!this.hitCanvas._canvas.parentNode?v.content.removeChild(this.hitCanvas._canvas):v.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return je.Layer=u,u.prototype.nodeType="Layer",(0,a._registerNode)(u),r.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(u,"clearBeforeDraw",!0),r.Factory.addGetterSetter(u,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),je}var ze={},ws;function uc(){if(ws)return ze;ws=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.FastLayer=void 0;const t=Pt(),e=wa(),i=ut();let r=class extends e.Layer{constructor(s){super(s),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return ze.FastLayer=r,r.prototype.nodeType="FastLayer",(0,i._registerNode)(r),ze}var Ke={},xs;function Rr(){if(xs)return Ke;xs=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.Group=void 0;const t=Pt(),e=Pn(),i=ut();let r=class extends e.Container{_validateAdd(s){const o=s.getType();o!=="Group"&&o!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return Ke.Group=r,r.prototype.nodeType="Group",(0,i._registerNode)(r),Ke}var Ye={},Ps;function Er(){if(Ps)return Ye;Ps=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.Animation=void 0;const t=ut(),e=Pt(),i=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class Me{constructor(s,o){this.id=Me.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=s,this.setLayers(o)}setLayers(s){let o=[];return s&&(o=Array.isArray(s)?s:[s]),this.layers=o,this}getLayers(){return this.layers}addLayer(s){const o=this.layers,a=o.length;for(let l=0;l<a;l++)if(o[l]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const o=Me.animations,a=o.length;for(let l=0;l<a;l++)if(o[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),Me._addAnimation(this),this}stop(){return Me._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const o=s.id,a=this.animations,l=a.length;for(let c=0;c<l;c++)if(a[c].id===o){this.animations.splice(c,1);break}}static _runFrames(){const s={},o=this.animations;for(let a=0;a<o.length;a++){const l=o[a],c=l.layers,h=l.func;l._updateFrameObject(i());const _=c.length;let y;if(h?y=h.call(l,l.frame)!==!1:y=!0,!!y)for(let u=0;u<_;u++){const g=c[u];g._id!==void 0&&(s[g._id]=g)}}for(const a in s)s.hasOwnProperty(a)&&s[a].batchDraw()}static _animationLoop(){const s=Me;s.animations.length?(s._runFrames(),e.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Ye.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,Ye}var jn={},Ts;function fc(){return Ts||(Ts=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=Pt(),i=Er(),r=Tt(),n=ut(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,c=["fill","stroke","shadowColor"];let h=0;class _{constructor(g,v,S,P,f,d,m){this.prop=g,this.propFunc=v,this.begin=P,this._pos=P,this.duration=d,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=S,this._change=f-this.begin,this.pause()}fire(g){const v=this[g];v&&v()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===a?this.setTime(g):this.state===l&&this.setTime(this.duration-g)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(g){const v=this,S=g.node,P=S._id,f=g.easing||t.Easings.Linear,d=!!g.yoyo;let m,C;typeof g.duration>"u"?m=.3:g.duration===0?m=.001:m=g.duration,this.node=S,this._id=h++;const A=S.getLayer()||(S instanceof n.Konva.Stage?S.getLayers():null);A||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){v.tween.onEnterFrame()},A),this.tween=new _(C,function(G){v._tweenFunc(G)},f,0,1,m*1e3,d),this._addListeners(),y.attrs[P]||(y.attrs[P]={}),y.attrs[P][this._id]||(y.attrs[P][this._id]={}),y.tweens[P]||(y.tweens[P]={});for(C in g)s[C]===void 0&&this._addAttr(C,g[C]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,v){const S=this.node,P=S._id;let f,d,m,C,A;const G=y.tweens[P][g];G&&delete y.attrs[P][G][g];let R=S.getAttr(g);if(e.Util._isArray(v))if(f=[],d=Math.max(v.length,R.length),g==="points"&&v.length!==R.length&&(v.length>R.length?(C=R,R=e.Util._prepareArrayForTween(R,v,S.closed())):(m=v,v=e.Util._prepareArrayForTween(v,R,S.closed()))),g.indexOf("fill")===0)for(let T=0;T<d;T++)if(T%2===0)f.push(v[T]-R[T]);else{const x=e.Util.colorToRGBA(R[T]);A=e.Util.colorToRGBA(v[T]),R[T]=x,f.push({r:A.r-x.r,g:A.g-x.g,b:A.b-x.b,a:A.a-x.a})}else for(let T=0;T<d;T++)f.push(v[T]-R[T]);else c.indexOf(g)!==-1?(R=e.Util.colorToRGBA(R),A=e.Util.colorToRGBA(v),f={r:A.r-R.r,g:A.g-R.g,b:A.b-R.b,a:A.a-R.a}):f=v-R;y.attrs[P][this._id][g]={start:R,diff:f,end:v,trueEnd:m,trueStart:C},y.tweens[P][g]=this._id}_tweenFunc(g){const v=this.node,S=y.attrs[v._id][this._id];let P,f,d,m,C,A,G,R;for(P in S){if(f=S[P],d=f.start,m=f.diff,R=f.end,e.Util._isArray(d))if(C=[],G=Math.max(d.length,R.length),P.indexOf("fill")===0)for(A=0;A<G;A++)A%2===0?C.push((d[A]||0)+m[A]*g):C.push("rgba("+Math.round(d[A].r+m[A].r*g)+","+Math.round(d[A].g+m[A].g*g)+","+Math.round(d[A].b+m[A].b*g)+","+(d[A].a+m[A].a*g)+")");else for(A=0;A<G;A++)C.push((d[A]||0)+m[A]*g);else c.indexOf(P)!==-1?C="rgba("+Math.round(d.r+m.r*g)+","+Math.round(d.g+m.g*g)+","+Math.round(d.b+m.b*g)+","+(d.a+m.a*g)+")":C=d+m*g;v.setAttr(P,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,v=y.attrs[g._id][this._id];v.points&&v.points.trueEnd&&g.setAttr("points",v.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,v=y.attrs[g._id][this._id];v.points&&v.points.trueStart&&g.points(v.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,v=this._id,S=y.tweens[g];this.pause();for(const P in S)delete y.tweens[g][P];delete y.attrs[g][v]}}t.Tween=y,y.attrs={},y.tweens={},r.Node.prototype.to=function(u){const g=u.onFinish;u.node=this,u.onFinish=function(){this.destroy(),g&&g()},new y(u).play()},t.Easings={BackEaseIn(u,g,v,S){return v*(u/=S)*u*((1.70158+1)*u-1.70158)+g},BackEaseOut(u,g,v,S){return v*((u=u/S-1)*u*((1.70158+1)*u+1.70158)+1)+g},BackEaseInOut(u,g,v,S){let P=1.70158;return(u/=S/2)<1?v/2*(u*u*(((P*=1.525)+1)*u-P))+g:v/2*((u-=2)*u*(((P*=1.525)+1)*u+P)+2)+g},ElasticEaseIn(u,g,v,S,P,f){let d=0;return u===0?g:(u/=S)===1?g+v:(f||(f=S*.3),!P||P<Math.abs(v)?(P=v,d=f/4):d=f/(2*Math.PI)*Math.asin(v/P),-(P*Math.pow(2,10*(u-=1))*Math.sin((u*S-d)*(2*Math.PI)/f))+g)},ElasticEaseOut(u,g,v,S,P,f){let d=0;return u===0?g:(u/=S)===1?g+v:(f||(f=S*.3),!P||P<Math.abs(v)?(P=v,d=f/4):d=f/(2*Math.PI)*Math.asin(v/P),P*Math.pow(2,-10*u)*Math.sin((u*S-d)*(2*Math.PI)/f)+v+g)},ElasticEaseInOut(u,g,v,S,P,f){let d=0;return u===0?g:(u/=S/2)===2?g+v:(f||(f=S*(.3*1.5)),!P||P<Math.abs(v)?(P=v,d=f/4):d=f/(2*Math.PI)*Math.asin(v/P),u<1?-.5*(P*Math.pow(2,10*(u-=1))*Math.sin((u*S-d)*(2*Math.PI)/f))+g:P*Math.pow(2,-10*(u-=1))*Math.sin((u*S-d)*(2*Math.PI)/f)*.5+v+g)},BounceEaseOut(u,g,v,S){return(u/=S)<1/2.75?v*(7.5625*u*u)+g:u<2/2.75?v*(7.5625*(u-=1.5/2.75)*u+.75)+g:u<2.5/2.75?v*(7.5625*(u-=2.25/2.75)*u+.9375)+g:v*(7.5625*(u-=2.625/2.75)*u+.984375)+g},BounceEaseIn(u,g,v,S){return v-t.Easings.BounceEaseOut(S-u,0,v,S)+g},BounceEaseInOut(u,g,v,S){return u<S/2?t.Easings.BounceEaseIn(u*2,0,v,S)*.5+g:t.Easings.BounceEaseOut(u*2-S,0,v,S)*.5+v*.5+g},EaseIn(u,g,v,S){return v*(u/=S)*u+g},EaseOut(u,g,v,S){return-v*(u/=S)*(u-2)+g},EaseInOut(u,g,v,S){return(u/=S/2)<1?v/2*u*u+g:-v/2*(--u*(u-2)-1)+g},StrongEaseIn(u,g,v,S){return v*(u/=S)*u*u*u*u+g},StrongEaseOut(u,g,v,S){return v*((u=u/S-1)*u*u*u*u+1)+g},StrongEaseInOut(u,g,v,S){return(u/=S/2)<1?v/2*u*u*u*u*u+g:v/2*((u-=2)*u*u*u*u+2)+g},Linear(u,g,v,S){return v*u/S+g}}}(jn)),jn}var As;function gc(){return As||(As=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=ut(),i=Pt(),r=Tt(),n=Pn(),s=dc(),o=wa(),a=uc(),l=Rr(),c=Ar(),h=Ft(),_=Er(),y=fc(),u=Sa(),g=xn();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:r.Node,Container:n.Container,Stage:s.Stage,stages:s.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:c.DD,Shape:h.Shape,shapes:h.shapes,Animation:_.Animation,Tween:y.Tween,Easings:y.Easings,Context:u.Context,Canvas:g.Canvas}),t.default=t.Konva}(In)),In}var Xe={},Rs;function pc(){if(Rs)return Xe;Rs=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.Arc=void 0;const t=ft(),e=Ft(),i=ut(),r=gt(),n=ut();let s=class extends e.Shape{_sceneFunc(a){const l=i.Konva.getAngle(this.angle()),c=this.clockwise();a.beginPath(),a.arc(0,0,this.outerRadius(),0,l,c),a.arc(0,0,this.innerRadius(),l,0,!c),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}getSelfRect(){const a=this.innerRadius(),l=this.outerRadius(),c=this.clockwise(),h=i.Konva.getAngle(c?360-this.angle():this.angle()),_=Math.cos(Math.min(h,Math.PI)),y=1,u=Math.sin(Math.min(Math.max(Math.PI,h),3*Math.PI/2)),g=Math.sin(Math.min(h,Math.PI/2)),v=_*(_>0?a:l),S=y*l,P=u*(u>0?a:l),f=g*(g>0?l:a);return{x:v,y:c?-1*f:P,width:S-v,height:f-P}}};return Xe.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1,(0,r.getBooleanValidator)()),Xe}var $e={},Je={},Es;function xa(){if(Es)return Je;Es=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Line=void 0;const t=ft(),e=ut(),i=Ft(),r=gt();function n(a,l,c,h,_,y,u){const g=Math.sqrt(Math.pow(c-a,2)+Math.pow(h-l,2)),v=Math.sqrt(Math.pow(_-c,2)+Math.pow(y-h,2)),S=u*g/(g+v),P=u*v/(g+v),f=c-S*(_-a),d=h-S*(y-l),m=c+P*(_-a),C=h+P*(y-l);return[f,d,m,C]}function s(a,l){const c=a.length,h=[];for(let _=2;_<c-2;_+=2){const y=n(a[_-2],a[_-1],a[_],a[_+1],a[_+2],a[_+3],l);isNaN(y[0])||(h.push(y[0]),h.push(y[1]),h.push(a[_]),h.push(a[_+1]),h.push(y[2]),h.push(y[3]))}return h}let o=class extends i.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){let c=this.points(),h=c.length,_=this.tension(),y=this.closed(),u=this.bezier(),g,v,S;if(h){if(l.beginPath(),l.moveTo(c[0],c[1]),_!==0&&h>4){for(g=this.getTensionPoints(),v=g.length,S=y?0:4,y||l.quadraticCurveTo(g[0],g[1],g[2],g[3]);S<v-2;)l.bezierCurveTo(g[S++],g[S++],g[S++],g[S++],g[S++],g[S++]);y||l.quadraticCurveTo(g[v-2],g[v-1],c[h-2],c[h-1])}else if(u)for(S=2;S<h;)l.bezierCurveTo(c[S++],c[S++],c[S++],c[S++],c[S++],c[S++]);else for(S=2;S<h;S+=2)l.lineTo(c[S],c[S+1]);y?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),c=l.length,h=this.tension(),_=n(l[c-2],l[c-1],l[0],l[1],l[2],l[3],h),y=n(l[c-4],l[c-3],l[c-2],l[c-1],l[0],l[1],h),u=s(l,h);return[_[2],_[3]].concat(u).concat([y[0],y[1],l[c-2],l[c-1],y[2],y[3],_[0],_[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let c=l[0],h=l[0],_=l[1],y=l[1],u,g;for(let v=0;v<l.length/2;v++)u=l[v*2],g=l[v*2+1],c=Math.min(c,u),h=Math.max(h,u),_=Math.min(_,g),y=Math.max(y,g);return{x:c,y:_,width:h-c,height:y-_}}};return Je.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(o),t.Factory.addGetterSetter(o,"closed",!1),t.Factory.addGetterSetter(o,"bezier",!1),t.Factory.addGetterSetter(o,"tension",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(o,"points",[],(0,r.getNumberArrayValidator)()),Je}var Qe={},zn={},Fs;function _c(){return Fs||(Fs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,l)=>{let c,h;const y=l/2;c=0;for(let u=0;u<20;u++)h=y*t.tValues[20][u]+y,c+=t.cValues[20][u]*r(o,a,h);return y*c};t.getCubicArcLength=e;const i=(o,a,l)=>{l===void 0&&(l=1);const c=o[0]-2*o[1]+o[2],h=a[0]-2*a[1]+a[2],_=2*o[1]-2*o[0],y=2*a[1]-2*a[0],u=4*(c*c+h*h),g=4*(c*_+h*y),v=_*_+y*y;if(u===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const S=g/(2*u),P=v/u,f=l+S,d=P-S*S,m=f*f+d>0?Math.sqrt(f*f+d):0,C=S*S+d>0?Math.sqrt(S*S+d):0,A=S+Math.sqrt(S*S+d)!==0?d*Math.log(Math.abs((f+m)/(S+C))):0;return Math.sqrt(u)/2*(f*m-S*C+A)};t.getQuadraticArcLength=i;function r(o,a,l){const c=n(1,l,o),h=n(1,l,a),_=c*c+h*h;return Math.sqrt(_)}const n=(o,a,l)=>{const c=l.length-1;let h,_;if(c===0)return 0;if(o===0){_=0;for(let y=0;y<=c;y++)_+=t.binomialCoefficients[c][y]*Math.pow(1-a,c-y)*Math.pow(a,y)*l[y];return _}else{h=new Array(c);for(let y=0;y<c;y++)h[y]=c*(l[y+1]-l[y]);return n(o-1,a,h)}},s=(o,a,l)=>{let c=1,h=o/a,_=(o-l(h))/a,y=0;for(;c>.001;){const u=l(h+_),g=Math.abs(o-u)/a;if(g<c)c=g,h+=_;else{const v=l(h-_),S=Math.abs(o-v)/a;S<c?(c=S,h-=_):_/=2}if(y++,y>500)break}return h};t.t2length=s}(zn)),zn}var Ms;function Fr(){if(Ms)return Qe;Ms=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Path=void 0;const t=ft(),e=Ft(),i=ut(),r=_c();let n=class Ht extends e.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ht.parsePathData(this.data()),this.pathLength=Ht.getPathLength(this.dataArray)}_sceneFunc(o){const a=this.dataArray;o.beginPath();let l=!1;for(let m=0;m<a.length;m++){const C=a[m].command,A=a[m].points;switch(C){case"L":o.lineTo(A[0],A[1]);break;case"M":o.moveTo(A[0],A[1]);break;case"C":o.bezierCurveTo(A[0],A[1],A[2],A[3],A[4],A[5]);break;case"Q":o.quadraticCurveTo(A[0],A[1],A[2],A[3]);break;case"A":var c=A[0],h=A[1],_=A[2],y=A[3],u=A[4],g=A[5],v=A[6],S=A[7],P=_>y?_:y,f=_>y?1:_/y,d=_>y?y/_:1;o.translate(c,h),o.rotate(v),o.scale(f,d),o.arc(0,0,P,u,u+g,1-S),o.scale(1/f,1/d),o.rotate(-v),o.translate(-c,-h);break;case"z":l=!0,o.closePath();break}}!l&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(u){if(u.command==="A"){const g=u.points[4],v=u.points[5],S=u.points[4]+v;let P=Math.PI/180;if(Math.abs(g-S)<P&&(P=Math.abs(g-S)),v<0)for(let f=g-P;f>S;f-=P){const d=Ht.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],f,0);o.push(d.x,d.y)}else for(let f=g+P;f<S;f+=P){const d=Ht.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],f,0);o.push(d.x,d.y)}}else if(u.command==="C")for(let g=0;g<=1;g+=.01){const v=Ht.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);o.push(v.x,v.y)}else o=o.concat(u.points)});let a=o[0],l=o[0],c=o[1],h=o[1],_,y;for(let u=0;u<o.length/2;u++)_=o[u*2],y=o[u*2+1],isNaN(_)||(a=Math.min(a,_),l=Math.max(l,_)),isNaN(y)||(c=Math.min(c,y),h=Math.max(h,y));return{x:a,y:c,width:l-a,height:h-c}}getLength(){return this.pathLength}getPointAtLength(o){return Ht.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,a,l,c){return Math.sqrt((l-o)*(l-o)+(c-a)*(c-a))}static getPathLength(o){let a=0;for(let l=0;l<o.length;++l)a+=o[l].pathLength;return a}static getPointAtLengthOfDataArray(o,a){let l,c=0,h=a.length;if(!h)return null;for(;c<h&&o>a[c].pathLength;)o-=a[c].pathLength,++c;if(c===h)return l=a[c-1].points.slice(-2),{x:l[0],y:l[1]};if(o<.01)return l=a[c].points.slice(0,2),{x:l[0],y:l[1]};const _=a[c],y=_.points;switch(_.command){case"L":return Ht.getPointOnLine(o,_.start.x,_.start.y,y[0],y[1]);case"C":return Ht.getPointOnCubicBezier((0,r.t2length)(o,Ht.getPathLength(a),m=>(0,r.getCubicArcLength)([_.start.x,y[0],y[2],y[4]],[_.start.y,y[1],y[3],y[5]],m)),_.start.x,_.start.y,y[0],y[1],y[2],y[3],y[4],y[5]);case"Q":return Ht.getPointOnQuadraticBezier((0,r.t2length)(o,Ht.getPathLength(a),m=>(0,r.getQuadraticArcLength)([_.start.x,y[0],y[2]],[_.start.y,y[1],y[3]],m)),_.start.x,_.start.y,y[0],y[1],y[2],y[3]);case"A":var u=y[0],g=y[1],v=y[2],S=y[3],P=y[4],f=y[5],d=y[6];return P+=f*o/_.pathLength,Ht.getPointOnEllipticalArc(u,g,v,S,P,d)}return null}static getPointOnLine(o,a,l,c,h,_,y){_=_??a,y=y??l;const u=this.getLineLength(a,l,c,h);if(u<1e-10)return{x:a,y:l};if(c===a)return{x:_,y:y+(h>l?o:-o)};const g=(h-l)/(c-a),v=Math.sqrt(o*o/(1+g*g))*(c<a?-1:1),S=g*v;if(Math.abs(y-l-g*(_-a))<1e-10)return{x:_+v,y:y+S};const P=((_-a)*(c-a)+(y-l)*(h-l))/(u*u),f=a+P*(c-a),d=l+P*(h-l),m=this.getLineLength(_,y,f,d),C=Math.sqrt(o*o-m*m),A=Math.sqrt(C*C/(1+g*g))*(c<a?-1:1),G=g*A;return{x:f+A,y:d+G}}static getPointOnCubicBezier(o,a,l,c,h,_,y,u,g){function v(C){return C*C*C}function S(C){return 3*C*C*(1-C)}function P(C){return 3*C*(1-C)*(1-C)}function f(C){return(1-C)*(1-C)*(1-C)}const d=u*v(o)+_*S(o)+c*P(o)+a*f(o),m=g*v(o)+y*S(o)+h*P(o)+l*f(o);return{x:d,y:m}}static getPointOnQuadraticBezier(o,a,l,c,h,_,y){function u(f){return f*f}function g(f){return 2*f*(1-f)}function v(f){return(1-f)*(1-f)}const S=_*u(o)+c*g(o)+a*v(o),P=y*u(o)+h*g(o)+l*v(o);return{x:S,y:P}}static getPointOnEllipticalArc(o,a,l,c,h,_){const y=Math.cos(_),u=Math.sin(_),g={x:l*Math.cos(h),y:c*Math.sin(h)};return{x:o+(g.x*y-g.y*u),y:a+(g.x*u+g.y*y)}}static parsePathData(o){if(!o)return[];let a=o;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var c=0;c<l.length;c++)a=a.replace(new RegExp(l[c],"g"),"|"+l[c]);const h=a.split("|"),_=[],y=[];let u=0,g=0;const v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let S;for(c=1;c<h.length;c++){let p=h[c],w=p.charAt(0);for(p=p.slice(1),y.length=0;S=v.exec(p);)y.push(S[0]);const b=[];for(let E=0,O=y.length;E<O;E++){if(y[E]==="00"){b.push(0,0);continue}const D=parseFloat(y[E]);isNaN(D)?b.push(0):b.push(D)}for(;b.length>0&&!isNaN(b[0]);){let E="",O=[];const D=u,H=g;var P,f,d,m,C,A,G,R,T,x;switch(w){case"l":u+=b.shift(),g+=b.shift(),E="L",O.push(u,g);break;case"L":u=b.shift(),g=b.shift(),O.push(u,g);break;case"m":var M=b.shift(),L=b.shift();if(u+=M,g+=L,E="M",_.length>2&&_[_.length-1].command==="z"){for(let U=_.length-2;U>=0;U--)if(_[U].command==="M"){u=_[U].points[0]+M,g=_[U].points[1]+L;break}}O.push(u,g),w="l";break;case"M":u=b.shift(),g=b.shift(),E="M",O.push(u,g),w="L";break;case"h":u+=b.shift(),E="L",O.push(u,g);break;case"H":u=b.shift(),E="L",O.push(u,g);break;case"v":g+=b.shift(),E="L",O.push(u,g);break;case"V":g=b.shift(),E="L",O.push(u,g);break;case"C":O.push(b.shift(),b.shift(),b.shift(),b.shift()),u=b.shift(),g=b.shift(),O.push(u,g);break;case"c":O.push(u+b.shift(),g+b.shift(),u+b.shift(),g+b.shift()),u+=b.shift(),g+=b.shift(),E="C",O.push(u,g);break;case"S":f=u,d=g,P=_[_.length-1],P.command==="C"&&(f=u+(u-P.points[2]),d=g+(g-P.points[3])),O.push(f,d,b.shift(),b.shift()),u=b.shift(),g=b.shift(),E="C",O.push(u,g);break;case"s":f=u,d=g,P=_[_.length-1],P.command==="C"&&(f=u+(u-P.points[2]),d=g+(g-P.points[3])),O.push(f,d,u+b.shift(),g+b.shift()),u+=b.shift(),g+=b.shift(),E="C",O.push(u,g);break;case"Q":O.push(b.shift(),b.shift()),u=b.shift(),g=b.shift(),O.push(u,g);break;case"q":O.push(u+b.shift(),g+b.shift()),u+=b.shift(),g+=b.shift(),E="Q",O.push(u,g);break;case"T":f=u,d=g,P=_[_.length-1],P.command==="Q"&&(f=u+(u-P.points[0]),d=g+(g-P.points[1])),u=b.shift(),g=b.shift(),E="Q",O.push(f,d,u,g);break;case"t":f=u,d=g,P=_[_.length-1],P.command==="Q"&&(f=u+(u-P.points[0]),d=g+(g-P.points[1])),u+=b.shift(),g+=b.shift(),E="Q",O.push(f,d,u,g);break;case"A":m=b.shift(),C=b.shift(),A=b.shift(),G=b.shift(),R=b.shift(),T=u,x=g,u=b.shift(),g=b.shift(),E="A",O=this.convertEndpointToCenterParameterization(T,x,u,g,G,R,m,C,A);break;case"a":m=b.shift(),C=b.shift(),A=b.shift(),G=b.shift(),R=b.shift(),T=u,x=g,u+=b.shift(),g+=b.shift(),E="A",O=this.convertEndpointToCenterParameterization(T,x,u,g,G,R,m,C,A);break}_.push({command:E||w,points:O,start:{x:D,y:H},pathLength:this.calcLength(D,H,E||w,O)})}(w==="z"||w==="Z")&&_.push({command:"z",points:[],start:void 0,pathLength:0})}return _}static calcLength(o,a,l,c){let h,_,y,u;const g=Ht;switch(l){case"L":return g.getLineLength(o,a,c[0],c[1]);case"C":return(0,r.getCubicArcLength)([o,c[0],c[2],c[4]],[a,c[1],c[3],c[5]],1);case"Q":return(0,r.getQuadraticArcLength)([o,c[0],c[2]],[a,c[1],c[3]],1);case"A":h=0;var v=c[4],S=c[5],P=c[4]+S,f=Math.PI/180;if(Math.abs(v-P)<f&&(f=Math.abs(v-P)),_=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],v,0),S<0)for(u=v-f;u>P;u-=f)y=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],u,0),h+=g.getLineLength(_.x,_.y,y.x,y.y),_=y;else for(u=v+f;u<P;u+=f)y=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],u,0),h+=g.getLineLength(_.x,_.y,y.x,y.y),_=y;return y=g.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],P,0),h+=g.getLineLength(_.x,_.y,y.x,y.y),h}return 0}static convertEndpointToCenterParameterization(o,a,l,c,h,_,y,u,g){const v=g*(Math.PI/180),S=Math.cos(v)*(o-l)/2+Math.sin(v)*(a-c)/2,P=-1*Math.sin(v)*(o-l)/2+Math.cos(v)*(a-c)/2,f=S*S/(y*y)+P*P/(u*u);f>1&&(y*=Math.sqrt(f),u*=Math.sqrt(f));let d=Math.sqrt((y*y*(u*u)-y*y*(P*P)-u*u*(S*S))/(y*y*(P*P)+u*u*(S*S)));h===_&&(d*=-1),isNaN(d)&&(d=0);const m=d*y*P/u,C=d*-u*S/y,A=(o+l)/2+Math.cos(v)*m-Math.sin(v)*C,G=(a+c)/2+Math.sin(v)*m+Math.cos(v)*C,R=function(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1])},T=function(b,E){return(b[0]*E[0]+b[1]*E[1])/(R(b)*R(E))},x=function(b,E){return(b[0]*E[1]<b[1]*E[0]?-1:1)*Math.acos(T(b,E))},M=x([1,0],[(S-m)/y,(P-C)/u]),L=[(S-m)/y,(P-C)/u],p=[(-1*S-m)/y,(-1*P-C)/u];let w=x(L,p);return T(L,p)<=-1&&(w=Math.PI),T(L,p)>=1&&(w=0),_===0&&w>0&&(w=w-2*Math.PI),_===1&&w<0&&(w=w+2*Math.PI),[A,G,y,u,M,w,v,_]}};return Qe.Path=n,n.prototype.className="Path",n.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(n),t.Factory.addGetterSetter(n,"data"),Qe}var Os;function mc(){if(Os)return $e;Os=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.Arrow=void 0;const t=ft(),e=xa(),i=gt(),r=ut(),n=Fr();let s=class extends e.Line{_sceneFunc(a){super._sceneFunc(a);const l=Math.PI*2,c=this.points();let h=c;const _=this.tension()!==0&&c.length>4;_&&(h=this.getTensionPoints());const y=this.pointerLength(),u=c.length;let g,v;if(_){const f=[h[h.length-4],h[h.length-3],h[h.length-2],h[h.length-1],c[u-2],c[u-1]],d=n.Path.calcLength(h[h.length-4],h[h.length-3],"C",f),m=n.Path.getPointOnQuadraticBezier(Math.min(1,1-y/d),f[0],f[1],f[2],f[3],f[4],f[5]);g=c[u-2]-m.x,v=c[u-1]-m.y}else g=c[u-2]-c[u-4],v=c[u-1]-c[u-3];const S=(Math.atan2(v,g)+l)%l,P=this.pointerWidth();this.pointerAtEnding()&&(a.save(),a.beginPath(),a.translate(c[u-2],c[u-1]),a.rotate(S),a.moveTo(0,0),a.lineTo(-y,P/2),a.lineTo(-y,-P/2),a.closePath(),a.restore(),this.__fillStroke(a)),this.pointerAtBeginning()&&(a.save(),a.beginPath(),a.translate(c[0],c[1]),_?(g=(h[0]+h[2])/2-c[0],v=(h[1]+h[3])/2-c[1]):(g=c[2]-c[0],v=c[3]-c[1]),a.rotate((Math.atan2(-v,-g)+l)%l),a.moveTo(0,0),a.lineTo(-y,P/2),a.lineTo(-y,-P/2),a.closePath(),a.restore(),this.__fillStroke(a))}__fillStroke(a){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,a.setLineDash([])),a.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const a=super.getSelfRect(),l=this.pointerWidth()/2;return{x:a.x,y:a.y-l,width:a.width,height:a.height+l*2}}};return $e.Arrow=s,s.prototype.className="Arrow",(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerAtBeginning",!1),t.Factory.addGetterSetter(s,"pointerAtEnding",!0),$e}var Ze={},ks;function yc(){if(ks)return Ze;ks=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.Circle=void 0;const t=ft(),e=Ft(),i=gt(),r=ut();let n=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}};return Ze.Circle=n,n.prototype._centroid=!0,n.prototype.className="Circle",n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),Ze}var ti={},Ns;function vc(){if(Ns)return ti;Ns=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Ellipse=void 0;const t=ft(),e=Ft(),i=gt(),r=ut();let n=class extends e.Shape{_sceneFunc(o){const a=this.radiusX(),l=this.radiusY();o.beginPath(),o.save(),a!==l&&o.scale(1,l/a),o.arc(0,0,a,0,Math.PI*2,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}};return ti.Ellipse=n,n.prototype.className="Ellipse",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(n),t.Factory.addComponentsGetterSetter(n,"radius",["x","y"]),t.Factory.addGetterSetter(n,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"radiusY",0,(0,i.getNumberValidator)()),ti}var ei={},Gs;function bc(){if(Gs)return ei;Gs=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Image=void 0;const t=Pt(),e=ft(),i=Ft(),r=ut(),n=gt();let s=class Pa extends i.Shape{constructor(a){super(a),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",this._loadListener)}_removeImageLoad(a){a&&a.removeEventListener&&a.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const a=!!this.cornerRadius(),l=this.hasShadow();return a&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const l=this.getWidth(),c=this.getHeight(),h=this.cornerRadius(),_=this.attrs.image;let y;if(_){const u=this.attrs.cropWidth,g=this.attrs.cropHeight;u&&g?y=[_,this.cropX(),this.cropY(),u,g,0,0,l,c]:y=[_,0,0,l,c]}(this.hasFill()||this.hasStroke()||h)&&(a.beginPath(),h?t.Util.drawRoundedRectPath(a,l,c,h):a.rect(0,0,l,c),a.closePath(),a.fillStrokeShape(this)),_&&(h&&a.clip(),a.drawImage.apply(a,y))}_hitFunc(a){const l=this.width(),c=this.height(),h=this.cornerRadius();a.beginPath(),h?t.Util.drawRoundedRectPath(a,l,c,h):a.rect(0,0,l,c),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,l;return(a=this.attrs.width)!==null&&a!==void 0?a:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var a,l;return(a=this.attrs.height)!==null&&a!==void 0?a:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(a,l,c=null){const h=t.Util.createImageElement();h.onload=function(){const _=new Pa({image:h});l(_)},h.onerror=c,h.crossOrigin="Anonymous",h.src=a}};return ei.Image=s,s.prototype.className="Image",(0,r._registerNode)(s),e.Factory.addGetterSetter(s,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(s,"image"),e.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(s,"cropX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(s,"cropHeight",0,(0,n.getNumberValidator)()),ei}var Ce={},Ls;function Sc(){if(Ls)return Ce;Ls=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.Tag=Ce.Label=void 0;const t=ft(),e=Ft(),i=Rr(),r=gt(),n=ut(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",a="none",l="up",c="right",h="down",_="left",y=s.length;let u=class extends i.Group{constructor(S){super(S),this.on("add.konva",function(P){this._addListeners(P.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(S){let P=this,f;const d=function(){P._sync()};for(f=0;f<y;f++)S.on(s[f]+o,d)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let S=this.getText(),P=this.getTag(),f,d,m,C,A,G,R;if(S&&P){switch(f=S.width(),d=S.height(),m=P.pointerDirection(),C=P.pointerWidth(),R=P.pointerHeight(),A=0,G=0,m){case l:A=f/2,G=-1*R;break;case c:A=f+C,G=d/2;break;case h:A=f/2,G=d+R;break;case _:A=-1*C,G=d/2;break}P.setAttrs({x:-1*A,y:-1*G,width:f,height:d}),S.setAttrs({x:-1*A,y:-1*G})}}};Ce.Label=u,u.prototype.className="Label",(0,n._registerNode)(u);class g extends e.Shape{_sceneFunc(S){const P=this.width(),f=this.height(),d=this.pointerDirection(),m=this.pointerWidth(),C=this.pointerHeight(),A=this.cornerRadius();let G=0,R=0,T=0,x=0;typeof A=="number"?G=R=T=x=Math.min(A,P/2,f/2):(G=Math.min(A[0]||0,P/2,f/2),R=Math.min(A[1]||0,P/2,f/2),x=Math.min(A[2]||0,P/2,f/2),T=Math.min(A[3]||0,P/2,f/2)),S.beginPath(),S.moveTo(G,0),d===l&&(S.lineTo((P-m)/2,0),S.lineTo(P/2,-1*C),S.lineTo((P+m)/2,0)),S.lineTo(P-R,0),S.arc(P-R,R,R,Math.PI*3/2,0,!1),d===c&&(S.lineTo(P,(f-C)/2),S.lineTo(P+m,f/2),S.lineTo(P,(f+C)/2)),S.lineTo(P,f-x),S.arc(P-x,f-x,x,0,Math.PI/2,!1),d===h&&(S.lineTo((P+m)/2,f),S.lineTo(P/2,f+C),S.lineTo((P-m)/2,f)),S.lineTo(T,f),S.arc(T,f-T,T,Math.PI/2,Math.PI,!1),d===_&&(S.lineTo(0,(f+C)/2),S.lineTo(-1*m,f/2),S.lineTo(0,(f-C)/2)),S.lineTo(0,G),S.arc(G,G,G,Math.PI,Math.PI*3/2,!1),S.closePath(),S.fillStrokeShape(this)}getSelfRect(){let S=0,P=0,f=this.pointerWidth(),d=this.pointerHeight(),m=this.pointerDirection(),C=this.width(),A=this.height();return m===l?(P-=d,A+=d):m===h?A+=d:m===_?(S-=f*1.5,C+=f):m===c&&(C+=f*1.5),{x:S,y:P,width:C,height:A}}}return Ce.Tag=g,g.prototype.className="Tag",(0,n._registerNode)(g),t.Factory.addGetterSetter(g,"pointerDirection",a),t.Factory.addGetterSetter(g,"pointerWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(g,"pointerHeight",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(g,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Ce}var ii={},Ds;function Ta(){if(Ds)return ii;Ds=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Rect=void 0;const t=ft(),e=Ft(),i=ut(),r=Pt(),n=gt();let s=class extends e.Shape{_sceneFunc(a){const l=this.cornerRadius(),c=this.width(),h=this.height();a.beginPath(),l?r.Util.drawRoundedRectPath(a,c,h,l):a.rect(0,0,c,h),a.closePath(),a.fillStrokeShape(this)}};return ii.Rect=s,s.prototype.className="Rect",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),ii}var ni={},Is;function Cc(){if(Is)return ni;Is=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.RegularPolygon=void 0;const t=ft(),e=Ft(),i=gt(),r=ut();let n=class extends e.Shape{_sceneFunc(o){const a=this._getPoints();o.beginPath(),o.moveTo(a[0].x,a[0].y);for(let l=1;l<a.length;l++)o.lineTo(a[l].x,a[l].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,a=this.attrs.radius||0,l=[];for(let c=0;c<o;c++)l.push({x:a*Math.sin(c*2*Math.PI/o),y:-1*a*Math.cos(c*2*Math.PI/o)});return l}getSelfRect(){const o=this._getPoints();let a=o[0].x,l=o[0].y,c=o[0].x,h=o[0].y;return o.forEach(_=>{a=Math.min(a,_.x),l=Math.max(l,_.x),c=Math.min(c,_.y),h=Math.max(h,_.y)}),{x:a,y:c,width:l-a,height:h-c}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return ni.RegularPolygon=n,n.prototype.className="RegularPolygon",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"sides",0,(0,i.getNumberValidator)()),ni}var ri={},Us;function wc(){if(Us)return ri;Us=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Ring=void 0;const t=ft(),e=Ft(),i=gt(),r=ut(),n=Math.PI*2;let s=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.innerRadius(),0,n,!1),a.moveTo(this.outerRadius(),0),a.arc(0,0,this.outerRadius(),n,0,!0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return ri.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),ri}var si={},Bs;function xc(){if(Bs)return si;Bs=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Sprite=void 0;const t=ft(),e=Ft(),i=Er(),r=gt(),n=ut();let s=class extends e.Shape{constructor(a){super(a),this._updated=!0,this.anim=new i.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(a){const l=this.animation(),c=this.frameIndex(),h=c*4,_=this.animations()[l],y=this.frameOffsets(),u=_[h+0],g=_[h+1],v=_[h+2],S=_[h+3],P=this.image();if((this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,v,S),a.closePath(),a.fillStrokeShape(this)),P)if(y){const f=y[l],d=c*2;a.drawImage(P,u,g,v,S,f[d+0],f[d+1],v,S)}else a.drawImage(P,u,g,v,S,0,0,v,S)}_hitFunc(a){const l=this.animation(),c=this.frameIndex(),h=c*4,_=this.animations()[l],y=this.frameOffsets(),u=_[h+2],g=_[h+3];if(a.beginPath(),y){const v=y[l],S=c*2;a.rect(v[S+0],v[S+1],u,g)}else a.rect(0,0,u,g);a.closePath(),a.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const a=this.frameIndex(),l=this.animation(),c=this.animations(),h=c[l],_=h.length/4;a<_-1?this.frameIndex(a+1):this.frameIndex(0)}};return si.Sprite=s,s.prototype.className="Sprite",(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"animation"),t.Factory.addGetterSetter(s,"animations"),t.Factory.addGetterSetter(s,"frameOffsets"),t.Factory.addGetterSetter(s,"image"),t.Factory.addGetterSetter(s,"frameIndex",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"frameRate",17,(0,r.getNumberValidator)()),t.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),si}var oi={},Vs;function Pc(){if(Vs)return oi;Vs=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.Star=void 0;const t=ft(),e=Ft(),i=gt(),r=ut();let n=class extends e.Shape{_sceneFunc(o){const a=this.innerRadius(),l=this.outerRadius(),c=this.numPoints();o.beginPath(),o.moveTo(0,0-l);for(let h=1;h<c*2;h++){const _=h%2===0?l:a,y=_*Math.sin(h*Math.PI/c),u=-1*_*Math.cos(h*Math.PI/c);o.lineTo(y,u)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return oi.Star=n,n.prototype.className="Star",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(n),t.Factory.addGetterSetter(n,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),oi}var Re={},Hs;function Aa(){if(Hs)return Re;Hs=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.Text=void 0,Re.stringToArray=o;const t=Pt(),e=ft(),i=Ft(),r=ut(),n=gt(),s=ut();function o(et){return[...et].reduce((q,J,nt,rt)=>{if(new RegExp("\\p{Emoji}","u").test(J)){const N=rt[nt+1];N&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(N)?(q.push(J+N),rt[nt+1]=""):q.push(J)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(J+(rt[nt+1]||""))?q.push(J+rt[nt+1]):nt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(J)?q[q.length-1]+=J:J&&q.push(J);return q},[])}const a="auto",l="center",c="inherit",h="justify",_="Change.konva",y="2d",u="-",g="left",v="text",S="Text",P="top",f="bottom",d="middle",m="normal",C="px ",A=" ",G="right",R="rtl",T="word",x="char",M="none",L="…",p=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],w=p.length;function b(et){return et.split(",").map(q=>{q=q.trim();const J=q.indexOf(" ")>=0,nt=q.indexOf('"')>=0||q.indexOf("'")>=0;return J&&!nt&&(q=`"${q}"`),q}).join(", ")}let E;function O(){return E||(E=t.Util.createCanvasElement().getContext(y),E)}function D(et){et.fillText(this._partialText,this._partialTextX,this._partialTextY)}function H(et){et.setAttr("miterLimit",2),et.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function U(et){return et=et||{},!et.fillLinearGradientColorStops&&!et.fillRadialGradientColorStops&&!et.fillPatternImage&&(et.fill=et.fill||"black"),et}let z=class extends i.Shape{constructor(q){super(U(q)),this._partialTextX=0,this._partialTextY=0;for(let J=0;J<w;J++)this.on(p[J]+_,this._setTextData);this._setTextData()}_sceneFunc(q){const J=this.textArr,nt=J.length;if(!this.text())return;let rt=this.padding(),N=this.fontSize(),B=this.lineHeight()*N,X=this.verticalAlign(),Q=this.direction(),st=0,F=this.align(),k=this.getWidth(),I=this.letterSpacing(),V=this.fill(),j=this.textDecoration(),W=j.indexOf("underline")!==-1,Y=j.indexOf("line-through")!==-1,Z;Q=Q===c?q.direction:Q;let $=B/2,K=d;if(r.Konva._fixTextRendering){const Ct=this.measureSize("M");K="alphabetic",$=(Ct.fontBoundingBoxAscent-Ct.fontBoundingBoxDescent)/2+B/2}var it=0,tt=0;for(Q===R&&q.setAttr("direction",Q),q.setAttr("font",this._getContextFont()),q.setAttr("textBaseline",K),q.setAttr("textAlign",g),X===d?st=(this.getHeight()-nt*B-rt*2)/2:X===f&&(st=this.getHeight()-nt*B-rt*2),q.translate(rt,st+rt),Z=0;Z<nt;Z++){var it=0,tt=0,ot=J[Z],at=ot.text,lt=ot.width,pt=ot.lastInParagraph,dt,wt;if(q.save(),F===G?it+=k-lt-rt*2:F===l&&(it+=(k-lt-rt*2)/2),W){q.save(),q.beginPath();const xt=r.Konva._fixTextRendering?Math.round(N/4):Math.round(N/2),Mt=it,Bt=$+tt+xt;q.moveTo(Mt,Bt),dt=at.split(" ").length-1,wt=F===h&&!pt?k-rt*2:lt,q.lineTo(Mt+Math.round(wt),Bt),q.lineWidth=N/15;const Ot=this._getLinearGradient();q.strokeStyle=Ot||V,q.stroke(),q.restore()}if(Y){q.save(),q.beginPath();const xt=r.Konva._fixTextRendering?-Math.round(N/4):0;q.moveTo(it,$+tt+xt),dt=at.split(" ").length-1,wt=F===h&&!pt?k-rt*2:lt,q.lineTo(it+Math.round(wt),$+tt+xt),q.lineWidth=N/15;const Mt=this._getLinearGradient();q.strokeStyle=Mt||V,q.stroke(),q.restore()}if(Q!==R&&(I!==0||F===h)){dt=at.split(" ").length-1;const xt=o(at);for(let Mt=0;Mt<xt.length;Mt++){const Bt=xt[Mt];Bt===" "&&!pt&&F===h&&(it+=(k-rt*2-lt)/dt),this._partialTextX=it,this._partialTextY=$+tt,this._partialText=Bt,q.fillStrokeShape(this),it+=this.measureSize(Bt).width+I}}else I!==0&&q.setAttr("letterSpacing",`${I}px`),this._partialTextX=it,this._partialTextY=$+tt,this._partialText=at,q.fillStrokeShape(this);q.restore(),nt>1&&($+=B)}}_hitFunc(q){const J=this.getWidth(),nt=this.getHeight();q.beginPath(),q.rect(0,0,J,nt),q.closePath(),q.fillStrokeShape(this)}setText(q){const J=t.Util._isString(q)?q:q==null?"":q+"";return this._setAttr(v,J),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(q){var J,nt,rt,N,B,X,Q,st,F,k,I;let V=O(),j=this.fontSize(),W;V.save(),V.font=this._getContextFont(),W=V.measureText(q),V.restore();const Y=j/100;return{actualBoundingBoxAscent:(J=W.actualBoundingBoxAscent)!==null&&J!==void 0?J:71.58203125*Y,actualBoundingBoxDescent:(nt=W.actualBoundingBoxDescent)!==null&&nt!==void 0?nt:0,actualBoundingBoxLeft:(rt=W.actualBoundingBoxLeft)!==null&&rt!==void 0?rt:-7.421875*Y,actualBoundingBoxRight:(N=W.actualBoundingBoxRight)!==null&&N!==void 0?N:75.732421875*Y,alphabeticBaseline:(B=W.alphabeticBaseline)!==null&&B!==void 0?B:0,emHeightAscent:(X=W.emHeightAscent)!==null&&X!==void 0?X:100*Y,emHeightDescent:(Q=W.emHeightDescent)!==null&&Q!==void 0?Q:-20*Y,fontBoundingBoxAscent:(st=W.fontBoundingBoxAscent)!==null&&st!==void 0?st:91*Y,fontBoundingBoxDescent:(F=W.fontBoundingBoxDescent)!==null&&F!==void 0?F:21*Y,hangingBaseline:(k=W.hangingBaseline)!==null&&k!==void 0?k:72.80000305175781*Y,ideographicBaseline:(I=W.ideographicBaseline)!==null&&I!==void 0?I:-21*Y,width:W.width,height:j}}_getContextFont(){return this.fontStyle()+A+this.fontVariant()+A+(this.fontSize()+C)+b(this.fontFamily())}_addTextLine(q){this.align()===h&&(q=q.trim());const nt=this._getTextWidth(q);return this.textArr.push({text:q,width:nt,lastInParagraph:!1})}_getTextWidth(q){const J=this.letterSpacing(),nt=q.length;return O().measureText(q).width+J*nt}_setTextData(){let q=this.text().split(`
`),J=+this.fontSize(),nt=0,rt=this.lineHeight()*J,N=this.attrs.width,B=this.attrs.height,X=N!==a&&N!==void 0,Q=B!==a&&B!==void 0,st=this.padding(),F=N-st*2,k=B-st*2,I=0,V=this.wrap(),j=V!==M,W=V!==x&&j,Y=this.ellipsis();this.textArr=[],O().font=this._getContextFont();const Z=Y?this._getTextWidth(L):0;for(let $=0,K=q.length;$<K;++$){let it=q[$],tt=this._getTextWidth(it);if(X&&tt>F)for(;it.length>0;){let ot=0,at=o(it).length,lt="",pt=0;for(;ot<at;){const dt=ot+at>>>1,wt=o(it),Ct=wt.slice(0,dt+1).join(""),Et=this._getTextWidth(Ct);(Y&&Q&&I+rt>k?Et+Z:Et)<=F?(ot=dt+1,lt=Ct,pt=Et):at=dt}if(lt){if(W){const Ct=o(it),Et=o(lt),xt=Ct[Et.length],Mt=xt===A||xt===u;let Bt;if(Mt&&pt<=F)Bt=Et.length;else{const Ot=Et.lastIndexOf(A),Kt=Et.lastIndexOf(u);Bt=Math.max(Ot,Kt)+1}Bt>0&&(ot=Bt,lt=Ct.slice(0,ot).join(""),pt=this._getTextWidth(lt))}if(lt=lt.trimRight(),this._addTextLine(lt),nt=Math.max(nt,pt),I+=rt,this._shouldHandleEllipsis(I)){this._tryToAddEllipsisToLastLine();break}if(it=o(it).slice(ot).join("").trimLeft(),it.length>0&&(tt=this._getTextWidth(it),tt<=F)){this._addTextLine(it),I+=rt,nt=Math.max(nt,tt);break}}else break}else this._addTextLine(it),I+=rt,nt=Math.max(nt,tt),this._shouldHandleEllipsis(I)&&$<K-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Q&&I+rt>k)break}this.textHeight=J,this.textWidth=nt}_shouldHandleEllipsis(q){const J=+this.fontSize(),nt=this.lineHeight()*J,rt=this.attrs.height,N=rt!==a&&rt!==void 0,B=this.padding(),X=rt-B*2;return!(this.wrap()!==M)||N&&q+nt>X}_tryToAddEllipsisToLastLine(){const q=this.attrs.width,J=q!==a&&q!==void 0,nt=this.padding(),rt=q-nt*2,N=this.ellipsis(),B=this.textArr[this.textArr.length-1];!B||!N||(J&&(this._getTextWidth(B.text+L)<rt||(B.text=B.text.slice(0,B.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(B.text+L))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const q=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,J=this.hasShadow();return q&&J?!0:super._useBufferCanvas()}};return Re.Text=z,z.prototype._fillFunc=D,z.prototype._strokeFunc=H,z.prototype.className=S,z.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(z),e.Factory.overWriteSetter(z,"width",(0,n.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(z,"height",(0,n.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(z,"direction",c),e.Factory.addGetterSetter(z,"fontFamily","Arial"),e.Factory.addGetterSetter(z,"fontSize",12,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(z,"fontStyle",m),e.Factory.addGetterSetter(z,"fontVariant",m),e.Factory.addGetterSetter(z,"padding",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(z,"align",g),e.Factory.addGetterSetter(z,"verticalAlign",P),e.Factory.addGetterSetter(z,"lineHeight",1,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(z,"wrap",T),e.Factory.addGetterSetter(z,"ellipsis",!1,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(z,"letterSpacing",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(z,"text","",(0,n.getStringValidator)()),e.Factory.addGetterSetter(z,"textDecoration",""),Re}var ai={},qs;function Tc(){if(qs)return ai;qs=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.TextPath=void 0;const t=Pt(),e=ft(),i=Ft(),r=Fr(),n=Aa(),s=gt(),o=ut(),a="",l="normal";function c(y){y.fillText(this.partialText,0,0)}function h(y){y.strokeText(this.partialText,0,0)}let _=class extends i.Shape{constructor(u){super(u),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(u){if(!this.attrs.data)return null;const g=this.pathLength;return u-1>g?null:r.Path.getPointAtLengthOfDataArray(u,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(u){u.setAttr("font",this._getContextFont()),u.setAttr("textBaseline",this.textBaseline()),u.setAttr("textAlign","left"),u.save();const g=this.textDecoration(),v=this.fill(),S=this.fontSize(),P=this.glyphInfo;g==="underline"&&u.beginPath();for(let f=0;f<P.length;f++){u.save();const d=P[f].p0;u.translate(d.x,d.y),u.rotate(P[f].rotation),this.partialText=P[f].text,u.fillStrokeShape(this),g==="underline"&&(f===0&&u.moveTo(0,S/2+1),u.lineTo(S,S/2+1)),u.restore()}g==="underline"&&(u.strokeStyle=v,u.lineWidth=S/20,u.stroke()),u.restore()}_hitFunc(u){u.beginPath();const g=this.glyphInfo;if(g.length>=1){const v=g[0].p0;u.moveTo(v.x,v.y)}for(let v=0;v<g.length;v++){const S=g[v].p1;u.lineTo(S.x,S.y)}u.setAttr("lineWidth",this.fontSize()),u.setAttr("strokeStyle",this.colorKey),u.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(u){return n.Text.prototype.setText.call(this,u)}_getContextFont(){return n.Text.prototype._getContextFont.call(this)}_getTextSize(u){const v=this.dummyCanvas.getContext("2d");v.save(),v.font=this._getContextFont();const S=v.measureText(u);return v.restore(),{width:S.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:u,height:g}=this._getTextSize(this.attrs.text);if(this.textWidth=u,this.textHeight=g,this.glyphInfo=[],!this.attrs.data)return null;const v=this.letterSpacing(),S=this.align(),P=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*v,0);let d=0;S==="center"&&(d=Math.max(0,this.pathLength/2-f/2)),S==="right"&&(d=Math.max(0,this.pathLength-f));const m=(0,n.stringToArray)(this.text());let C=d;for(let A=0;A<m.length;A++){const G=this._getPointAtLength(C);if(!G)return;let R=this._getTextSize(m[A]).width+v;if(m[A]===" "&&S==="justify"){const w=this.text().split(" ").length-1;R+=(this.pathLength-f)/w}const T=this._getPointAtLength(C+R);if(!T)return;const x=r.Path.getLineLength(G.x,G.y,T.x,T.y);let M=0;if(P)try{M=P(m[A-1],m[A])*this.fontSize()}catch{M=0}G.x+=M,T.x+=M,this.textWidth+=M;const L=r.Path.getPointOnLine(M+x/2,G.x,G.y,T.x,T.y),p=Math.atan2(T.y-G.y,T.x-G.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:m[A],rotation:p,p0:G,p1:T}),C+=R}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const u=[];this.glyphInfo.forEach(function(C){u.push(C.p0.x),u.push(C.p0.y),u.push(C.p1.x),u.push(C.p1.y)});let g=u[0]||0,v=u[0]||0,S=u[1]||0,P=u[1]||0,f,d;for(let C=0;C<u.length/2;C++)f=u[C*2],d=u[C*2+1],g=Math.min(g,f),v=Math.max(v,f),S=Math.min(S,d),P=Math.max(P,d);const m=this.fontSize();return{x:g-m/2,y:S-m/2,width:v-g+m,height:P-S+m}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return ai.TextPath=_,_.prototype._fillFunc=c,_.prototype._strokeFunc=h,_.prototype._fillFuncHit=c,_.prototype._strokeFuncHit=h,_.prototype.className="TextPath",_.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(_),e.Factory.addGetterSetter(_,"data"),e.Factory.addGetterSetter(_,"fontFamily","Arial"),e.Factory.addGetterSetter(_,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"fontStyle",l),e.Factory.addGetterSetter(_,"align","left"),e.Factory.addGetterSetter(_,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(_,"textBaseline","middle"),e.Factory.addGetterSetter(_,"fontVariant",l),e.Factory.addGetterSetter(_,"text",a),e.Factory.addGetterSetter(_,"textDecoration",""),e.Factory.addGetterSetter(_,"kerningFunc",void 0),ai}var li={},Ws;function Ac(){if(Ws)return li;Ws=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Transformer=void 0;const t=Pt(),e=ft(),i=Tt(),r=Ft(),n=Ta(),s=Rr(),o=ut(),a=gt(),l=ut(),c="tr-konva",h=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(R=>R+`.${c}`).join(" "),_="nodesRect",y=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],u={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in o.Konva._global;function v(R,T,x){if(R==="rotater")return x;T+=t.Util.degToRad(u[R]||0);const M=(t.Util.radToDeg(T)%360+360)%360;return t.Util._inRange(M,315+22.5,360)||t.Util._inRange(M,0,22.5)?"ns-resize":t.Util._inRange(M,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(M,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(M,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(M,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(M,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(M,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(M,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+M),"pointer")}const S=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function P(R){return{x:R.x+R.width/2*Math.cos(R.rotation)+R.height/2*Math.sin(-R.rotation),y:R.y+R.height/2*Math.cos(R.rotation)+R.width/2*Math.sin(R.rotation)}}function f(R,T,x){const M=x.x+(R.x-x.x)*Math.cos(T)-(R.y-x.y)*Math.sin(T),L=x.y+(R.x-x.x)*Math.sin(T)+(R.y-x.y)*Math.cos(T);return{...R,rotation:R.rotation+T,x:M,y:L}}function d(R,T){const x=P(R);return f(R,T,x)}function m(R,T,x){let M=T;for(let L=0;L<R.length;L++){const p=o.Konva.getAngle(R[L]),w=Math.abs(p-T)%(Math.PI*2);Math.min(w,Math.PI*2-w)<x&&(M=p)}return M}let C=0,A=class extends s.Group{constructor(T){super(T),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(h,this.update),this.getNode()&&this.update()}attachTo(T){return this.setNode(T),this}setNode(T){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return c+this._id}setNodes(T=[]){this._nodes&&this._nodes.length&&this.detach();const x=T.filter(L=>L.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=T=x,T.length===1&&this.useSingleNodeRotation()?this.rotation(T[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(L=>{const p=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(L._attrsAffectingSize.length){const w=L._attrsAffectingSize.map(b=>b+"Change."+this._getEventNamespace()).join(" ");L.on(w,p)}L.on(y.map(w=>w+`.${this._getEventNamespace()}`).join(" "),p),L.on(`absoluteTransformChange.${this._getEventNamespace()}`,p),this._proxyDrag(L)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(T){let x;T.on(`dragstart.${this._getEventNamespace()}`,M=>{x=T.getAbsolutePosition(),!this.isDragging()&&T!==this.findOne(".back")&&this.startDrag(M,!1)}),T.on(`dragmove.${this._getEventNamespace()}`,M=>{if(!x)return;const L=T.getAbsolutePosition(),p=L.x-x.x,w=L.y-x.y;this.nodes().forEach(b=>{if(b===T||b.isDragging())return;const E=b.getAbsolutePosition();b.setAbsolutePosition({x:E.x+p,y:E.y+w}),b.startDrag(M)}),x=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(T=>{T.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(_),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(_,this.__getNodeRect)}__getNodeShape(T,x=this.rotation(),M){const L=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=T.getAbsoluteScale(M),w=T.getAbsolutePosition(M),b=L.x*p.x-T.offsetX()*p.x,E=L.y*p.y-T.offsetY()*p.y,O=(o.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),D={x:w.x+b*Math.cos(O)+E*Math.sin(-O),y:w.y+E*Math.cos(O)+b*Math.sin(O),width:L.width*p.x,height:L.height*p.y,rotation:O};return f(D,-o.Konva.getAngle(x),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const x=[];this.nodes().map(O=>{const D=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),H=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],U=O.getAbsoluteTransform();H.forEach(function(z){const et=U.point(z);x.push(et)})});const M=new t.Transform;M.rotate(-o.Konva.getAngle(this.rotation()));let L=1/0,p=1/0,w=-1/0,b=-1/0;x.forEach(function(O){const D=M.point(O);L===void 0&&(L=w=D.x,p=b=D.y),L=Math.min(L,D.x),p=Math.min(p,D.y),w=Math.max(w,D.x),b=Math.max(b,D.y)}),M.invert();const E=M.point({x:L,y:p});return{x:E.x,y:E.y,width:w-L,height:b-p,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),S.forEach(T=>{this._createAnchor(T)}),this._createAnchor("rotater")}_createAnchor(T){const x=new n.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),M=this;x.on("mousedown touchstart",function(L){M._handleMouseDown(L)}),x.on("dragstart",L=>{x.stopDrag(),L.cancelBubble=!0}),x.on("dragend",L=>{L.cancelBubble=!0}),x.on("mouseenter",()=>{const L=o.Konva.getAngle(this.rotation()),p=this.rotateAnchorCursor(),w=v(T,L,p);x.getStage().content&&(x.getStage().content.style.cursor=w),this._cursorChange=!0}),x.on("mouseout",()=>{x.getStage().content&&(x.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(x)}_createBack(){const T=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(x,M){const L=M.getParent(),p=L.padding();x.beginPath(),x.rect(-p,-p,M.width()+p*2,M.height()+p*2),x.moveTo(M.width()/2,-p),L.rotateEnabled()&&L.rotateLineVisible()&&x.lineTo(M.width()/2,-L.rotateAnchorOffset()*t.Util._sign(M.height())-p),x.fillStrokeShape(M)},hitFunc:(x,M)=>{if(!this.shouldOverdrawWholeArea())return;const L=this.padding();x.beginPath(),x.rect(-L,-L,M.width()+L*2,M.height()+L*2),x.fillStrokeShape(M)}});this.add(T),this._proxyDrag(T),T.on("dragstart",x=>{x.cancelBubble=!0}),T.on("dragmove",x=>{x.cancelBubble=!0}),T.on("dragend",x=>{x.cancelBubble=!0}),this.on("dragmove",x=>{this.update()})}_handleMouseDown(T){if(this._transforming)return;this._movingAnchorName=T.target.name().split(" ")[0];const x=this._getNodeRect(),M=x.width,L=x.height,p=Math.sqrt(Math.pow(M,2)+Math.pow(L,2));this.sin=Math.abs(L/p),this.cos=Math.abs(M/p),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const w=T.target.getAbsolutePosition(),b=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:b.x-w.x,y:b.y-w.y},C++,this._fire("transformstart",{evt:T.evt,target:this.getNode()}),this._nodes.forEach(E=>{E._fire("transformstart",{evt:T.evt,target:E})})}_handleMouseMove(T){let x,M,L;const p=this.findOne("."+this._movingAnchorName),w=p.getStage();w.setPointersPositions(T);const b=w.getPointerPosition();let E={x:b.x-this._anchorDragOffset.x,y:b.y-this._anchorDragOffset.y};const O=p.getAbsolutePosition();this.anchorDragBoundFunc()&&(E=this.anchorDragBoundFunc()(O,E,T)),p.setAbsolutePosition(E);const D=p.getAbsolutePosition();if(O.x===D.x&&O.y===D.y)return;if(this._movingAnchorName==="rotater"){const X=this._getNodeRect();x=p.x()-X.width/2,M=-p.y()+X.height/2;let Q=Math.atan2(-M,x)+Math.PI/2;X.height<0&&(Q-=Math.PI);const F=o.Konva.getAngle(this.rotation())+Q,k=o.Konva.getAngle(this.rotationSnapTolerance()),V=m(this.rotationSnaps(),F,k)-X.rotation,j=d(X,V);this._fitNodesInto(j,T);return}const H=this.shiftBehavior();let U;H==="inverted"?U=this.keepRatio()&&!T.shiftKey:H==="none"?U=this.keepRatio():U=this.keepRatio()||T.shiftKey;var nt=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(U){var z=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};L=Math.sqrt(Math.pow(z.x-p.x(),2)+Math.pow(z.y-p.y(),2));var et=this.findOne(".top-left").x()>z.x?-1:1,q=this.findOne(".top-left").y()>z.y?-1:1;x=L*this.cos*et,M=L*this.sin*q,this.findOne(".top-left").x(z.x-x),this.findOne(".top-left").y(z.y-M)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(p.y());else if(this._movingAnchorName==="top-right"){if(U){var z=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};L=Math.sqrt(Math.pow(p.x()-z.x,2)+Math.pow(z.y-p.y(),2));var et=this.findOne(".top-right").x()<z.x?-1:1,q=this.findOne(".top-right").y()>z.y?-1:1;x=L*this.cos*et,M=L*this.sin*q,this.findOne(".top-right").x(z.x+x),this.findOne(".top-right").y(z.y-M)}var J=p.position();this.findOne(".top-left").y(J.y),this.findOne(".bottom-right").x(J.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(p.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(p.x());else if(this._movingAnchorName==="bottom-left"){if(U){var z=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};L=Math.sqrt(Math.pow(z.x-p.x(),2)+Math.pow(p.y()-z.y,2));var et=z.x<p.x()?-1:1,q=p.y()<z.y?-1:1;x=L*this.cos*et,M=L*this.sin*q,p.x(z.x-x),p.y(z.y+M)}J=p.position(),this.findOne(".top-left").x(J.x),this.findOne(".bottom-right").y(J.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(p.y());else if(this._movingAnchorName==="bottom-right"){if(U){var z=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};L=Math.sqrt(Math.pow(p.x()-z.x,2)+Math.pow(p.y()-z.y,2));var et=this.findOne(".bottom-right").x()<z.x?-1:1,q=this.findOne(".bottom-right").y()<z.y?-1:1;x=L*this.cos*et,M=L*this.sin*q,this.findOne(".bottom-right").x(z.x+x),this.findOne(".bottom-right").y(z.y+M)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var nt=this.centeredScaling()||T.altKey;if(nt){const X=this.findOne(".top-left"),Q=this.findOne(".bottom-right"),st=X.x(),F=X.y(),k=this.getWidth()-Q.x(),I=this.getHeight()-Q.y();Q.move({x:-st,y:-F}),X.move({x:k,y:I})}const rt=this.findOne(".top-left").getAbsolutePosition();x=rt.x,M=rt.y;const N=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),B=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x,y:M,width:N,height:B,rotation:o.Konva.getAngle(this.rotation())},T)}_handleMouseUp(T){this._removeEvents(T)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(T){var x;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const M=this.getNode();C--,this._fire("transformend",{evt:T,target:M}),(x=this.getLayer())===null||x===void 0||x.batchDraw(),M&&this._nodes.forEach(L=>{var p;L._fire("transformend",{evt:T,target:L}),(p=L.getLayer())===null||p===void 0||p.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(T,x){const M=this._getNodeRect(),L=1;if(t.Util._inRange(T.width,-this.padding()*2-L,L)){this.update();return}if(t.Util._inRange(T.height,-this.padding()*2-L,L)){this.update();return}const p=new t.Transform;if(p.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){const U=p.point({x:-this.padding()*2,y:0});T.x+=U.x,T.y+=U.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){const U=p.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){const U=p.point({x:0,y:-this.padding()*2});T.x+=U.x,T.y+=U.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const U=p.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){const U=this.boundBoxFunc()(M,T);U?T=U:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const w=1e7,b=new t.Transform;b.translate(M.x,M.y),b.rotate(M.rotation),b.scale(M.width/w,M.height/w);const E=new t.Transform,O=T.width/w,D=T.height/w;this.flipEnabled()===!1?(E.translate(T.x,T.y),E.rotate(T.rotation),E.translate(T.width<0?T.width:0,T.height<0?T.height:0),E.scale(Math.abs(O),Math.abs(D))):(E.translate(T.x,T.y),E.rotate(T.rotation),E.scale(O,D));const H=E.multiply(b.invert());this._nodes.forEach(U=>{var z;const et=U.getParent().getAbsoluteTransform(),q=U.getTransform().copy();q.translate(U.offsetX(),U.offsetY());const J=new t.Transform;J.multiply(et.copy().invert()).multiply(H).multiply(et).multiply(q);const nt=J.decompose();U.setAttrs(nt),(z=U.getLayer())===null||z===void 0||z.batchDraw()}),this.rotation(t.Util._getRotation(T.rotation)),this._nodes.forEach(U=>{this._fire("transform",{evt:x,target:U}),U._fire("transform",{evt:x,target:U})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(T,x){this.findOne(T).setAttrs(x)}update(){var T;const x=this._getNodeRect();this.rotation(t.Util._getRotation(x.rotation));const M=x.width,L=x.height,p=this.enabledAnchors(),w=this.resizeEnabled(),b=this.padding(),E=this.anchorSize(),O=this.find("._anchor");O.forEach(H=>{H.setAttrs({width:E,height:E,offsetX:E/2,offsetY:E/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:E/2+b,offsetY:E/2+b,visible:w&&p.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:M/2,y:0,offsetY:E/2+b,visible:w&&p.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:M,y:0,offsetX:E/2-b,offsetY:E/2+b,visible:w&&p.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:L/2,offsetX:E/2+b,visible:w&&p.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:M,y:L/2,offsetX:E/2-b,visible:w&&p.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:L,offsetX:E/2+b,offsetY:E/2-b,visible:w&&p.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:M/2,y:L,offsetY:E/2-b,visible:w&&p.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:M,y:L,offsetX:E/2-b,offsetY:E/2-b,visible:w&&p.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:M/2,y:-this.rotateAnchorOffset()*t.Util._sign(L)-b,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:M,height:L,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const D=this.anchorStyleFunc();D&&O.forEach(H=>{D(H)}),(T=this.getLayer())===null||T===void 0||T.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(T){return i.Node.prototype.clone.call(this,T)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};li.Transformer=A,A.isTransforming=()=>C>0;function G(R){return R instanceof Array||t.Util.warn("enabledAnchors value should be an array"),R instanceof Array&&R.forEach(function(T){S.indexOf(T)===-1&&t.Util.warn("Unknown anchor name: "+T+". Available names are: "+S.join(", "))}),R||[]}return A.prototype.className="Transformer",(0,l._registerNode)(A),e.Factory.addGetterSetter(A,"enabledAnchors",S,G),e.Factory.addGetterSetter(A,"flipEnabled",!0,(0,a.getBooleanValidator)()),e.Factory.addGetterSetter(A,"resizeEnabled",!0),e.Factory.addGetterSetter(A,"anchorSize",10,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"rotateEnabled",!0),e.Factory.addGetterSetter(A,"rotateLineVisible",!0),e.Factory.addGetterSetter(A,"rotationSnaps",[]),e.Factory.addGetterSetter(A,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(A,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"borderEnabled",!0),e.Factory.addGetterSetter(A,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(A,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"anchorFill","white"),e.Factory.addGetterSetter(A,"anchorCornerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(A,"borderStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"borderDash"),e.Factory.addGetterSetter(A,"keepRatio",!0),e.Factory.addGetterSetter(A,"shiftBehavior","default"),e.Factory.addGetterSetter(A,"centeredScaling",!1),e.Factory.addGetterSetter(A,"ignoreStroke",!1),e.Factory.addGetterSetter(A,"padding",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(A,"nodes"),e.Factory.addGetterSetter(A,"node"),e.Factory.addGetterSetter(A,"boundBoxFunc"),e.Factory.addGetterSetter(A,"anchorDragBoundFunc"),e.Factory.addGetterSetter(A,"anchorStyleFunc"),e.Factory.addGetterSetter(A,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(A,"useSingleNodeRotation",!0),e.Factory.backCompat(A,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),li}var hi={},js;function Rc(){if(js)return hi;js=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Wedge=void 0;const t=ft(),e=Ft(),i=ut(),r=gt(),n=ut();let s=class extends e.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return hi.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"clockwise",!1),t.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),hi}var ci={},zs;function Ec(){if(zs)return ci;zs=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Blur=void 0;const t=ft(),e=Tt(),i=gt();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(l,c){const h=l.data,_=l.width,y=l.height;let u,g,v,S,P,f,d,m,C,A,G,R,T,x,M,L,p,w,b,E,O,D,H,U;const z=c+c+1,et=_-1,q=y-1,J=c+1,nt=J*(J+1)/2,rt=new r,N=n[c],B=s[c];let X=null,Q=rt,st=null,F=null;for(v=1;v<z;v++)Q=Q.next=new r,v===J&&(X=Q);for(Q.next=rt,d=f=0,g=0;g<y;g++){for(L=p=w=b=m=C=A=G=0,R=J*(E=h[f]),T=J*(O=h[f+1]),x=J*(D=h[f+2]),M=J*(H=h[f+3]),m+=nt*E,C+=nt*O,A+=nt*D,G+=nt*H,Q=rt,v=0;v<J;v++)Q.r=E,Q.g=O,Q.b=D,Q.a=H,Q=Q.next;for(v=1;v<J;v++)S=f+((et<v?et:v)<<2),m+=(Q.r=E=h[S])*(U=J-v),C+=(Q.g=O=h[S+1])*U,A+=(Q.b=D=h[S+2])*U,G+=(Q.a=H=h[S+3])*U,L+=E,p+=O,w+=D,b+=H,Q=Q.next;for(st=rt,F=X,u=0;u<_;u++)h[f+3]=H=G*N>>B,H!==0?(H=255/H,h[f]=(m*N>>B)*H,h[f+1]=(C*N>>B)*H,h[f+2]=(A*N>>B)*H):h[f]=h[f+1]=h[f+2]=0,m-=R,C-=T,A-=x,G-=M,R-=st.r,T-=st.g,x-=st.b,M-=st.a,S=d+((S=u+c+1)<et?S:et)<<2,L+=st.r=h[S],p+=st.g=h[S+1],w+=st.b=h[S+2],b+=st.a=h[S+3],m+=L,C+=p,A+=w,G+=b,st=st.next,R+=E=F.r,T+=O=F.g,x+=D=F.b,M+=H=F.a,L-=E,p-=O,w-=D,b-=H,F=F.next,f+=4;d+=_}for(u=0;u<_;u++){for(p=w=b=L=C=A=G=m=0,f=u<<2,R=J*(E=h[f]),T=J*(O=h[f+1]),x=J*(D=h[f+2]),M=J*(H=h[f+3]),m+=nt*E,C+=nt*O,A+=nt*D,G+=nt*H,Q=rt,v=0;v<J;v++)Q.r=E,Q.g=O,Q.b=D,Q.a=H,Q=Q.next;for(P=_,v=1;v<=c;v++)f=P+u<<2,m+=(Q.r=E=h[f])*(U=J-v),C+=(Q.g=O=h[f+1])*U,A+=(Q.b=D=h[f+2])*U,G+=(Q.a=H=h[f+3])*U,L+=E,p+=O,w+=D,b+=H,Q=Q.next,v<q&&(P+=_);for(f=u,st=rt,F=X,g=0;g<y;g++)S=f<<2,h[S+3]=H=G*N>>B,H>0?(H=255/H,h[S]=(m*N>>B)*H,h[S+1]=(C*N>>B)*H,h[S+2]=(A*N>>B)*H):h[S]=h[S+1]=h[S+2]=0,m-=R,C-=T,A-=x,G-=M,R-=st.r,T-=st.g,x-=st.b,M-=st.a,S=u+((S=g+J)<q?S:q)*_<<2,m+=L+=st.r=h[S],C+=p+=st.g=h[S+1],A+=w+=st.b=h[S+2],G+=b+=st.a=h[S+3],st=st.next,R+=E=F.r,T+=O=F.g,x+=D=F.b,M+=H=F.a,L-=E,p-=O,w-=D,b-=H,F=F.next,f+=_}}const a=function(c){const h=Math.round(this.blurRadius());h>0&&o(c,h)};return ci.Blur=a,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),ci}var di={},Ks;function Fc(){if(Ks)return di;Ks=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Brighten=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=this.brightness()*255,o=n.data,a=o.length;for(let l=0;l<a;l+=4)o[l]+=s,o[l+1]+=s,o[l+2]+=s};return di.Brighten=r,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),di}var ui={},Ys;function Mc(){if(Ys)return ui;Ys=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Contrast=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=Math.pow((this.contrast()+100)/100,2),o=n.data,a=o.length;let l=150,c=150,h=150;for(let _=0;_<a;_+=4)l=o[_],c=o[_+1],h=o[_+2],l/=255,l-=.5,l*=s,l+=.5,l*=255,c/=255,c-=.5,c*=s,c+=.5,c*=255,h/=255,h-=.5,h*=s,h+=.5,h*=255,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,h=h<0?0:h>255?255:h,o[_]=l,o[_+1]=c,o[_+2]=h};return ui.Contrast=r,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),ui}var fi={},Xs;function Oc(){if(Xs)return fi;Xs=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Emboss=void 0;const t=ft(),e=Tt(),i=Pt(),r=gt(),n=function(s){const o=this.embossStrength()*10,a=this.embossWhiteLevel()*255,l=this.embossDirection(),c=this.embossBlend(),h=s.data,_=s.width,y=s.height,u=_*4;let g=0,v=0,S=y;switch(l){case"top-left":g=-1,v=-1;break;case"top":g=-1,v=0;break;case"top-right":g=-1,v=1;break;case"right":g=0,v=1;break;case"bottom-right":g=1,v=1;break;case"bottom":g=1,v=0;break;case"bottom-left":g=1,v=-1;break;case"left":g=0,v=-1;break;default:i.Util.error("Unknown emboss direction: "+l)}do{const P=(S-1)*u;let f=g;S+f<1&&(f=0),S+f>y&&(f=0);const d=(S-1+f)*_*4;let m=_;do{const C=P+(m-1)*4;let A=v;m+A<1&&(A=0),m+A>_&&(A=0);const G=d+(m-1+A)*4,R=h[C]-h[G],T=h[C+1]-h[G+1],x=h[C+2]-h[G+2];let M=R;const L=M>0?M:-M,p=T>0?T:-T,w=x>0?x:-x;if(p>L&&(M=T),w>L&&(M=x),M*=o,c){const b=h[C]+M,E=h[C+1]+M,O=h[C+2]+M;h[C]=b>255?255:b<0?0:b,h[C+1]=E>255?255:E<0?0:E,h[C+2]=O>255?255:O<0?0:O}else{let b=a-M;b<0?b=0:b>255&&(b=255),h[C]=h[C+1]=h[C+2]=b}}while(--m)}while(--S)};return fi.Emboss=n,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),fi}var gi={},$s;function kc(){if($s)return gi;$s=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Enhance=void 0;const t=ft(),e=Tt(),i=gt();function r(s,o,a,l,c){const h=a-o,_=c-l;if(h===0)return l+_/2;if(_===0)return l;let y=(s-o)/h;return y=_*y+l,y}const n=function(s){const o=s.data,a=o.length;let l=o[0],c=l,h,_=o[1],y=_,u,g=o[2],v=g,S;const P=this.enhance();if(P===0)return;for(let M=0;M<a;M+=4)h=o[M+0],h<l?l=h:h>c&&(c=h),u=o[M+1],u<_?_=u:u>y&&(y=u),S=o[M+2],S<g?g=S:S>v&&(v=S);c===l&&(c=255,l=0),y===_&&(y=255,_=0),v===g&&(v=255,g=0);let f,d,m,C,A,G,R,T,x;P>0?(d=c+P*(255-c),m=l-P*(l-0),A=y+P*(255-y),G=_-P*(_-0),T=v+P*(255-v),x=g-P*(g-0)):(f=(c+l)*.5,d=c+P*(c-f),m=l+P*(l-f),C=(y+_)*.5,A=y+P*(y-C),G=_+P*(_-C),R=(v+g)*.5,T=v+P*(v-R),x=g+P*(g-R));for(let M=0;M<a;M+=4)o[M+0]=r(o[M+0],l,c,m,d),o[M+1]=r(o[M+1],_,y,G,A),o[M+2]=r(o[M+2],g,v,x,T)};return gi.Enhance=n,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),gi}var pi={},Js;function Nc(){if(Js)return pi;Js=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Grayscale=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4){const s=.34*i[n]+.5*i[n+1]+.16*i[n+2];i[n]=s,i[n+1]=s,i[n+2]=s}};return pi.Grayscale=t,pi}var _i={},Qs;function Gc(){if(Qs)return _i;Qs=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.HSL=void 0;const t=ft(),e=Tt(),i=gt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const r=function(n){const s=n.data,o=s.length,a=1,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=this.luminance()*127,_=a*l*Math.cos(c*Math.PI/180),y=a*l*Math.sin(c*Math.PI/180),u=.299*a+.701*_+.167*y,g=.587*a-.587*_+.33*y,v=.114*a-.114*_-.497*y,S=.299*a-.299*_-.328*y,P=.587*a+.413*_+.035*y,f=.114*a-.114*_+.293*y,d=.299*a-.3*_+1.25*y,m=.587*a-.586*_-1.05*y,C=.114*a+.886*_-.2*y;let A,G,R,T;for(let x=0;x<o;x+=4)A=s[x+0],G=s[x+1],R=s[x+2],T=s[x+3],s[x+0]=u*A+g*G+v*R+h,s[x+1]=S*A+P*G+f*R+h,s[x+2]=d*A+m*G+C*R+h,s[x+3]=T};return _i.HSL=r,_i}var mi={},Zs;function Lc(){if(Zs)return mi;Zs=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.HSV=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=n.data,o=s.length,a=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=a*l*Math.cos(c*Math.PI/180),_=a*l*Math.sin(c*Math.PI/180),y=.299*a+.701*h+.167*_,u=.587*a-.587*h+.33*_,g=.114*a-.114*h-.497*_,v=.299*a-.299*h-.328*_,S=.587*a+.413*h+.035*_,P=.114*a-.114*h+.293*_,f=.299*a-.3*h+1.25*_,d=.587*a-.586*h-1.05*_,m=.114*a+.886*h-.2*_;let C,A,G,R;for(let T=0;T<o;T+=4)C=s[T+0],A=s[T+1],G=s[T+2],R=s[T+3],s[T+0]=y*C+u*A+g*G,s[T+1]=v*C+S*A+P*G,s[T+2]=f*C+d*A+m*G,s[T+3]=R};return mi.HSV=r,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),mi}var yi={},to;function Dc(){if(to)return yi;to=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Invert=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4)i[n]=255-i[n],i[n+1]=255-i[n+1],i[n+2]=255-i[n+2]};return yi.Invert=t,yi}var vi={},eo;function Ic(){if(eo)return vi;eo=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Kaleidoscope=void 0;const t=ft(),e=Tt(),i=Pt(),r=gt(),n=function(a,l,c){const h=a.data,_=l.data,y=a.width,u=a.height,g=c.polarCenterX||y/2,v=c.polarCenterY||u/2;let S=Math.sqrt(g*g+v*v),P=y-g,f=u-v;const d=Math.sqrt(P*P+f*f);S=d>S?d:S;const m=u,C=y,A=360/C*Math.PI/180;for(let G=0;G<C;G+=1){const R=Math.sin(G*A),T=Math.cos(G*A);for(let x=0;x<m;x+=1){P=Math.floor(g+S*x/m*T),f=Math.floor(v+S*x/m*R);let M=(f*y+P)*4;const L=h[M+0],p=h[M+1],w=h[M+2],b=h[M+3];M=(G+x*y)*4,_[M+0]=L,_[M+1]=p,_[M+2]=w,_[M+3]=b}}},s=function(a,l,c){const h=a.data,_=l.data,y=a.width,u=a.height,g=c.polarCenterX||y/2,v=c.polarCenterY||u/2;let S=Math.sqrt(g*g+v*v),P=y-g,f=u-v;const d=Math.sqrt(P*P+f*f);S=d>S?d:S;const m=u,C=y,A=0;let G,R;for(P=0;P<y;P+=1)for(f=0;f<u;f+=1){const T=P-g,x=f-v,M=Math.sqrt(T*T+x*x)*m/S;let L=(Math.atan2(x,T)*180/Math.PI+360+A)%360;L=L*C/360,G=Math.floor(L),R=Math.floor(M);let p=(R*y+G)*4;const w=h[p+0],b=h[p+1],E=h[p+2],O=h[p+3];p=(f*y+P)*4,_[p+0]=w,_[p+1]=b,_[p+2]=E,_[p+3]=O}},o=function(a){const l=a.width,c=a.height;let h,_,y,u,g,v,S,P,f,d,m=Math.round(this.kaleidoscopePower());const C=Math.round(this.kaleidoscopeAngle()),A=Math.floor(l*(C%360)/360);if(m<1)return;const G=i.Util.createCanvasElement();G.width=l,G.height=c;const R=G.getContext("2d").getImageData(0,0,l,c);i.Util.releaseCanvas(G),n(a,R,{polarCenterX:l/2,polarCenterY:c/2});let T=l/Math.pow(2,m);for(;T<=8;)T=T*2,m-=1;T=Math.ceil(T);let x=T,M=0,L=x,p=1;for(A+T>l&&(M=x,L=0,p=-1),_=0;_<c;_+=1)for(h=M;h!==L;h+=p)y=Math.round(h+A)%l,f=(l*_+y)*4,g=R.data[f+0],v=R.data[f+1],S=R.data[f+2],P=R.data[f+3],d=(l*_+h)*4,R.data[d+0]=g,R.data[d+1]=v,R.data[d+2]=S,R.data[d+3]=P;for(_=0;_<c;_+=1)for(x=Math.floor(T),u=0;u<m;u+=1){for(h=0;h<x+1;h+=1)f=(l*_+h)*4,g=R.data[f+0],v=R.data[f+1],S=R.data[f+2],P=R.data[f+3],d=(l*_+x*2-h-1)*4,R.data[d+0]=g,R.data[d+1]=v,R.data[d+2]=S,R.data[d+3]=P;x*=2}s(R,a,{})};return vi.Kaleidoscope=o,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),vi}var bi={},io;function Uc(){if(io)return bi;io=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Mask=void 0;const t=ft(),e=Tt(),i=gt();function r(y,u,g){let v=(g*y.width+u)*4;const S=[];return S.push(y.data[v++],y.data[v++],y.data[v++],y.data[v++]),S}function n(y,u){return Math.sqrt(Math.pow(y[0]-u[0],2)+Math.pow(y[1]-u[1],2)+Math.pow(y[2]-u[2],2))}function s(y){const u=[0,0,0];for(let g=0;g<y.length;g++)u[0]+=y[g][0],u[1]+=y[g][1],u[2]+=y[g][2];return u[0]/=y.length,u[1]/=y.length,u[2]/=y.length,u}function o(y,u){const g=r(y,0,0),v=r(y,y.width-1,0),S=r(y,0,y.height-1),P=r(y,y.width-1,y.height-1),f=u||10;if(n(g,v)<f&&n(v,P)<f&&n(P,S)<f&&n(S,g)<f){const d=s([v,g,P,S]),m=[];for(let C=0;C<y.width*y.height;C++){const A=n(d,[y.data[C*4],y.data[C*4+1],y.data[C*4+2]]);m[C]=A<f?0:255}return m}}function a(y,u){for(let g=0;g<y.width*y.height;g++)y.data[4*g+3]=u[g]}function l(y,u,g){const v=[1,1,1,1,0,1,1,1,1],S=Math.round(Math.sqrt(v.length)),P=Math.floor(S/2),f=[];for(let d=0;d<g;d++)for(let m=0;m<u;m++){const C=d*u+m;let A=0;for(let G=0;G<S;G++)for(let R=0;R<S;R++){const T=d+G-P,x=m+R-P;if(T>=0&&T<g&&x>=0&&x<u){const M=T*u+x,L=v[G*S+R];A+=y[M]*L}}f[C]=A===255*8?255:0}return f}function c(y,u,g){const v=[1,1,1,1,1,1,1,1,1],S=Math.round(Math.sqrt(v.length)),P=Math.floor(S/2),f=[];for(let d=0;d<g;d++)for(let m=0;m<u;m++){const C=d*u+m;let A=0;for(let G=0;G<S;G++)for(let R=0;R<S;R++){const T=d+G-P,x=m+R-P;if(T>=0&&T<g&&x>=0&&x<u){const M=T*u+x,L=v[G*S+R];A+=y[M]*L}}f[C]=A>=255*4?255:0}return f}function h(y,u,g){const v=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],S=Math.round(Math.sqrt(v.length)),P=Math.floor(S/2),f=[];for(let d=0;d<g;d++)for(let m=0;m<u;m++){const C=d*u+m;let A=0;for(let G=0;G<S;G++)for(let R=0;R<S;R++){const T=d+G-P,x=m+R-P;if(T>=0&&T<g&&x>=0&&x<u){const M=T*u+x,L=v[G*S+R];A+=y[M]*L}}f[C]=A}return f}const _=function(y){const u=this.threshold();let g=o(y,u);return g&&(g=l(g,y.width,y.height),g=c(g,y.width,y.height),g=h(g,y.width,y.height),a(y,g)),y};return bi.Mask=_,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),bi}var Si={},no;function Bc(){if(no)return Si;no=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Noise=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=this.noise()*255,o=n.data,a=o.length,l=s/2;for(let c=0;c<a;c+=4)o[c+0]+=l-2*l*Math.random(),o[c+1]+=l-2*l*Math.random(),o[c+2]+=l-2*l*Math.random()};return Si.Noise=r,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Si}var Ci={},ro;function Vc(){if(ro)return Ci;ro=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Pixelate=void 0;const t=ft(),e=Pt(),i=Tt(),r=gt(),n=function(s){let o=Math.ceil(this.pixelSize()),a=s.width,l=s.height,c,h,_,y,u,g,v,S=Math.ceil(a/o),P=Math.ceil(l/o),f,d,m,C,A,G,R,T=s.data;if(o<=0){e.Util.error("pixelSize value can not be <= 0");return}for(A=0;A<S;A+=1)for(G=0;G<P;G+=1){for(y=0,u=0,g=0,v=0,f=A*o,d=f+o,m=G*o,C=m+o,R=0,c=f;c<d;c+=1)if(!(c>=a))for(h=m;h<C;h+=1)h>=l||(_=(a*h+c)*4,y+=T[_+0],u+=T[_+1],g+=T[_+2],v+=T[_+3],R+=1);for(y=y/R,u=u/R,g=g/R,v=v/R,c=f;c<d;c+=1)if(!(c>=a))for(h=m;h<C;h+=1)h>=l||(_=(a*h+c)*4,T[_+0]=y,T[_+1]=u,T[_+2]=g,T[_+3]=v)}};return Ci.Pixelate=n,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),Ci}var wi={},so;function Hc(){if(so)return wi;so=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Posterize=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=Math.round(this.levels()*254)+1,o=n.data,a=o.length,l=255/s;for(let c=0;c<a;c+=1)o[c]=Math.floor(o[c]/l)*l};return wi.Posterize=r,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),wi}var xi={},oo;function qc(){if(oo)return xi;oo=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.RGB=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=n.data,o=s.length,a=this.red(),l=this.green(),c=this.blue();for(let h=0;h<o;h+=4){const _=(.34*s[h]+.5*s[h+1]+.16*s[h+2])/255;s[h]=_*a,s[h+1]=_*l,s[h+2]=_*c,s[h+3]=s[h+3]}};return xi.RGB=r,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),xi}var Pi={},ao;function Wc(){if(ao)return Pi;ao=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.RGBA=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=n.data,o=s.length,a=this.red(),l=this.green(),c=this.blue(),h=this.alpha();for(let _=0;_<o;_+=4){const y=1-h;s[_]=a*h+s[_]*y,s[_+1]=l*h+s[_+1]*y,s[_+2]=c*h+s[_+2]*y}};return Pi.RGBA=r,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n}),Pi}var Ti={},lo;function jc(){if(lo)return Ti;lo=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Sepia=void 0;const t=function(e){const i=e.data,r=i.length;for(let n=0;n<r;n+=4){const s=i[n+0],o=i[n+1],a=i[n+2];i[n+0]=Math.min(255,s*.393+o*.769+a*.189),i[n+1]=Math.min(255,s*.349+o*.686+a*.168),i[n+2]=Math.min(255,s*.272+o*.534+a*.131)}};return Ti.Sepia=t,Ti}var Ai={},ho;function zc(){if(ho)return Ai;ho=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Solarize=void 0;const t=function(e){const i=e.data,r=e.width,n=e.height,s=r*4;let o=n;do{const a=(o-1)*s;let l=r;do{const c=a+(l-1)*4;let h=i[c],_=i[c+1],y=i[c+2];h>127&&(h=255-h),_>127&&(_=255-_),y>127&&(y=255-y),i[c]=h,i[c+1]=_,i[c+2]=y}while(--l)}while(--o)};return Ai.Solarize=t,Ai}var Ri={},co;function Kc(){if(co)return Ri;co=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Threshold=void 0;const t=ft(),e=Tt(),i=gt(),r=function(n){const s=this.threshold()*255,o=n.data,a=o.length;for(let l=0;l<a;l+=1)o[l]=o[l]<s?0:255};return Ri.Threshold=r,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ri}var uo;function Yc(){if(uo)return He;uo=1,Object.defineProperty(He,"__esModule",{value:!0}),He.Konva=void 0;const t=gc(),e=pc(),i=mc(),r=yc(),n=vc(),s=bc(),o=Sc(),a=xa(),l=Fr(),c=Ta(),h=Cc(),_=wc(),y=xc(),u=Pc(),g=Aa(),v=Tc(),S=Ac(),P=Rc(),f=Ec(),d=Fc(),m=Mc(),C=Oc(),A=kc(),G=Nc(),R=Gc(),T=Lc(),x=Dc(),M=Ic(),L=Uc(),p=Bc(),w=Vc(),b=Hc(),E=qc(),O=Wc(),D=jc(),H=zc(),U=Kc();return He.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:r.Circle,Ellipse:n.Ellipse,Image:s.Image,Label:o.Label,Tag:o.Tag,Line:a.Line,Path:l.Path,Rect:c.Rect,RegularPolygon:h.RegularPolygon,Ring:_.Ring,Sprite:y.Sprite,Star:u.Star,Text:g.Text,TextPath:v.TextPath,Transformer:S.Transformer,Wedge:P.Wedge,Filters:{Blur:f.Blur,Brighten:d.Brighten,Contrast:m.Contrast,Emboss:C.Emboss,Enhance:A.Enhance,Grayscale:G.Grayscale,HSL:R.HSL,HSV:T.HSV,Invert:x.Invert,Kaleidoscope:M.Kaleidoscope,Mask:L.Mask,Noise:p.Noise,Pixelate:w.Pixelate,Posterize:b.Posterize,RGB:E.RGB,RGBA:O.RGBA,Sepia:D.Sepia,Solarize:H.Solarize,Threshold:U.Threshold}}),He}var Xc=en.exports,fo;function $c(){if(fo)return en.exports;fo=1,Object.defineProperty(Xc,"__esModule",{value:!0});const t=Yc();return en.exports=t.Konva,en.exports}var Jc=$c();const St=cc(Jc);function dn(t){if(!St.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const go={key:!0,style:!0,elm:!0,isRootInsert:!0},Kn=".vue-konva-event";function Ra(t,e,i,r){const n=t.__konvaNode,s={};let o=!1;for(let a in i){if(go.hasOwnProperty(a))continue;const l=a.slice(0,2)==="on",c=i[a]!==e[a];if(l&&c){let h=a.slice(2).toLowerCase();h.slice(0,7)==="content"&&(h="content"+h.slice(7,1).toUpperCase()+h.slice(8)),n?.off(h+Kn,i[a])}!e.hasOwnProperty(a)&&n?.setAttr(a,void 0)}for(let a in e){if(go.hasOwnProperty(a))continue;let l=a.slice(0,2)==="on";const c=i[a]!==e[a];if(l&&c){let h=a.slice(2).toLowerCase();h.slice(0,7)==="content"&&(h="content"+h.slice(7,1).toUpperCase()+h.slice(8)),e[a]&&(n?.off(h+Kn),n?.on(h+Kn,e[a]))}!l&&(e[a]!==i[a]||r&&e[a]!==n?.getAttr(a))&&(o=!0,s[a]=e[a])}o&&n&&(n.setAttrs(s),dn(n))}const Qc="v";function Zc(t){function e(i){return i!=null&&i.__konvaNode?i:i!=null&&i.parent?e(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function Ea(t){return t.component?t.component.__konvaNode||Ea(t.component.subTree):null}function td(t){const{el:e,component:i}=t,r=Ea(t);if(e!=null&&e.tagName&&i&&!r){const n=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${n}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return r}function ed(t){const e=n=>!!(n!=null&&n.hasOwnProperty("component")),i=n=>Array.isArray(n),r=n=>e(n)?[n,...r(n.children)]:i(n)?n.flatMap(r):[];return r(t.children)}function Fa(t,e){const i=ed(t),r=[];i.forEach(s=>{const o=td(s);o&&r.push(o)});let n=!1;r.forEach((s,o)=>{s.getZIndex()!==o&&(s.setZIndex(o),n=!0)}),n&&dn(e)}const id=jo({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:i,expose:r}){const n=pa();if(!n)return;const s=Wi({}),o=ul(null),a=new St.Stage({width:t.config.width,height:t.config.height,container:document.createElement("div")});n.__konvaNode=a,h();function l(){return n?.__konvaNode}function c(){return n?.__konvaNode}function h(){if(!n)return;const _=s||{},y={...e,...t.config};Ra(n,y,_,t.__useStrictMode),Object.assign(s,y)}return Sr(()=>{o.value&&(o.value.innerHTML="",a.container(o.value)),h()}),Cr(()=>{h(),Fa(n.subTree,a)}),Xo(()=>{a.destroy()}),Li(()=>t.config,h,{deep:!0}),r({getStage:c,getNode:l}),()=>{var _;return ya("div",{ref:o,style:e?.style},(_=i.default)==null?void 0:_.call(i))}}}),nd=".vue-konva-event",rd={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function sd(t,e){return jo({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:r,slots:n,expose:s}){const o=pa();if(!o)return;const a=Wi({}),l=new e;o.__konvaNode=l,o.vnode.__konvaNode=l,_();function c(){return o?.__konvaNode}function h(){return o?.__konvaNode}function _(){if(!o)return;const u={};for(const S in o?.vnode.props)S.slice(0,2)==="on"&&(u[S]=o.vnode.props[S]);const g=a||{},v={...r,...i.config,...u};Ra(o,v,g,i.__useStrictMode),Object.assign(a,v)}Sr(()=>{var u;const g=(u=Zc(o))==null?void 0:u.__konvaNode;g&&"add"in g&&g.add(l),dn(l)}),wr(()=>{dn(l),l.destroy(),l.off(nd)}),Cr(()=>{_(),Fa(o.subTree,l)}),Li(()=>i.config,_,{deep:!0}),s({getStage:h,getNode:c});const y=rd.hasOwnProperty(t);return()=>{var u;return y?ya("template",{},(u=n.default)==null?void 0:u.call(n)):null}}})}typeof window<"u"&&!window.Konva&&require("konva");const od={install:(t,e)=>{const i=e?.prefix||Qc,r={Arc:St.Arc,Arrow:St.Arrow,Circle:St.Circle,Ellipse:St.Ellipse,FastLayer:St.FastLayer,Group:St.Group,Image:St.Image,Label:St.Label,Layer:St.Layer,Line:St.Line,Path:St.Path,Rect:St.Rect,RegularPolygon:St.RegularPolygon,Ring:St.Ring,Shape:St.Shape,Sprite:St.Sprite,Star:St.Star,Tag:St.Tag,Text:St.Text,TextPath:St.TextPath,Transformer:St.Transformer,Wedge:St.Wedge,...e?.customNodes};[id,...Object.entries(r).map(([n,s])=>sd(n,s))].forEach(n=>{t.component(`${i}${n.name}`,n)})}};Zh(hc).use(od).mount("#app");
